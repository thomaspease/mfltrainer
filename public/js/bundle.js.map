{"version":3,"sources":["../../node_modules/diff/dist/diff.js","templates/sentencetable.js","../../node_modules/lodash.assign/index.js","../../node_modules/global/document.js","../../node_modules/is-object/index.js","../../node_modules/virtual-dom/vnode/is-vhook.js","../../node_modules/virtual-dom/vdom/apply-properties.js","../../node_modules/virtual-dom/vnode/version.js","../../node_modules/virtual-dom/vnode/is-vnode.js","../../node_modules/virtual-dom/vnode/is-vtext.js","../../node_modules/virtual-dom/vnode/is-widget.js","../../node_modules/virtual-dom/vnode/is-thunk.js","../../node_modules/virtual-dom/vnode/handle-thunk.js","../../node_modules/virtual-dom/vdom/create-element.js","../../node_modules/virtual-dom/create-element.js","../../node_modules/type/value/is.js","../../node_modules/type/object/is.js","../../node_modules/type/prototype/is.js","../../node_modules/type/function/is.js","../../node_modules/type/plain-function/is.js","../../node_modules/es5-ext/object/assign/is-implemented.js","../../node_modules/es5-ext/object/keys/is-implemented.js","../../node_modules/es5-ext/function/noop.js","../../node_modules/es5-ext/object/is-value.js","../../node_modules/es5-ext/object/keys/shim.js","../../node_modules/es5-ext/object/keys/index.js","../../node_modules/es5-ext/object/valid-value.js","../../node_modules/es5-ext/object/assign/shim.js","../../node_modules/es5-ext/object/assign/index.js","../../node_modules/es5-ext/object/normalize-options.js","../../node_modules/es5-ext/string/#/contains/is-implemented.js","../../node_modules/es5-ext/string/#/contains/shim.js","../../node_modules/es5-ext/string/#/contains/index.js","../../node_modules/d/index.js","../../node_modules/es5-ext/object/valid-callable.js","../../node_modules/event-emitter/index.js","../../node_modules/lodash.defaults/index.js","../../node_modules/x-is-array/index.js","../../node_modules/virtual-dom/vnode/vnode.js","../../node_modules/virtual-dom/vnode/vtext.js","../../node_modules/browser-split/index.js","../../node_modules/virtual-dom/virtual-hyperscript/parse-tag.js","../../node_modules/virtual-dom/virtual-hyperscript/hooks/soft-set-hook.js","../../node_modules/individual/index.js","../../node_modules/individual/one-version.js","../../node_modules/ev-store/index.js","../../node_modules/virtual-dom/virtual-hyperscript/hooks/ev-hook.js","../../node_modules/virtual-dom/virtual-hyperscript/index.js","../../node_modules/virtual-dom/h.js","../../node_modules/virtual-dom/vnode/vpatch.js","../../node_modules/virtual-dom/vtree/diff-props.js","../../node_modules/virtual-dom/vtree/diff.js","../../node_modules/virtual-dom/diff.js","../../node_modules/virtual-dom/vdom/dom-index.js","../../node_modules/virtual-dom/vdom/update-widget.js","../../node_modules/virtual-dom/vdom/patch-op.js","../../node_modules/virtual-dom/vdom/patch.js","../../node_modules/virtual-dom/patch.js","../../node_modules/inline-worker/index.js","../../node_modules/waveform-playlist/lib/utils/conversions.js","../../node_modules/waveform-playlist/lib/track/loader/Loader.js","../../node_modules/waveform-playlist/lib/track/loader/BlobLoader.js","../../node_modules/waveform-playlist/lib/track/loader/XHRLoader.js","../../node_modules/waveform-playlist/lib/track/loader/LoaderFactory.js","../../node_modules/waveform-playlist/lib/render/ScrollHook.js","../../node_modules/waveform-playlist/lib/render/TimeScaleHook.js","../../node_modules/waveform-playlist/lib/TimeScale.js","../../node_modules/lodash.forown/index.js","../../node_modules/waveform-playlist/node_modules/uuid/rng-browser.js","../../node_modules/waveform-playlist/node_modules/uuid/uuid.js","../../node_modules/webaudio-peaks/index.js","../../node_modules/fade-curves/index.js","../../node_modules/fade-maker/index.js","../../node_modules/waveform-playlist/lib/track/states/CursorState.js","../../node_modules/waveform-playlist/lib/track/states/SelectState.js","../../node_modules/waveform-playlist/lib/track/states/ShiftState.js","../../node_modules/waveform-playlist/lib/track/states/FadeInState.js","../../node_modules/waveform-playlist/lib/track/states/FadeOutState.js","../../node_modules/waveform-playlist/lib/track/states.js","../../node_modules/waveform-playlist/lib/render/CanvasHook.js","../../node_modules/waveform-playlist/lib/render/FadeCanvasHook.js","../../node_modules/waveform-playlist/lib/render/VolumeSliderHook.js","../../node_modules/waveform-playlist/lib/Track.js","../../node_modules/waveform-playlist/lib/Playout.js","../../node_modules/waveform-playlist/lib/annotation/input/aeneas.js","../../node_modules/waveform-playlist/lib/annotation/output/aeneas.js","../../node_modules/waveform-playlist/lib/interaction/DragInteraction.js","../../node_modules/waveform-playlist/lib/annotation/render/ScrollTopHook.js","../../node_modules/waveform-playlist/lib/utils/timeformat.js","../../node_modules/waveform-playlist/lib/annotation/AnnotationList.js","../../node_modules/waveform-playlist/lib/utils/recorderWorker.js","../../node_modules/waveform-playlist/lib/utils/exportWavWorker.js","../../node_modules/waveform-playlist/lib/Playlist.js","../../node_modules/waveform-playlist/lib/app.js","views.js","../../node_modules/axios/lib/helpers/bind.js","../../node_modules/axios/lib/utils.js","../../node_modules/axios/lib/helpers/buildURL.js","../../node_modules/axios/lib/core/InterceptorManager.js","../../node_modules/axios/lib/core/transformData.js","../../node_modules/axios/lib/cancel/isCancel.js","../../node_modules/axios/lib/helpers/normalizeHeaderName.js","../../node_modules/axios/lib/core/enhanceError.js","../../node_modules/axios/lib/core/createError.js","../../node_modules/axios/lib/core/settle.js","../../node_modules/axios/lib/helpers/isAbsoluteURL.js","../../node_modules/axios/lib/helpers/combineURLs.js","../../node_modules/axios/lib/core/buildFullPath.js","../../node_modules/axios/lib/helpers/parseHeaders.js","../../node_modules/axios/lib/helpers/isURLSameOrigin.js","../../node_modules/axios/lib/helpers/cookies.js","../../node_modules/axios/lib/adapters/xhr.js","../../../../.nvm/versions/node/v14.16.0/lib/node_modules/parcel-bundler/node_modules/process/browser.js","../../node_modules/axios/lib/defaults.js","../../node_modules/axios/lib/core/dispatchRequest.js","../../node_modules/axios/lib/core/mergeConfig.js","../../node_modules/axios/lib/core/Axios.js","../../node_modules/axios/lib/cancel/Cancel.js","../../node_modules/axios/lib/cancel/CancelToken.js","../../node_modules/axios/lib/helpers/spread.js","../../node_modules/axios/lib/axios.js","../../node_modules/axios/index.js","models.js","controllers.js","app.js"],"names":["global","factory","exports","module","define","amd","self","Diff","prototype","diff","oldString","newString","options","arguments","length","undefined","callback","done","value","setTimeout","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","newPos","components","oldPos","extractCommon","join","count","execEditLength","diagonalPath","basePath","addPath","removePath","_oldPos","canAdd","canRemove","clonePath","pushComponent","buildValues","useLongestToken","exec","ret","added","removed","last","push","commonCount","equals","left","right","comparator","ignoreCase","toLowerCase","array","i","split","chars","componentPos","componentLen","component","slice","map","oldValue","tmp","lastComponent","pop","path","characterDiff","diffChars","oldStr","newStr","generateOptions","defaults","name","hasOwnProperty","extendedWordChars","reWhitespace","wordDiff","ignoreWhitespace","test","tokens","splice","diffWords","diffWordsWithSpace","lineDiff","retLines","linesAndNewlines","line","newlineIsToken","trim","diffLines","diffTrimmedLines","sentenceDiff","diffSentences","cssDiff","diffCss","_typeof","obj","Symbol","iterator","constructor","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Object","from","o","minLen","n","toString","call","len","arr2","TypeError","objectPrototypeToString","jsonDiff","_this$options","undefinedReplacement","_this$options$stringi","stringifyReplacer","k","v","JSON","stringify","canonicalize","replace","diffJson","oldObj","newObj","stack","replacementStack","replacer","key","canonicalizedObj","toJSON","sortedKeys","_key","sort","arrayDiff","diffArrays","oldArr","newArr","parsePatch","uniDiff","diffstr","delimiters","match","list","parseIndex","index","header","parseFileHeader","hunks","_line","parseHunk","strict","Error","fileHeader","keyPrefix","data","fileName","substr","chunkHeaderIndex","chunkHeaderLine","chunkHeader","hunk","oldStart","oldLines","newStart","newLines","lines","linedelimiters","addCount","removeCount","indexOf","operation","distanceIterator","start","minLine","maxLine","wantForward","backwardExhausted","forwardExhausted","localOffset","applyPatch","source","compareLine","lineNumber","patchContent","errorCount","fuzzFactor","offset","removeEOFNL","addEOFNL","hunkFits","toPos","j","content","diffOffset","_i","_hunk","_toPos","delimiter","previousOperation","_k","applyPatches","currentIndex","processIndex","complete","loadFile","err","updatedContent","patched","structuredPatch","oldFileName","newFileName","oldHeader","newHeader","context","contextLines","entry","oldRangeStart","newRangeStart","curRange","oldLine","newLine","_loop","current","_curRange","prev","apply","_curRange2","_curRange3","contextSize","Math","min","oldEOFNewline","newEOFNewline","noNlBeforeAdds","formatPatch","createTwoFilesPatch","createPatch","arrayEqual","a","b","arrayStartsWith","calcLineCount","_calcOldNewLineCount","calcOldNewLineCount","merge","mine","theirs","base","loadPatch","fileNameChanged","selectField","mineIndex","theirsIndex","mineOffset","theirsOffset","mineCurrent","Infinity","theirsCurrent","hunkBefore","cloneHunk","mergedHunk","mergeLines","param","patch","conflict","check","mineLines","theirOffset","theirLines","their","insertLeading","theirCurrent","mutualChange","_hunk$lines","collectChange","_hunk$lines2","removal","insertTrailing","myChanges","theirChanges","allRemoves","skipRemoveSuperset","_hunk$lines3","_hunk$lines4","_hunk$lines5","swap","collectContext","merged","_hunk$lines6","insert","state","matchChanges","changes","matchIndex","contextChanges","conflicted","change","reduce","removeChanges","delta","changeContent","forEach","myCount","theirCount","convertChangesToDMP","convertChangesToXML","escapeHTML","s","defineProperty","pug_attr","t","e","r","f","pug_escape","pug_classes","pug_classes_array","pug_classes_object","u","c","g","pug_has_own_property","pug_match_html","charCodeAt","substring","pug_rethrow","window","message","readFileSync","max","h","sentencetableTemplate","locals","pug_html","pug_mixins","pug_interp","pug_debug_filename","pug_debug_line","pug_debug_sources","locals_for_with","fieldClasses","fields","sentences","$$obj","pug_index0","$$l","field","pug_index1","pug_index2","sentence","_id","pug_index3","pug_index4","View","baseElement","root","elements","elementGroups","listeners","hideElement","style","display","showElement","defineElementGroup","groupName","elementNameArray","showGroup","elementName","hideGroup","exists","on","event","trigger","eventOnRoot","addEventListener","FormView","onFormData","preventDefault","getFormData","inputs","querySelectorAll","el","id","clearFormData","LogoutView","AlertView","hide","document","querySelector","parentElement","removeChild","show","type","msg","markup","insertAdjacentHTML","Promise","resolve","reject","onerror","DataParserView","get","input_name","parse","LoginFormView","SignupFormView","CreateSentenceFormView","AudioEditorView","element","eval","str","save","record","ee","emit","setupEditor","playlist","container","getEventEmitter","load","src","then","evt","end","track","floor","sampleRate","chan","getChannelData","seconds","buf","AudioBuffer","copyToChannel","CreateTaskView","getValues","selector","nonToggleInputs","CreateTaskRandomView","vivaRefRes","getUpperLower","switches","vivaRefLow","vivaRefHigh","levelRes","levelLow","levelHigh","nonToggleValues","paramsObject","params","URLSearchParams","searchParams","decodeURIComponent","taskDetails","checked","getElementsByTagName","showHide","srcElement","checkOne","checkTwo","searchParam","lowerValue","higherValue","res","CreateTaskChooseSentenceView","tableParent","saveButton","getFilterElements","updateFilters","bind","target","tagName","sentenceId","dataset","sentence_id","triggerType","filterState","filter","updateDisplay","toSave","grammar","vivaRef","tense","level","innerHTML","TrainingView","prompt","input","answer_feedback","answer_feedback_inner","correct_answer","correct_answer_inner","right_count","total_count","submit_button","next_button","audio","clearAnswerText","handleStudentAnswer","focus","play","updateCounts","total","innerText","student_answer","normalize","isCorrect","answer","diffs","setAsHighlightedSpan","classNameCallback","baseEl","spans","elClass","span","finish","audioUrl","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","nextTick","args","Item","title","env","argv","version","versions","noop","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","ModelApiError","Model","sendApiRequest","url","method","status","response","getLocal","single","AuthModel","login","email","password","logout","signup","passwordConfirm","classCode","CreateTaskModel","CreateSentenceModel","create","translation","StudentResultsModel","send","correctCount","wrongCount","studentSentences","payload","finishedSentences","SentenceModel","subclassAs","GappedSentenceModel","TranslationSentenceModel","fetchAll","sentenceData","words","gapIndex","random","gapWord","gappedPrompt","Controller","viewBaseElement","viewClass","getViewClass","view","LoginController","location","assign","LogoutController","SignupController","CreateSentenceController","AudioEditorController","CreateTaskRandomController","onCreateTaskRandomValues","sentencesRes","teacher","createTask","TrainController","exerciseType","sent","initialCount","rightCount","doAnswer","doNextSentence","desiredReaskLength","sentenceObject","shift","insertionIndex","sendResultsToServer","CreateTaskChooseSentenceController","filterData","sents","dbObj","saveIds","sentencesToSave","includes","find","updateSentences","catch","domElement","controllerClass","controllers"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7nBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5pBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3aA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1oBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACziCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AClHA;;AAEA;;AAEA;;;;;;;;;;AAEA,MAAMoB,IAAN,CAAW;AACTzQ,EAAAA,WAAW,CAAC0Q,WAAD,EAAc;AACvB,SAAKC,IAAL,GAAYD,WAAZ;AACA,SAAKE,QAAL,GAAgB,EAAhB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;AAEDC,EAAAA,WAAW,CAAC1S,IAAD,EAAO;AAChB,SAAKuS,QAAL,CAAcvS,IAAd,EAAoB2S,KAApB,CAA0BC,OAA1B,GAAoC,MAApC;AACD;;AAEDC,EAAAA,WAAW,CAAC7S,IAAD,EAAO;AAChB,SAAKuS,QAAL,CAAcvS,IAAd,EAAoB2S,KAApB,CAA0BC,OAA1B,GAAoC,EAApC;AACD;;AAEDE,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,gBAAZ,EAA8B;AAC9C,SAAKR,aAAL,CAAm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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"bundle.js","sourceRoot":"","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.Diff = {}));\n}(this, (function (exports) { 'use strict';\n\n  function Diff() {}\n  Diff.prototype = {\n    diff: function diff(oldString, newString) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = options.callback;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      this.options = options;\n      var self = this;\n\n      function done(value) {\n        if (callback) {\n          setTimeout(function () {\n            callback(undefined, value);\n          }, 0);\n          return true;\n        } else {\n          return value;\n        }\n      } // Allow subclasses to massage the input prior to running\n\n\n      oldString = this.castInput(oldString);\n      newString = this.castInput(newString);\n      oldString = this.removeEmpty(this.tokenize(oldString));\n      newString = this.removeEmpty(this.tokenize(newString));\n      var newLen = newString.length,\n          oldLen = oldString.length;\n      var editLength = 1;\n      var maxEditLength = newLen + oldLen;\n      var bestPath = [{\n        newPos: -1,\n        components: []\n      }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n      var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n      if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n        // Identity per the equality and tokenizer\n        return done([{\n          value: this.join(newString),\n          count: newString.length\n        }]);\n      } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n      function execEditLength() {\n        for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n          var basePath = void 0;\n\n          var addPath = bestPath[diagonalPath - 1],\n              removePath = bestPath[diagonalPath + 1],\n              _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n          if (addPath) {\n            // No one else is going to attempt to use this value, clear it\n            bestPath[diagonalPath - 1] = undefined;\n          }\n\n          var canAdd = addPath && addPath.newPos + 1 < newLen,\n              canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\n          if (!canAdd && !canRemove) {\n            // If this path is a terminal then prune\n            bestPath[diagonalPath] = undefined;\n            continue;\n          } // Select the diagonal that we want to branch from. We select the prior\n          // path whose position in the new string is the farthest from the origin\n          // and does not pass the bounds of the diff graph\n\n\n          if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n            basePath = clonePath(removePath);\n            self.pushComponent(basePath.components, undefined, true);\n          } else {\n            basePath = addPath; // No need to clone, we've pulled it from the list\n\n            basePath.newPos++;\n            self.pushComponent(basePath.components, true, undefined);\n          }\n\n          _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath); // If we have hit the end of both strings, then we are done\n\n          if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n            return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n          } else {\n            // Otherwise track this path as a potential candidate and continue.\n            bestPath[diagonalPath] = basePath;\n          }\n        }\n\n        editLength++;\n      } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n      // sync and async mode which is never fun. Loops over execEditLength until a value\n      // is produced.\n\n\n      if (callback) {\n        (function exec() {\n          setTimeout(function () {\n            // This should not happen, but we want to be safe.\n\n            /* istanbul ignore next */\n            if (editLength > maxEditLength) {\n              return callback();\n            }\n\n            if (!execEditLength()) {\n              exec();\n            }\n          }, 0);\n        })();\n      } else {\n        while (editLength <= maxEditLength) {\n          var ret = execEditLength();\n\n          if (ret) {\n            return ret;\n          }\n        }\n      }\n    },\n    pushComponent: function pushComponent(components, added, removed) {\n      var last = components[components.length - 1];\n\n      if (last && last.added === added && last.removed === removed) {\n        // We need to clone here as the component clone operation is just\n        // as shallow array clone\n        components[components.length - 1] = {\n          count: last.count + 1,\n          added: added,\n          removed: removed\n        };\n      } else {\n        components.push({\n          count: 1,\n          added: added,\n          removed: removed\n        });\n      }\n    },\n    extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n      var newLen = newString.length,\n          oldLen = oldString.length,\n          newPos = basePath.newPos,\n          oldPos = newPos - diagonalPath,\n          commonCount = 0;\n\n      while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n        newPos++;\n        oldPos++;\n        commonCount++;\n      }\n\n      if (commonCount) {\n        basePath.components.push({\n          count: commonCount\n        });\n      }\n\n      basePath.newPos = newPos;\n      return oldPos;\n    },\n    equals: function equals(left, right) {\n      if (this.options.comparator) {\n        return this.options.comparator(left, right);\n      } else {\n        return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n      }\n    },\n    removeEmpty: function removeEmpty(array) {\n      var ret = [];\n\n      for (var i = 0; i < array.length; i++) {\n        if (array[i]) {\n          ret.push(array[i]);\n        }\n      }\n\n      return ret;\n    },\n    castInput: function castInput(value) {\n      return value;\n    },\n    tokenize: function tokenize(value) {\n      return value.split('');\n    },\n    join: function join(chars) {\n      return chars.join('');\n    }\n  };\n\n  function buildValues(diff, components, newString, oldString, useLongestToken) {\n    var componentPos = 0,\n        componentLen = components.length,\n        newPos = 0,\n        oldPos = 0;\n\n    for (; componentPos < componentLen; componentPos++) {\n      var component = components[componentPos];\n\n      if (!component.removed) {\n        if (!component.added && useLongestToken) {\n          var value = newString.slice(newPos, newPos + component.count);\n          value = value.map(function (value, i) {\n            var oldValue = oldString[oldPos + i];\n            return oldValue.length > value.length ? oldValue : value;\n          });\n          component.value = diff.join(value);\n        } else {\n          component.value = diff.join(newString.slice(newPos, newPos + component.count));\n        }\n\n        newPos += component.count; // Common case\n\n        if (!component.added) {\n          oldPos += component.count;\n        }\n      } else {\n        component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n        oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n        // The diffing algorithm is tied to add then remove output and this is the simplest\n        // route to get the desired output with minimal overhead.\n\n        if (componentPos && components[componentPos - 1].added) {\n          var tmp = components[componentPos - 1];\n          components[componentPos - 1] = components[componentPos];\n          components[componentPos] = tmp;\n        }\n      }\n    } // Special case handle for when one terminal is ignored (i.e. whitespace).\n    // For this case we merge the terminal into the prior string and drop the change.\n    // This is only available for string mode.\n\n\n    var lastComponent = components[componentLen - 1];\n\n    if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n      components[componentLen - 2].value += lastComponent.value;\n      components.pop();\n    }\n\n    return components;\n  }\n\n  function clonePath(path) {\n    return {\n      newPos: path.newPos,\n      components: path.components.slice(0)\n    };\n  }\n\n  var characterDiff = new Diff();\n  function diffChars(oldStr, newStr, options) {\n    return characterDiff.diff(oldStr, newStr, options);\n  }\n\n  function generateOptions(options, defaults) {\n    if (typeof options === 'function') {\n      defaults.callback = options;\n    } else if (options) {\n      for (var name in options) {\n        /* istanbul ignore else */\n        if (options.hasOwnProperty(name)) {\n          defaults[name] = options[name];\n        }\n      }\n    }\n\n    return defaults;\n  }\n\n  //\n  // Ranges and exceptions:\n  // Latin-1 Supplement, 008000FF\n  //  - U+00D7   Multiplication sign\n  //  - U+00F7   Division sign\n  // Latin Extended-A, 0100017F\n  // Latin Extended-B, 0180024F\n  // IPA Extensions, 025002AF\n  // Spacing Modifier Letters, 02B002FF\n  //  - U+02C7   &#711;  Caron\n  //  - U+02D8   &#728;  Breve\n  //  - U+02D9   &#729;  Dot Above\n  //  - U+02DA   &#730;  Ring Above\n  //  - U+02DB   &#731;  Ogonek\n  //  - U+02DC   &#732;  Small Tilde\n  //  - U+02DD   &#733;  Double Acute Accent\n  // Latin Extended Additional, 1E001EFF\n\n  var extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\n  var reWhitespace = /\\S/;\n  var wordDiff = new Diff();\n\n  wordDiff.equals = function (left, right) {\n    if (this.options.ignoreCase) {\n      left = left.toLowerCase();\n      right = right.toLowerCase();\n    }\n\n    return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n  };\n\n  wordDiff.tokenize = function (value) {\n    // All whitespace symbols except newline group into one token, each newline - in separate token\n    var tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n    for (var i = 0; i < tokens.length - 1; i++) {\n      // If we have an empty string in the next field and we have only word chars before and after, merge\n      if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n        tokens[i] += tokens[i + 2];\n        tokens.splice(i + 1, 2);\n        i--;\n      }\n    }\n\n    return tokens;\n  };\n\n  function diffWords(oldStr, newStr, options) {\n    options = generateOptions(options, {\n      ignoreWhitespace: true\n    });\n    return wordDiff.diff(oldStr, newStr, options);\n  }\n  function diffWordsWithSpace(oldStr, newStr, options) {\n    return wordDiff.diff(oldStr, newStr, options);\n  }\n\n  var lineDiff = new Diff();\n\n  lineDiff.tokenize = function (value) {\n    var retLines = [],\n        linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n    if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n      linesAndNewlines.pop();\n    } // Merge the content and line separators into single tokens\n\n\n    for (var i = 0; i < linesAndNewlines.length; i++) {\n      var line = linesAndNewlines[i];\n\n      if (i % 2 && !this.options.newlineIsToken) {\n        retLines[retLines.length - 1] += line;\n      } else {\n        if (this.options.ignoreWhitespace) {\n          line = line.trim();\n        }\n\n        retLines.push(line);\n      }\n    }\n\n    return retLines;\n  };\n\n  function diffLines(oldStr, newStr, callback) {\n    return lineDiff.diff(oldStr, newStr, callback);\n  }\n  function diffTrimmedLines(oldStr, newStr, callback) {\n    var options = generateOptions(callback, {\n      ignoreWhitespace: true\n    });\n    return lineDiff.diff(oldStr, newStr, options);\n  }\n\n  var sentenceDiff = new Diff();\n\n  sentenceDiff.tokenize = function (value) {\n    return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n  };\n\n  function diffSentences(oldStr, newStr, callback) {\n    return sentenceDiff.diff(oldStr, newStr, callback);\n  }\n\n  var cssDiff = new Diff();\n\n  cssDiff.tokenize = function (value) {\n    return value.split(/([{}:;,]|\\s+)/);\n  };\n\n  function diffCss(oldStr, newStr, callback) {\n    return cssDiff.diff(oldStr, newStr, callback);\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var objectPrototypeToString = Object.prototype.toString;\n  var jsonDiff = new Diff(); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n  // dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\n  jsonDiff.useLongestToken = true;\n  jsonDiff.tokenize = lineDiff.tokenize;\n\n  jsonDiff.castInput = function (value) {\n    var _this$options = this.options,\n        undefinedReplacement = _this$options.undefinedReplacement,\n        _this$options$stringi = _this$options.stringifyReplacer,\n        stringifyReplacer = _this$options$stringi === void 0 ? function (k, v) {\n      return typeof v === 'undefined' ? undefinedReplacement : v;\n    } : _this$options$stringi;\n    return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n  };\n\n  jsonDiff.equals = function (left, right) {\n    return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n  };\n\n  function diffJson(oldObj, newObj, options) {\n    return jsonDiff.diff(oldObj, newObj, options);\n  } // This function handles the presence of circular references by bailing out when encountering an\n  // object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\n  function canonicalize(obj, stack, replacementStack, replacer, key) {\n    stack = stack || [];\n    replacementStack = replacementStack || [];\n\n    if (replacer) {\n      obj = replacer(key, obj);\n    }\n\n    var i;\n\n    for (i = 0; i < stack.length; i += 1) {\n      if (stack[i] === obj) {\n        return replacementStack[i];\n      }\n    }\n\n    var canonicalizedObj;\n\n    if ('[object Array]' === objectPrototypeToString.call(obj)) {\n      stack.push(obj);\n      canonicalizedObj = new Array(obj.length);\n      replacementStack.push(canonicalizedObj);\n\n      for (i = 0; i < obj.length; i += 1) {\n        canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n      }\n\n      stack.pop();\n      replacementStack.pop();\n      return canonicalizedObj;\n    }\n\n    if (obj && obj.toJSON) {\n      obj = obj.toJSON();\n    }\n\n    if (_typeof(obj) === 'object' && obj !== null) {\n      stack.push(obj);\n      canonicalizedObj = {};\n      replacementStack.push(canonicalizedObj);\n\n      var sortedKeys = [],\n          _key;\n\n      for (_key in obj) {\n        /* istanbul ignore else */\n        if (obj.hasOwnProperty(_key)) {\n          sortedKeys.push(_key);\n        }\n      }\n\n      sortedKeys.sort();\n\n      for (i = 0; i < sortedKeys.length; i += 1) {\n        _key = sortedKeys[i];\n        canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n      }\n\n      stack.pop();\n      replacementStack.pop();\n    } else {\n      canonicalizedObj = obj;\n    }\n\n    return canonicalizedObj;\n  }\n\n  var arrayDiff = new Diff();\n\n  arrayDiff.tokenize = function (value) {\n    return value.slice();\n  };\n\n  arrayDiff.join = arrayDiff.removeEmpty = function (value) {\n    return value;\n  };\n\n  function diffArrays(oldArr, newArr, callback) {\n    return arrayDiff.diff(oldArr, newArr, callback);\n  }\n\n  function parsePatch(uniDiff) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n        delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n        list = [],\n        i = 0;\n\n    function parseIndex() {\n      var index = {};\n      list.push(index); // Parse diff metadata\n\n      while (i < diffstr.length) {\n        var line = diffstr[i]; // File header found, end parsing diff metadata\n\n        if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n          break;\n        } // Diff index\n\n\n        var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\n        if (header) {\n          index.index = header[1];\n        }\n\n        i++;\n      } // Parse file headers if they are defined. Unified diff requires them, but\n      // there's no technical issues to have an isolated hunk without file header\n\n\n      parseFileHeader(index);\n      parseFileHeader(index); // Parse hunks\n\n      index.hunks = [];\n\n      while (i < diffstr.length) {\n        var _line = diffstr[i];\n\n        if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n          break;\n        } else if (/^@@/.test(_line)) {\n          index.hunks.push(parseHunk());\n        } else if (_line && options.strict) {\n          // Ignore unexpected content unless in strict mode\n          throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n        } else {\n          i++;\n        }\n      }\n    } // Parses the --- and +++ headers, if none are found, no lines\n    // are consumed.\n\n\n    function parseFileHeader(index) {\n      var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\n      if (fileHeader) {\n        var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n        var data = fileHeader[2].split('\\t', 2);\n        var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\n        if (/^\".*\"$/.test(fileName)) {\n          fileName = fileName.substr(1, fileName.length - 2);\n        }\n\n        index[keyPrefix + 'FileName'] = fileName;\n        index[keyPrefix + 'Header'] = (data[1] || '').trim();\n        i++;\n      }\n    } // Parses a hunk\n    // This assumes that we are at the start of a hunk.\n\n\n    function parseHunk() {\n      var chunkHeaderIndex = i,\n          chunkHeaderLine = diffstr[i++],\n          chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n      var hunk = {\n        oldStart: +chunkHeader[1],\n        oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n        newStart: +chunkHeader[3],\n        newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n        lines: [],\n        linedelimiters: []\n      }; // Unified Diff Format quirk: If the chunk size is 0,\n      // the first number is one lower than one would expect.\n      // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n      if (hunk.oldLines === 0) {\n        hunk.oldStart += 1;\n      }\n\n      if (hunk.newLines === 0) {\n        hunk.newStart += 1;\n      }\n\n      var addCount = 0,\n          removeCount = 0;\n\n      for (; i < diffstr.length; i++) {\n        // Lines starting with '---' could be mistaken for the \"remove line\" operation\n        // But they could be the header for the next file. Therefore prune such cases out.\n        if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n          break;\n        }\n\n        var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n        if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n          hunk.lines.push(diffstr[i]);\n          hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n          if (operation === '+') {\n            addCount++;\n          } else if (operation === '-') {\n            removeCount++;\n          } else if (operation === ' ') {\n            addCount++;\n            removeCount++;\n          }\n        } else {\n          break;\n        }\n      } // Handle the empty block count case\n\n\n      if (!addCount && hunk.newLines === 1) {\n        hunk.newLines = 0;\n      }\n\n      if (!removeCount && hunk.oldLines === 1) {\n        hunk.oldLines = 0;\n      } // Perform optional sanity checking\n\n\n      if (options.strict) {\n        if (addCount !== hunk.newLines) {\n          throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n        }\n\n        if (removeCount !== hunk.oldLines) {\n          throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n        }\n      }\n\n      return hunk;\n    }\n\n    while (i < diffstr.length) {\n      parseIndex();\n    }\n\n    return list;\n  }\n\n  // Iterator that traverses in the range of [min, max], stepping\n  // by distance from a given start position. I.e. for [0, 4], with\n  // start of 2, this will iterate 2, 3, 1, 4, 0.\n  function distanceIterator (start, minLine, maxLine) {\n    var wantForward = true,\n        backwardExhausted = false,\n        forwardExhausted = false,\n        localOffset = 1;\n    return function iterator() {\n      if (wantForward && !forwardExhausted) {\n        if (backwardExhausted) {\n          localOffset++;\n        } else {\n          wantForward = false;\n        } // Check if trying to fit beyond text length, and if not, check it fits\n        // after offset location (or desired location on first iteration)\n\n\n        if (start + localOffset <= maxLine) {\n          return localOffset;\n        }\n\n        forwardExhausted = true;\n      }\n\n      if (!backwardExhausted) {\n        if (!forwardExhausted) {\n          wantForward = true;\n        } // Check if trying to fit before text beginning, and if not, check it fits\n        // before offset location\n\n\n        if (minLine <= start - localOffset) {\n          return -localOffset++;\n        }\n\n        backwardExhausted = true;\n        return iterator();\n      } // We tried to fit hunk before text beginning and beyond text length, then\n      // hunk can't fit on the text. Return undefined\n\n    };\n  }\n\n  function applyPatch(source, uniDiff) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (typeof uniDiff === 'string') {\n      uniDiff = parsePatch(uniDiff);\n    }\n\n    if (Array.isArray(uniDiff)) {\n      if (uniDiff.length > 1) {\n        throw new Error('applyPatch only works with a single input.');\n      }\n\n      uniDiff = uniDiff[0];\n    } // Apply the diff to the input\n\n\n    var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n        delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n        hunks = uniDiff.hunks,\n        compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {\n      return line === patchContent;\n    },\n        errorCount = 0,\n        fuzzFactor = options.fuzzFactor || 0,\n        minLine = 0,\n        offset = 0,\n        removeEOFNL,\n        addEOFNL;\n    /**\n     * Checks if the hunk exactly fits on the provided location\n     */\n\n\n    function hunkFits(hunk, toPos) {\n      for (var j = 0; j < hunk.lines.length; j++) {\n        var line = hunk.lines[j],\n            operation = line.length > 0 ? line[0] : ' ',\n            content = line.length > 0 ? line.substr(1) : line;\n\n        if (operation === ' ' || operation === '-') {\n          // Context sanity check\n          if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n            errorCount++;\n\n            if (errorCount > fuzzFactor) {\n              return false;\n            }\n          }\n\n          toPos++;\n        }\n      }\n\n      return true;\n    } // Search best fit offsets for each hunk based on the previous ones\n\n\n    for (var i = 0; i < hunks.length; i++) {\n      var hunk = hunks[i],\n          maxLine = lines.length - hunk.oldLines,\n          localOffset = 0,\n          toPos = offset + hunk.oldStart - 1;\n      var iterator = distanceIterator(toPos, minLine, maxLine);\n\n      for (; localOffset !== undefined; localOffset = iterator()) {\n        if (hunkFits(hunk, toPos + localOffset)) {\n          hunk.offset = offset += localOffset;\n          break;\n        }\n      }\n\n      if (localOffset === undefined) {\n        return false;\n      } // Set lower text limit to end of the current hunk, so next ones don't try\n      // to fit over already patched text\n\n\n      minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n    } // Apply patch hunks\n\n\n    var diffOffset = 0;\n\n    for (var _i = 0; _i < hunks.length; _i++) {\n      var _hunk = hunks[_i],\n          _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\n      diffOffset += _hunk.newLines - _hunk.oldLines;\n\n      for (var j = 0; j < _hunk.lines.length; j++) {\n        var line = _hunk.lines[j],\n            operation = line.length > 0 ? line[0] : ' ',\n            content = line.length > 0 ? line.substr(1) : line,\n            delimiter = _hunk.linedelimiters[j];\n\n        if (operation === ' ') {\n          _toPos++;\n        } else if (operation === '-') {\n          lines.splice(_toPos, 1);\n          delimiters.splice(_toPos, 1);\n          /* istanbul ignore else */\n        } else if (operation === '+') {\n          lines.splice(_toPos, 0, content);\n          delimiters.splice(_toPos, 0, delimiter);\n          _toPos++;\n        } else if (operation === '\\\\') {\n          var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\n          if (previousOperation === '+') {\n            removeEOFNL = true;\n          } else if (previousOperation === '-') {\n            addEOFNL = true;\n          }\n        }\n      }\n    } // Handle EOFNL insertion/removal\n\n\n    if (removeEOFNL) {\n      while (!lines[lines.length - 1]) {\n        lines.pop();\n        delimiters.pop();\n      }\n    } else if (addEOFNL) {\n      lines.push('');\n      delimiters.push('\\n');\n    }\n\n    for (var _k = 0; _k < lines.length - 1; _k++) {\n      lines[_k] = lines[_k] + delimiters[_k];\n    }\n\n    return lines.join('');\n  } // Wrapper that supports multiple file patches via callbacks.\n\n  function applyPatches(uniDiff, options) {\n    if (typeof uniDiff === 'string') {\n      uniDiff = parsePatch(uniDiff);\n    }\n\n    var currentIndex = 0;\n\n    function processIndex() {\n      var index = uniDiff[currentIndex++];\n\n      if (!index) {\n        return options.complete();\n      }\n\n      options.loadFile(index, function (err, data) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        var updatedContent = applyPatch(data, index, options);\n        options.patched(index, updatedContent, function (err) {\n          if (err) {\n            return options.complete(err);\n          }\n\n          processIndex();\n        });\n      });\n    }\n\n    processIndex();\n  }\n\n  function structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n    if (!options) {\n      options = {};\n    }\n\n    if (typeof options.context === 'undefined') {\n      options.context = 4;\n    }\n\n    var diff = diffLines(oldStr, newStr, options);\n    diff.push({\n      value: '',\n      lines: []\n    }); // Append an empty value to make cleanup easier\n\n    function contextLines(lines) {\n      return lines.map(function (entry) {\n        return ' ' + entry;\n      });\n    }\n\n    var hunks = [];\n    var oldRangeStart = 0,\n        newRangeStart = 0,\n        curRange = [],\n        oldLine = 1,\n        newLine = 1;\n\n    var _loop = function _loop(i) {\n      var current = diff[i],\n          lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n      current.lines = lines;\n\n      if (current.added || current.removed) {\n        var _curRange;\n\n        // If we have previous context, start with that\n        if (!oldRangeStart) {\n          var prev = diff[i - 1];\n          oldRangeStart = oldLine;\n          newRangeStart = newLine;\n\n          if (prev) {\n            curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n            oldRangeStart -= curRange.length;\n            newRangeStart -= curRange.length;\n          }\n        } // Output our changes\n\n\n        (_curRange = curRange).push.apply(_curRange, _toConsumableArray(lines.map(function (entry) {\n          return (current.added ? '+' : '-') + entry;\n        }))); // Track the updated file position\n\n\n        if (current.added) {\n          newLine += lines.length;\n        } else {\n          oldLine += lines.length;\n        }\n      } else {\n        // Identical context lines. Track line changes\n        if (oldRangeStart) {\n          // Close out any changes that have been output (or join overlapping)\n          if (lines.length <= options.context * 2 && i < diff.length - 2) {\n            var _curRange2;\n\n            // Overlapping\n            (_curRange2 = curRange).push.apply(_curRange2, _toConsumableArray(contextLines(lines)));\n          } else {\n            var _curRange3;\n\n            // end the range and output\n            var contextSize = Math.min(lines.length, options.context);\n\n            (_curRange3 = curRange).push.apply(_curRange3, _toConsumableArray(contextLines(lines.slice(0, contextSize))));\n\n            var hunk = {\n              oldStart: oldRangeStart,\n              oldLines: oldLine - oldRangeStart + contextSize,\n              newStart: newRangeStart,\n              newLines: newLine - newRangeStart + contextSize,\n              lines: curRange\n            };\n\n            if (i >= diff.length - 2 && lines.length <= options.context) {\n              // EOF is inside this hunk\n              var oldEOFNewline = /\\n$/.test(oldStr);\n              var newEOFNewline = /\\n$/.test(newStr);\n              var noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n\n              if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n                // special case: old has no eol and no trailing context; no-nl can end up before adds\n                // however, if the old file is empty, do not output the no-nl line\n                curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n              }\n\n              if (!oldEOFNewline && !noNlBeforeAdds || !newEOFNewline) {\n                curRange.push('\\\\ No newline at end of file');\n              }\n            }\n\n            hunks.push(hunk);\n            oldRangeStart = 0;\n            newRangeStart = 0;\n            curRange = [];\n          }\n        }\n\n        oldLine += lines.length;\n        newLine += lines.length;\n      }\n    };\n\n    for (var i = 0; i < diff.length; i++) {\n      _loop(i);\n    }\n\n    return {\n      oldFileName: oldFileName,\n      newFileName: newFileName,\n      oldHeader: oldHeader,\n      newHeader: newHeader,\n      hunks: hunks\n    };\n  }\n  function formatPatch(diff) {\n    var ret = [];\n\n    if (diff.oldFileName == diff.newFileName) {\n      ret.push('Index: ' + diff.oldFileName);\n    }\n\n    ret.push('===================================================================');\n    ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n    ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n    for (var i = 0; i < diff.hunks.length; i++) {\n      var hunk = diff.hunks[i]; // Unified Diff Format quirk: If the chunk size is 0,\n      // the first number is one lower than one would expect.\n      // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n      if (hunk.oldLines === 0) {\n        hunk.oldStart -= 1;\n      }\n\n      if (hunk.newLines === 0) {\n        hunk.newStart -= 1;\n      }\n\n      ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n      ret.push.apply(ret, hunk.lines);\n    }\n\n    return ret.join('\\n') + '\\n';\n  }\n  function createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n    return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n  }\n  function createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n    return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n  }\n\n  function arrayEqual(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    return arrayStartsWith(a, b);\n  }\n  function arrayStartsWith(array, start) {\n    if (start.length > array.length) {\n      return false;\n    }\n\n    for (var i = 0; i < start.length; i++) {\n      if (start[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function calcLineCount(hunk) {\n    var _calcOldNewLineCount = calcOldNewLineCount(hunk.lines),\n        oldLines = _calcOldNewLineCount.oldLines,\n        newLines = _calcOldNewLineCount.newLines;\n\n    if (oldLines !== undefined) {\n      hunk.oldLines = oldLines;\n    } else {\n      delete hunk.oldLines;\n    }\n\n    if (newLines !== undefined) {\n      hunk.newLines = newLines;\n    } else {\n      delete hunk.newLines;\n    }\n  }\n  function merge(mine, theirs, base) {\n    mine = loadPatch(mine, base);\n    theirs = loadPatch(theirs, base);\n    var ret = {}; // For index we just let it pass through as it doesn't have any necessary meaning.\n    // Leaving sanity checks on this to the API consumer that may know more about the\n    // meaning in their own context.\n\n    if (mine.index || theirs.index) {\n      ret.index = mine.index || theirs.index;\n    }\n\n    if (mine.newFileName || theirs.newFileName) {\n      if (!fileNameChanged(mine)) {\n        // No header or no change in ours, use theirs (and ours if theirs does not exist)\n        ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n        ret.newFileName = theirs.newFileName || mine.newFileName;\n        ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n        ret.newHeader = theirs.newHeader || mine.newHeader;\n      } else if (!fileNameChanged(theirs)) {\n        // No header or no change in theirs, use ours\n        ret.oldFileName = mine.oldFileName;\n        ret.newFileName = mine.newFileName;\n        ret.oldHeader = mine.oldHeader;\n        ret.newHeader = mine.newHeader;\n      } else {\n        // Both changed... figure it out\n        ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n        ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n        ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n        ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n      }\n    }\n\n    ret.hunks = [];\n    var mineIndex = 0,\n        theirsIndex = 0,\n        mineOffset = 0,\n        theirsOffset = 0;\n\n    while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n      var mineCurrent = mine.hunks[mineIndex] || {\n        oldStart: Infinity\n      },\n          theirsCurrent = theirs.hunks[theirsIndex] || {\n        oldStart: Infinity\n      };\n\n      if (hunkBefore(mineCurrent, theirsCurrent)) {\n        // This patch does not overlap with any of the others, yay.\n        ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n        mineIndex++;\n        theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n      } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n        // This patch does not overlap with any of the others, yay.\n        ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n        theirsIndex++;\n        mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n      } else {\n        // Overlap, merge as best we can\n        var mergedHunk = {\n          oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n          oldLines: 0,\n          newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n          newLines: 0,\n          lines: []\n        };\n        mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n        theirsIndex++;\n        mineIndex++;\n        ret.hunks.push(mergedHunk);\n      }\n    }\n\n    return ret;\n  }\n\n  function loadPatch(param, base) {\n    if (typeof param === 'string') {\n      if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n        return parsePatch(param)[0];\n      }\n\n      if (!base) {\n        throw new Error('Must provide a base reference or pass in a patch');\n      }\n\n      return structuredPatch(undefined, undefined, base, param);\n    }\n\n    return param;\n  }\n\n  function fileNameChanged(patch) {\n    return patch.newFileName && patch.newFileName !== patch.oldFileName;\n  }\n\n  function selectField(index, mine, theirs) {\n    if (mine === theirs) {\n      return mine;\n    } else {\n      index.conflict = true;\n      return {\n        mine: mine,\n        theirs: theirs\n      };\n    }\n  }\n\n  function hunkBefore(test, check) {\n    return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n  }\n\n  function cloneHunk(hunk, offset) {\n    return {\n      oldStart: hunk.oldStart,\n      oldLines: hunk.oldLines,\n      newStart: hunk.newStart + offset,\n      newLines: hunk.newLines,\n      lines: hunk.lines\n    };\n  }\n\n  function mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n    // This will generally result in a conflicted hunk, but there are cases where the context\n    // is the only overlap where we can successfully merge the content here.\n    var mine = {\n      offset: mineOffset,\n      lines: mineLines,\n      index: 0\n    },\n        their = {\n      offset: theirOffset,\n      lines: theirLines,\n      index: 0\n    }; // Handle any leading content\n\n    insertLeading(hunk, mine, their);\n    insertLeading(hunk, their, mine); // Now in the overlap content. Scan through and select the best changes from each.\n\n    while (mine.index < mine.lines.length && their.index < their.lines.length) {\n      var mineCurrent = mine.lines[mine.index],\n          theirCurrent = their.lines[their.index];\n\n      if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n        // Both modified ...\n        mutualChange(hunk, mine, their);\n      } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n        var _hunk$lines;\n\n        // Mine inserted\n        (_hunk$lines = hunk.lines).push.apply(_hunk$lines, _toConsumableArray(collectChange(mine)));\n      } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n        var _hunk$lines2;\n\n        // Theirs inserted\n        (_hunk$lines2 = hunk.lines).push.apply(_hunk$lines2, _toConsumableArray(collectChange(their)));\n      } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n        // Mine removed or edited\n        removal(hunk, mine, their);\n      } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n        // Their removed or edited\n        removal(hunk, their, mine, true);\n      } else if (mineCurrent === theirCurrent) {\n        // Context identity\n        hunk.lines.push(mineCurrent);\n        mine.index++;\n        their.index++;\n      } else {\n        // Context mismatch\n        conflict(hunk, collectChange(mine), collectChange(their));\n      }\n    } // Now push anything that may be remaining\n\n\n    insertTrailing(hunk, mine);\n    insertTrailing(hunk, their);\n    calcLineCount(hunk);\n  }\n\n  function mutualChange(hunk, mine, their) {\n    var myChanges = collectChange(mine),\n        theirChanges = collectChange(their);\n\n    if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n      // Special case for remove changes that are supersets of one another\n      if (arrayStartsWith(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n        var _hunk$lines3;\n\n        (_hunk$lines3 = hunk.lines).push.apply(_hunk$lines3, _toConsumableArray(myChanges));\n\n        return;\n      } else if (arrayStartsWith(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n        var _hunk$lines4;\n\n        (_hunk$lines4 = hunk.lines).push.apply(_hunk$lines4, _toConsumableArray(theirChanges));\n\n        return;\n      }\n    } else if (arrayEqual(myChanges, theirChanges)) {\n      var _hunk$lines5;\n\n      (_hunk$lines5 = hunk.lines).push.apply(_hunk$lines5, _toConsumableArray(myChanges));\n\n      return;\n    }\n\n    conflict(hunk, myChanges, theirChanges);\n  }\n\n  function removal(hunk, mine, their, swap) {\n    var myChanges = collectChange(mine),\n        theirChanges = collectContext(their, myChanges);\n\n    if (theirChanges.merged) {\n      var _hunk$lines6;\n\n      (_hunk$lines6 = hunk.lines).push.apply(_hunk$lines6, _toConsumableArray(theirChanges.merged));\n    } else {\n      conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n    }\n  }\n\n  function conflict(hunk, mine, their) {\n    hunk.conflict = true;\n    hunk.lines.push({\n      conflict: true,\n      mine: mine,\n      theirs: their\n    });\n  }\n\n  function insertLeading(hunk, insert, their) {\n    while (insert.offset < their.offset && insert.index < insert.lines.length) {\n      var line = insert.lines[insert.index++];\n      hunk.lines.push(line);\n      insert.offset++;\n    }\n  }\n\n  function insertTrailing(hunk, insert) {\n    while (insert.index < insert.lines.length) {\n      var line = insert.lines[insert.index++];\n      hunk.lines.push(line);\n    }\n  }\n\n  function collectChange(state) {\n    var ret = [],\n        operation = state.lines[state.index][0];\n\n    while (state.index < state.lines.length) {\n      var line = state.lines[state.index]; // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\n      if (operation === '-' && line[0] === '+') {\n        operation = '+';\n      }\n\n      if (operation === line[0]) {\n        ret.push(line);\n        state.index++;\n      } else {\n        break;\n      }\n    }\n\n    return ret;\n  }\n\n  function collectContext(state, matchChanges) {\n    var changes = [],\n        merged = [],\n        matchIndex = 0,\n        contextChanges = false,\n        conflicted = false;\n\n    while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n      var change = state.lines[state.index],\n          match = matchChanges[matchIndex]; // Once we've hit our add, then we are done\n\n      if (match[0] === '+') {\n        break;\n      }\n\n      contextChanges = contextChanges || change[0] !== ' ';\n      merged.push(match);\n      matchIndex++; // Consume any additions in the other block as a conflict to attempt\n      // to pull in the remaining context after this\n\n      if (change[0] === '+') {\n        conflicted = true;\n\n        while (change[0] === '+') {\n          changes.push(change);\n          change = state.lines[++state.index];\n        }\n      }\n\n      if (match.substr(1) === change.substr(1)) {\n        changes.push(change);\n        state.index++;\n      } else {\n        conflicted = true;\n      }\n    }\n\n    if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n      conflicted = true;\n    }\n\n    if (conflicted) {\n      return changes;\n    }\n\n    while (matchIndex < matchChanges.length) {\n      merged.push(matchChanges[matchIndex++]);\n    }\n\n    return {\n      merged: merged,\n      changes: changes\n    };\n  }\n\n  function allRemoves(changes) {\n    return changes.reduce(function (prev, change) {\n      return prev && change[0] === '-';\n    }, true);\n  }\n\n  function skipRemoveSuperset(state, removeChanges, delta) {\n    for (var i = 0; i < delta; i++) {\n      var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\n      if (state.lines[state.index + i] !== ' ' + changeContent) {\n        return false;\n      }\n    }\n\n    state.index += delta;\n    return true;\n  }\n\n  function calcOldNewLineCount(lines) {\n    var oldLines = 0;\n    var newLines = 0;\n    lines.forEach(function (line) {\n      if (typeof line !== 'string') {\n        var myCount = calcOldNewLineCount(line.mine);\n        var theirCount = calcOldNewLineCount(line.theirs);\n\n        if (oldLines !== undefined) {\n          if (myCount.oldLines === theirCount.oldLines) {\n            oldLines += myCount.oldLines;\n          } else {\n            oldLines = undefined;\n          }\n        }\n\n        if (newLines !== undefined) {\n          if (myCount.newLines === theirCount.newLines) {\n            newLines += myCount.newLines;\n          } else {\n            newLines = undefined;\n          }\n        }\n      } else {\n        if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n          newLines++;\n        }\n\n        if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n          oldLines++;\n        }\n      }\n    });\n    return {\n      oldLines: oldLines,\n      newLines: newLines\n    };\n  }\n\n  // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n  function convertChangesToDMP(changes) {\n    var ret = [],\n        change,\n        operation;\n\n    for (var i = 0; i < changes.length; i++) {\n      change = changes[i];\n\n      if (change.added) {\n        operation = 1;\n      } else if (change.removed) {\n        operation = -1;\n      } else {\n        operation = 0;\n      }\n\n      ret.push([operation, change.value]);\n    }\n\n    return ret;\n  }\n\n  function convertChangesToXML(changes) {\n    var ret = [];\n\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n\n      if (change.added) {\n        ret.push('<ins>');\n      } else if (change.removed) {\n        ret.push('<del>');\n      }\n\n      ret.push(escapeHTML(change.value));\n\n      if (change.added) {\n        ret.push('</ins>');\n      } else if (change.removed) {\n        ret.push('</del>');\n      }\n    }\n\n    return ret.join('');\n  }\n\n  function escapeHTML(s) {\n    var n = s;\n    n = n.replace(/&/g, '&amp;');\n    n = n.replace(/</g, '&lt;');\n    n = n.replace(/>/g, '&gt;');\n    n = n.replace(/\"/g, '&quot;');\n    return n;\n  }\n\n  exports.Diff = Diff;\n  exports.applyPatch = applyPatch;\n  exports.applyPatches = applyPatches;\n  exports.canonicalize = canonicalize;\n  exports.convertChangesToDMP = convertChangesToDMP;\n  exports.convertChangesToXML = convertChangesToXML;\n  exports.createPatch = createPatch;\n  exports.createTwoFilesPatch = createTwoFilesPatch;\n  exports.diffArrays = diffArrays;\n  exports.diffChars = diffChars;\n  exports.diffCss = diffCss;\n  exports.diffJson = diffJson;\n  exports.diffLines = diffLines;\n  exports.diffSentences = diffSentences;\n  exports.diffTrimmedLines = diffTrimmedLines;\n  exports.diffWords = diffWords;\n  exports.diffWordsWithSpace = diffWordsWithSpace;\n  exports.merge = merge;\n  exports.parsePatch = parsePatch;\n  exports.structuredPatch = structuredPatch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","function pug_attr(t,e,n,r){if(!1===e||null==e||!e&&(\"class\"===t||\"style\"===t))return\"\";if(!0===e)return\" \"+(r?t:t+'=\"'+t+'\"');var f=typeof e;return\"object\"!==f&&\"function\"!==f||\"function\"!=typeof e.toJSON||(e=e.toJSON()),\"string\"==typeof e||(e=JSON.stringify(e),n||-1===e.indexOf('\"'))?(n&&(e=pug_escape(e)),\" \"+t+'=\"'+e+'\"'):\" \"+t+\"='\"+e.replace(/'/g,\"&#39;\")+\"'\"}\nfunction pug_classes(s,r){return Array.isArray(s)?pug_classes_array(s,r):s&&\"object\"==typeof s?pug_classes_object(s):s||\"\"}\nfunction pug_classes_array(r,a){for(var s,e=\"\",u=\"\",c=Array.isArray(a),g=0;g<r.length;g++)(s=pug_classes(r[g]))&&(c&&a[g]&&(s=pug_escape(s)),e=e+u+s,u=\" \");return e}\nfunction pug_classes_object(r){var a=\"\",n=\"\";for(var o in r)o&&r[o]&&pug_has_own_property.call(r,o)&&(a=a+n+o,n=\" \");return a}\nfunction pug_escape(e){var a=\"\"+e,t=pug_match_html.exec(a);if(!t)return e;var r,c,n,s=\"\";for(r=t.index,c=0;r<a.length;r++){switch(a.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;case 62:n=\"&gt;\";break;default:continue}c!==r&&(s+=a.substring(c,r)),c=r+1,s+=n}return c!==r?s+a.substring(c,r):s}\nvar pug_has_own_property=Object.prototype.hasOwnProperty;\nvar pug_match_html=/[\"&<>]/;\nfunction pug_rethrow(n,e,r,t){if(!(n instanceof Error))throw n;if(!(\"undefined\"==typeof window&&e||t))throw n.message+=\" on line \"+r,n;try{t=t||global[\"require\"](\"fs\").readFileSync(e,\"utf8\")}catch(e){pug_rethrow(n,null,r)}var i=3,a=t.split(\"\\n\"),o=Math.max(r-i,0),h=Math.min(a.length,r+i),i=a.slice(o,h).map(function(n,e){var t=e+o+1;return(t==r?\"  > \":\"    \")+t+\"| \"+n}).join(\"\\n\");throw n.path=e,n.message=(e||\"Pug\")+\":\"+r+\"\\n\"+i+\"\\n\\n\"+n.message,n}export function sentencetableTemplate(locals) {var pug_html = \"\", pug_mixins = {}, pug_interp;var pug_debug_filename, pug_debug_line;try {var pug_debug_sources = {\"frontend-views\\u002F\\u002Fsentencetable.pug\":\"table.sentence-table\\n    colgroup\\n        col.selected-toggle.narrow\\n        each field in fields\\n            col(class=(fieldClasses[field] || ''))\\n    tbody\\n        tr\\n            th\\n                -\\u002F\\u002F empty\\n            each field in fields\\n                th\\n                    =field\\n        each sentence in sentences\\n            tr\\n                td\\n                    input(type=\\\"checkbox\\\" checked=\\\"\\\" data-sentence_id=sentence.data._id)\\n                each field in fields\\n                    td\\n                        =sentence.data[field]\\n                \\n\"};\n;var locals_for_with = (locals || {});(function (fieldClasses, fields, sentences) {;pug_debug_line = 1;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctable class=\\\"sentence-table\\\"\\u003E\";\n;pug_debug_line = 2;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccolgroup\\u003E\";\n;pug_debug_line = 3;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccol class=\\\"selected-toggle narrow\\\"\\u002F\\u003E\";\n;pug_debug_line = 4;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index0 = 0, $$l = $$obj.length; pug_index0 < $$l; pug_index0++) {\n        var field = $$obj[pug_index0];\n;pug_debug_line = 5;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccol\" + (pug_attr(\"class\", pug_classes([(fieldClasses[field] || '')], [true]), false, false)) + \"\\u002F\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index0 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index0];\n;pug_debug_line = 5;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ccol\" + (pug_attr(\"class\", pug_classes([(fieldClasses[field] || '')], [true]), false, false)) + \"\\u002F\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Fcolgroup\\u003E\";\n;pug_debug_line = 6;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctbody\\u003E\";\n;pug_debug_line = 7;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctr\\u003E\";\n;pug_debug_line = 8;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cth\\u003E\";\n;pug_debug_line = 9;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// empty\npug_html = pug_html + \"\\u003C\\u002Fth\\u003E\";\n;pug_debug_line = 10;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index1 = 0, $$l = $$obj.length; pug_index1 < $$l; pug_index1++) {\n        var field = $$obj[pug_index1];\n;pug_debug_line = 11;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cth\\u003E\";\n;pug_debug_line = 12;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = field) ? \"\" : pug_interp)) + \"\\u003C\\u002Fth\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index1 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index1];\n;pug_debug_line = 11;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cth\\u003E\";\n;pug_debug_line = 12;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = field) ? \"\" : pug_interp)) + \"\\u003C\\u002Fth\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftr\\u003E\";\n;pug_debug_line = 13;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate sentences\n;(function(){\n  var $$obj = sentences;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index2 = 0, $$l = $$obj.length; pug_index2 < $$l; pug_index2++) {\n        var sentence = $$obj[pug_index2];\n;pug_debug_line = 14;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctr\\u003E\";\n;pug_debug_line = 15;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 16;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cinput\" + (\" type=\\\"checkbox\\\" checked=\\\"\\\"\"+pug_attr(\"data-sentence_id\", sentence.data._id, true, false)) + \"\\u002F\\u003E\\u003C\\u002Ftd\\u003E\";\n;pug_debug_line = 17;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index3 = 0, $$l = $$obj.length; pug_index3 < $$l; pug_index3++) {\n        var field = $$obj[pug_index3];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index3 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index3];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftr\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index2 in $$obj) {\n      $$l++;\n      var sentence = $$obj[pug_index2];\n;pug_debug_line = 14;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctr\\u003E\";\n;pug_debug_line = 15;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 16;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Cinput\" + (\" type=\\\"checkbox\\\" checked=\\\"\\\"\"+pug_attr(\"data-sentence_id\", sentence.data._id, true, false)) + \"\\u002F\\u003E\\u003C\\u002Ftd\\u003E\";\n;pug_debug_line = 17;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\n// iterate fields\n;(function(){\n  var $$obj = fields;\n  if ('number' == typeof $$obj.length) {\n      for (var pug_index4 = 0, $$l = $$obj.length; pug_index4 < $$l; pug_index4++) {\n        var field = $$obj[pug_index4];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n      }\n  } else {\n    var $$l = 0;\n    for (var pug_index4 in $$obj) {\n      $$l++;\n      var field = $$obj[pug_index4];\n;pug_debug_line = 18;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + \"\\u003Ctd\\u003E\";\n;pug_debug_line = 19;pug_debug_filename = \"frontend-views\\u002F\\u002Fsentencetable.pug\";\npug_html = pug_html + (pug_escape(null == (pug_interp = sentence.data[field]) ? \"\" : pug_interp)) + \"\\u003C\\u002Ftd\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftr\\u003E\";\n    }\n  }\n}).call(this);\n\npug_html = pug_html + \"\\u003C\\u002Ftbody\\u003E\\u003C\\u002Ftable\\u003E\";}.call(this,\"fieldClasses\" in locals_for_with?locals_for_with.fieldClasses:typeof fieldClasses!==\"undefined\"?fieldClasses:undefined,\"fields\" in locals_for_with?locals_for_with.fields:typeof fields!==\"undefined\"?fields:undefined,\"sentences\" in locals_for_with?locals_for_with.sentences:typeof sentences!==\"undefined\"?sentences:undefined));} catch (err) {pug_rethrow(err, pug_debug_filename, pug_debug_line, pug_debug_sources[pug_debug_filename]);};return pug_html;}","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = assign;\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n    doccy = document;\n} else {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n}\n\nmodule.exports = doccy;\n","'use strict';\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === 'object' && x !== null;\n};\n","module.exports = isHook\n\nfunction isHook(hook) {\n    return hook &&\n      (typeof hook.hook === \"function\" && !hook.hasOwnProperty(\"hook\") ||\n       typeof hook.unhook === \"function\" && !hook.hasOwnProperty(\"unhook\"))\n}\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook.js\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, propName, propValue, previous);\n        } else if (isHook(propValue)) {\n            removeProperty(node, propName, propValue, previous)\n            if (propValue.hook) {\n                propValue.hook(node,\n                    propName,\n                    previous ? previous[propName] : undefined)\n            }\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, propName, propValue, previous) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        } else if (previousValue.unhook) {\n            previousValue.unhook(node, propName, propValue)\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n","module.exports = \"2\"\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n","module.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n","module.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n","var isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n","var document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"../vnode/is-vnode.js\")\nvar isVText = require(\"../vnode/is-vtext.js\")\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar handleThunk = require(\"../vnode/handle-thunk.js\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n","var createElement = require(\"./vdom/create-element.js\")\n\nmodule.exports = createElement\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Used by `_.defaults` to customize its `_.assignIn` use.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to assign.\n * @param {Object} object The parent object of `objValue`.\n * @returns {*} Returns the value to assign.\n */\nfunction assignInDefaults(objValue, srcValue, key, object) {\n  if (objValue === undefined ||\n      (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n    return srcValue;\n  }\n  return objValue;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method is like `_.assignIn` except that it accepts `customizer`\n * which is invoked to produce the assigned values. If `customizer` returns\n * `undefined`, assignment is handled by the method instead. The `customizer`\n * is invoked with five arguments: (objValue, srcValue, key, object, source).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extendWith\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @see _.assignWith\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   return _.isUndefined(objValue) ? srcValue : objValue;\n * }\n *\n * var defaults = _.partialRight(_.assignInWith, customizer);\n *\n * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n  copyObject(source, keysIn(source), object, customizer);\n});\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(args) {\n  args.push(undefined, assignInDefaults);\n  return apply(assignInWith, undefined, args);\n});\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = defaults;\n","var nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n","var version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property) && property.unhook) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n","var version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n","/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nmodule.exports = (function split(undef) {\n\n  var nativeSplit = String.prototype.split,\n    compliantExecNpcg = /()??/.exec(\"\")[1] === undef,\n    // NPCG: nonparticipating capturing group\n    self;\n\n  self = function(str, separator, limit) {\n    // If `separator` is not a regex, use `nativeSplit`\n    if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n      return nativeSplit.call(str, separator, limit);\n    }\n    var output = [],\n      flags = (separator.ignoreCase ? \"i\" : \"\") + (separator.multiline ? \"m\" : \"\") + (separator.extended ? \"x\" : \"\") + // Proposed for ES6\n      (separator.sticky ? \"y\" : \"\"),\n      // Firefox 3+\n      lastLastIndex = 0,\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator = new RegExp(separator.source, flags + \"g\"),\n      separator2, match, lastIndex, lastLength;\n    str += \"\"; // Type-convert\n    if (!compliantExecNpcg) {\n      // Doesn't need flags gy, but they don't hurt\n      separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n    }\n    /* Values for `limit`, per the spec:\n     * If undefined: 4294967295 // Math.pow(2, 32) - 1\n     * If 0, Infinity, or NaN: 0\n     * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n     * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n     * If other: Type-convert, then use the above rules\n     */\n    limit = limit === undef ? -1 >>> 0 : // Math.pow(2, 32) - 1\n    limit >>> 0; // ToUint32(limit)\n    while (match = separator.exec(str)) {\n      // `separator.lastIndex` is not reliable cross-browser\n      lastIndex = match.index + match[0].length;\n      if (lastIndex > lastLastIndex) {\n        output.push(str.slice(lastLastIndex, match.index));\n        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n        // nonparticipating capturing groups\n        if (!compliantExecNpcg && match.length > 1) {\n          match[0].replace(separator2, function() {\n            for (var i = 1; i < arguments.length - 2; i++) {\n              if (arguments[i] === undef) {\n                match[i] = undef;\n              }\n            }\n          });\n        }\n        if (match.length > 1 && match.index < str.length) {\n          Array.prototype.push.apply(output, match.slice(1));\n        }\n        lastLength = match[0].length;\n        lastLastIndex = lastIndex;\n        if (output.length >= limit) {\n          break;\n        }\n      }\n      if (separator.lastIndex === match.index) {\n        separator.lastIndex++; // Avoid an infinite loop\n      }\n    }\n    if (lastLastIndex === str.length) {\n      if (lastLength || !separator.test(\"\")) {\n        output.push(\"\");\n      }\n    } else {\n      output.push(str.slice(lastLastIndex));\n    }\n    return output.length > limit ? output.slice(0, limit) : output;\n  };\n\n  return self;\n})();\n","'use strict';\n\nvar split = require('browser-split');\n\nvar classIdSplit = /([\\.#]?[a-zA-Z0-9\\u007F-\\uFFFF_:-]+)/;\nvar notClassId = /^\\.|#/;\n\nmodule.exports = parseTag;\n\nfunction parseTag(tag, props) {\n    if (!tag) {\n        return 'DIV';\n    }\n\n    var noId = !(props.hasOwnProperty('id'));\n\n    var tagParts = split(tag, classIdSplit);\n    var tagName = null;\n\n    if (notClassId.test(tagParts[1])) {\n        tagName = 'DIV';\n    }\n\n    var classes, part, type, i;\n\n    for (i = 0; i < tagParts.length; i++) {\n        part = tagParts[i];\n\n        if (!part) {\n            continue;\n        }\n\n        type = part.charAt(0);\n\n        if (!tagName) {\n            tagName = part;\n        } else if (type === '.') {\n            classes = classes || [];\n            classes.push(part.substring(1, part.length));\n        } else if (type === '#' && noId) {\n            props.id = part.substring(1, part.length);\n        }\n    }\n\n    if (classes) {\n        if (props.className) {\n            classes.push(props.className);\n        }\n\n        props.className = classes.join(' ');\n    }\n\n    return props.namespace ? tagName : tagName.toUpperCase();\n}\n","'use strict';\n\nmodule.exports = SoftSetHook;\n\nfunction SoftSetHook(value) {\n    if (!(this instanceof SoftSetHook)) {\n        return new SoftSetHook(value);\n    }\n\n    this.value = value;\n}\n\nSoftSetHook.prototype.hook = function (node, propertyName) {\n    if (node[propertyName] !== this.value) {\n        node[propertyName] = this.value;\n    }\n};\n","'use strict';\n\n/*global window, global*/\n\nvar root = typeof window !== 'undefined' ?\n    window : typeof global !== 'undefined' ?\n    global : {};\n\nmodule.exports = Individual;\n\nfunction Individual(key, value) {\n    if (key in root) {\n        return root[key];\n    }\n\n    root[key] = value;\n\n    return value;\n}\n","'use strict';\n\nvar Individual = require('./index.js');\n\nmodule.exports = OneVersion;\n\nfunction OneVersion(moduleName, version, defaultValue) {\n    var key = '__INDIVIDUAL_ONE_VERSION_' + moduleName;\n    var enforceKey = key + '_ENFORCE_SINGLETON';\n\n    var versionValue = Individual(enforceKey, version);\n\n    if (versionValue !== version) {\n        throw new Error('Can only have one copy of ' +\n            moduleName + '.\\n' +\n            'You already have version ' + versionValue +\n            ' installed.\\n' +\n            'This means you cannot install version ' + version);\n    }\n\n    return Individual(key, defaultValue);\n}\n","'use strict';\n\nvar OneVersionConstraint = require('individual/one-version');\n\nvar MY_VERSION = '7';\nOneVersionConstraint('ev-store', MY_VERSION);\n\nvar hashKey = '__EV_STORE_KEY@' + MY_VERSION;\n\nmodule.exports = EvStore;\n\nfunction EvStore(elem) {\n    var hash = elem[hashKey];\n\n    if (!hash) {\n        hash = elem[hashKey] = {};\n    }\n\n    return hash;\n}\n","'use strict';\n\nvar EvStore = require('ev-store');\n\nmodule.exports = EvHook;\n\nfunction EvHook(value) {\n    if (!(this instanceof EvHook)) {\n        return new EvHook(value);\n    }\n\n    this.value = value;\n}\n\nEvHook.prototype.hook = function (node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = this.value;\n};\n\nEvHook.prototype.unhook = function(node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = undefined;\n};\n","'use strict';\n\nvar isArray = require('x-is-array');\n\nvar VNode = require('../vnode/vnode.js');\nvar VText = require('../vnode/vtext.js');\nvar isVNode = require('../vnode/is-vnode');\nvar isVText = require('../vnode/is-vtext');\nvar isWidget = require('../vnode/is-widget');\nvar isHook = require('../vnode/is-vhook');\nvar isVThunk = require('../vnode/is-thunk');\n\nvar parseTag = require('./parse-tag.js');\nvar softSetHook = require('./hooks/soft-set-hook.js');\nvar evHook = require('./hooks/ev-hook.js');\n\nmodule.exports = h;\n\nfunction h(tagName, properties, children) {\n    var childNodes = [];\n    var tag, props, key, namespace;\n\n    if (!children && isChildren(properties)) {\n        children = properties;\n        props = {};\n    }\n\n    props = props || properties || {};\n    tag = parseTag(tagName, props);\n\n    // support keys\n    if (props.hasOwnProperty('key')) {\n        key = props.key;\n        props.key = undefined;\n    }\n\n    // support namespace\n    if (props.hasOwnProperty('namespace')) {\n        namespace = props.namespace;\n        props.namespace = undefined;\n    }\n\n    // fix cursor bug\n    if (tag === 'INPUT' &&\n        !namespace &&\n        props.hasOwnProperty('value') &&\n        props.value !== undefined &&\n        !isHook(props.value)\n    ) {\n        props.value = softSetHook(props.value);\n    }\n\n    transformProperties(props);\n\n    if (children !== undefined && children !== null) {\n        addChild(children, childNodes, tag, props);\n    }\n\n\n    return new VNode(tag, props, childNodes, key, namespace);\n}\n\nfunction addChild(c, childNodes, tag, props) {\n    if (typeof c === 'string') {\n        childNodes.push(new VText(c));\n    } else if (typeof c === 'number') {\n        childNodes.push(new VText(String(c)));\n    } else if (isChild(c)) {\n        childNodes.push(c);\n    } else if (isArray(c)) {\n        for (var i = 0; i < c.length; i++) {\n            addChild(c[i], childNodes, tag, props);\n        }\n    } else if (c === null || c === undefined) {\n        return;\n    } else {\n        throw UnexpectedVirtualElement({\n            foreignObject: c,\n            parentVnode: {\n                tagName: tag,\n                properties: props\n            }\n        });\n    }\n}\n\nfunction transformProperties(props) {\n    for (var propName in props) {\n        if (props.hasOwnProperty(propName)) {\n            var value = props[propName];\n\n            if (isHook(value)) {\n                continue;\n            }\n\n            if (propName.substr(0, 3) === 'ev-') {\n                // add ev-foo support\n                props[propName] = evHook(value);\n            }\n        }\n    }\n}\n\nfunction isChild(x) {\n    return isVNode(x) || isVText(x) || isWidget(x) || isVThunk(x);\n}\n\nfunction isChildren(x) {\n    return typeof x === 'string' || isArray(x) || isChild(x);\n}\n\nfunction UnexpectedVirtualElement(data) {\n    var err = new Error();\n\n    err.type = 'virtual-hyperscript.unexpected.virtual-element';\n    err.message = 'Unexpected virtual child passed to h().\\n' +\n        'Expected a VNode / Vthunk / VWidget / string but:\\n' +\n        'got:\\n' +\n        errorString(data.foreignObject) +\n        '.\\n' +\n        'The parent vnode is:\\n' +\n        errorString(data.parentVnode)\n        '\\n' +\n        'Suggested fix: change your `h(..., [ ... ])` callsite.';\n    err.foreignObject = data.foreignObject;\n    err.parentVnode = data.parentVnode;\n\n    return err;\n}\n\nfunction errorString(obj) {\n    try {\n        return JSON.stringify(obj, null, '    ');\n    } catch (e) {\n        return String(obj);\n    }\n}\n","var h = require(\"./virtual-hyperscript/index.js\")\n\nmodule.exports = h\n","var version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook\")\n\nmodule.exports = diffProps\n\nfunction diffProps(a, b) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (aValue === bValue) {\n            continue\n        } else if (isObject(aValue) && isObject(bValue)) {\n            if (getPrototype(bValue) !== getPrototype(aValue)) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            } else if (isHook(bValue)) {\n                 diff = diff || {}\n                 diff[aKey] = bValue\n            } else {\n                var objectDiff = diffProps(aValue, bValue)\n                if (objectDiff) {\n                    diff = diff || {}\n                    diff[aKey] = objectDiff\n                }\n            }\n        } else {\n            diff = diff || {}\n            diff[aKey] = bValue\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n  if (Object.getPrototypeOf) {\n    return Object.getPrototypeOf(value)\n  } else if (value.__proto__) {\n    return value.__proto__\n  } else if (value.constructor) {\n    return value.constructor.prototype\n  }\n}\n","var isArray = require(\"x-is-array\")\n\nvar VPatch = require(\"../vnode/vpatch\")\nvar isVNode = require(\"../vnode/is-vnode\")\nvar isVText = require(\"../vnode/is-vtext\")\nvar isWidget = require(\"../vnode/is-widget\")\nvar isThunk = require(\"../vnode/is-thunk\")\nvar handleThunk = require(\"../vnode/handle-thunk\")\n\nvar diffProps = require(\"./diff-props\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        return\n    }\n\n    var apply = patch[index]\n    var applyClear = false\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n\n        // If a is a widget we will add a remove patch for it\n        // Otherwise any child widgets/hooks must be destroyed.\n        // This prevents adding two remove patches for a widget.\n        if (!isWidget(a)) {\n            clearState(a, patch, index)\n            apply = patch[index]\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.REMOVE, a, b))\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                applyClear = true\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            applyClear = true\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            applyClear = true\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        if (!isWidget(a)) {\n            applyClear = true\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n\n    if (applyClear) {\n        clearState(a, patch, index)\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var orderedSet = reorder(aChildren, b.children)\n    var bChildren = orderedSet.children\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (orderedSet.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(\n            VPatch.ORDER,\n            a,\n            orderedSet.moves\n        ))\n    }\n\n    return apply\n}\n\nfunction clearState(vNode, patch, index) {\n    // TODO: Make this a single walk, not two\n    unhook(vNode, patch, index)\n    destroyWidgets(vNode, patch, index)\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(VPatch.REMOVE, vNode, null)\n            )\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b)\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true\n        }\n    }\n\n    return false\n}\n\n// Execute hooks when two nodes are identical\nfunction unhook(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(\n                    VPatch.PROPS,\n                    vNode,\n                    undefinedKeys(vNode.hooks)\n                )\n            )\n        }\n\n        if (vNode.descendantHooks || vNode.hasThunks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                unhook(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\nfunction undefinedKeys(obj) {\n    var result = {}\n\n    for (var key in obj) {\n        result[key] = undefined\n    }\n\n    return result\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n    // O(M) time, O(M) memory\n    var bChildIndex = keyIndex(bChildren)\n    var bKeys = bChildIndex.keys\n    var bFree = bChildIndex.free\n\n    if (bFree.length === bChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(N) time, O(N) memory\n    var aChildIndex = keyIndex(aChildren)\n    var aKeys = aChildIndex.keys\n    var aFree = aChildIndex.free\n\n    if (aFree.length === aChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(MAX(N, M)) memory\n    var newChildren = []\n\n    var freeIndex = 0\n    var freeCount = bFree.length\n    var deletedItems = 0\n\n    // Iterate through a and match a node in b\n    // O(N) time,\n    for (var i = 0 ; i < aChildren.length; i++) {\n        var aItem = aChildren[i]\n        var itemIndex\n\n        if (aItem.key) {\n            if (bKeys.hasOwnProperty(aItem.key)) {\n                // Match up the old keys\n                itemIndex = bKeys[aItem.key]\n                newChildren.push(bChildren[itemIndex])\n\n            } else {\n                // Remove old keyed items\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        } else {\n            // Match the item in a with the next free item in b\n            if (freeIndex < freeCount) {\n                itemIndex = bFree[freeIndex++]\n                newChildren.push(bChildren[itemIndex])\n            } else {\n                // There are no free items in b to match with\n                // the free items in a, so the extra free nodes\n                // are deleted.\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        }\n    }\n\n    var lastFreeIndex = freeIndex >= bFree.length ?\n        bChildren.length :\n        bFree[freeIndex]\n\n    // Iterate through b and append any new keys\n    // O(M) time\n    for (var j = 0; j < bChildren.length; j++) {\n        var newItem = bChildren[j]\n\n        if (newItem.key) {\n            if (!aKeys.hasOwnProperty(newItem.key)) {\n                // Add any new keyed items\n                // We are adding new items to the end and then sorting them\n                // in place. In future we should insert new items in place.\n                newChildren.push(newItem)\n            }\n        } else if (j >= lastFreeIndex) {\n            // Add any leftover non-keyed items\n            newChildren.push(newItem)\n        }\n    }\n\n    var simulate = newChildren.slice()\n    var simulateIndex = 0\n    var removes = []\n    var inserts = []\n    var simulateItem\n\n    for (var k = 0; k < bChildren.length;) {\n        var wantedItem = bChildren[k]\n        simulateItem = simulate[simulateIndex]\n\n        // remove items\n        while (simulateItem === null && simulate.length) {\n            removes.push(remove(simulate, simulateIndex, null))\n            simulateItem = simulate[simulateIndex]\n        }\n\n        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n            // if we need a key in this position...\n            if (wantedItem.key) {\n                if (simulateItem && simulateItem.key) {\n                    // if an insert doesn't put this key in place, it needs to move\n                    if (bKeys[simulateItem.key] !== k + 1) {\n                        removes.push(remove(simulate, simulateIndex, simulateItem.key))\n                        simulateItem = simulate[simulateIndex]\n                        // if the remove didn't put the wanted item in place, we need to insert it\n                        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n                            inserts.push({key: wantedItem.key, to: k})\n                        }\n                        // items are matching, so skip ahead\n                        else {\n                            simulateIndex++\n                        }\n                    }\n                    else {\n                        inserts.push({key: wantedItem.key, to: k})\n                    }\n                }\n                else {\n                    inserts.push({key: wantedItem.key, to: k})\n                }\n                k++\n            }\n            // a key in simulate has no matching wanted key, remove it\n            else if (simulateItem && simulateItem.key) {\n                removes.push(remove(simulate, simulateIndex, simulateItem.key))\n            }\n        }\n        else {\n            simulateIndex++\n            k++\n        }\n    }\n\n    // remove all the remaining nodes from simulate\n    while(simulateIndex < simulate.length) {\n        simulateItem = simulate[simulateIndex]\n        removes.push(remove(simulate, simulateIndex, simulateItem && simulateItem.key))\n    }\n\n    // If the only moves we have are deletes then we can just\n    // let the delete patch remove these items.\n    if (removes.length === deletedItems && !inserts.length) {\n        return {\n            children: newChildren,\n            moves: null\n        }\n    }\n\n    return {\n        children: newChildren,\n        moves: {\n            removes: removes,\n            inserts: inserts\n        }\n    }\n}\n\nfunction remove(arr, index, key) {\n    arr.splice(index, 1)\n\n    return {\n        from: index,\n        key: key\n    }\n}\n\nfunction keyIndex(children) {\n    var keys = {}\n    var free = []\n    var length = children.length\n\n    for (var i = 0; i < length; i++) {\n        var child = children[i]\n\n        if (child.key) {\n            keys[child.key] = i\n        } else {\n            free.push(i)\n        }\n    }\n\n    return {\n        keys: keys,     // A hash of key name to index\n        free: free      // An array of unkeyed item indices\n    }\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n","var diff = require(\"./vtree/diff.js\")\n\nmodule.exports = diff\n","// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n","var isWidget = require(\"../vnode/is-widget.js\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n","var applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar VPatch = require(\"../vnode/vpatch.js\")\n\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = renderOptions.render(vText, renderOptions)\n\n        if (parentNode && newNode !== domNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    var updating = updateWidget(leftVNode, widget)\n    var newNode\n\n    if (updating) {\n        newNode = widget.update(leftVNode, domNode) || domNode\n    } else {\n        newNode = renderOptions.render(widget, renderOptions)\n    }\n\n    var parentNode = domNode.parentNode\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    if (!updating) {\n        destroyWidget(domNode, leftVNode)\n    }\n\n    return newNode\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, moves) {\n    var childNodes = domNode.childNodes\n    var keyMap = {}\n    var node\n    var remove\n    var insert\n\n    for (var i = 0; i < moves.removes.length; i++) {\n        remove = moves.removes[i]\n        node = childNodes[remove.from]\n        if (remove.key) {\n            keyMap[remove.key] = node\n        }\n        domNode.removeChild(node)\n    }\n\n    var length = childNodes.length\n    for (var j = 0; j < moves.inserts.length; j++) {\n        insert = moves.inserts[j]\n        node = keyMap[insert.key]\n        // this is the weirdest bug i've ever seen in webkit\n        domNode.insertBefore(node, insert.to >= length++ ? null : childNodes[insert.to])\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n","var document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar render = require(\"./create-element\")\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches, renderOptions) {\n    renderOptions = renderOptions || {}\n    renderOptions.patch = renderOptions.patch && renderOptions.patch !== patch\n        ? renderOptions.patch\n        : patchRecursive\n    renderOptions.render = renderOptions.render || render\n\n    return renderOptions.patch(rootNode, patches, renderOptions)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions.document && ownerDocument !== document) {\n        renderOptions.document = ownerDocument\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n","var patch = require(\"./vdom/patch.js\")\n\nmodule.exports = patch\n","var WORKER_ENABLED = !!(global === global.window && global.URL && global.Blob && global.Worker);\n\nfunction InlineWorker(func, self) {\n  var _this = this;\n  var functionBody;\n\n  self = self || {};\n\n  if (WORKER_ENABLED) {\n    functionBody = func.toString().trim().match(\n      /^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/\n    )[1];\n\n    return new global.Worker(global.URL.createObjectURL(\n      new global.Blob([ functionBody ], { type: \"text/javascript\" })\n    ));\n  }\n\n  function postMessage(data) {\n    setTimeout(function() {\n      _this.onmessage({ data: data });\n    }, 0);\n  }\n\n  this.self = self;\n  this.self.postMessage = postMessage;\n\n  setTimeout(func.bind(self, self), 0);\n}\n\nInlineWorker.prototype.postMessage = function postMessage(data) {\n  var _this = this;\n\n  setTimeout(function() {\n    _this.self.onmessage({ data: data });\n  }, 0);\n};\n\nmodule.exports = InlineWorker;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.samplesToSeconds = samplesToSeconds;\nexports.secondsToSamples = secondsToSamples;\nexports.samplesToPixels = samplesToPixels;\nexports.pixelsToSamples = pixelsToSamples;\nexports.pixelsToSeconds = pixelsToSeconds;\nexports.secondsToPixels = secondsToPixels;\nfunction samplesToSeconds(samples, sampleRate) {\n  return samples / sampleRate;\n}\n\nfunction secondsToSamples(seconds, sampleRate) {\n  return Math.ceil(seconds * sampleRate);\n}\n\nfunction samplesToPixels(samples, resolution) {\n  return Math.floor(samples / resolution);\n}\n\nfunction pixelsToSamples(pixels, resolution) {\n  return Math.floor(pixels * resolution);\n}\n\nfunction pixelsToSeconds(pixels, resolution, sampleRate) {\n  return pixels * resolution / sampleRate;\n}\n\nfunction secondsToPixels(seconds, resolution, sampleRate) {\n  return Math.ceil(seconds * sampleRate / resolution);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.STATE_FINISHED = exports.STATE_DECODING = exports.STATE_LOADING = exports.STATE_UNINITIALIZED = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventEmitter = require('event-emitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar STATE_UNINITIALIZED = exports.STATE_UNINITIALIZED = 0;\nvar STATE_LOADING = exports.STATE_LOADING = 1;\nvar STATE_DECODING = exports.STATE_DECODING = 2;\nvar STATE_FINISHED = exports.STATE_FINISHED = 3;\n\nvar _class = function () {\n  function _class(src, audioContext) {\n    var ee = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (0, _eventEmitter2.default)();\n\n    _classCallCheck(this, _class);\n\n    this.src = src;\n    this.ac = audioContext;\n    this.audioRequestState = STATE_UNINITIALIZED;\n    this.ee = ee;\n  }\n\n  _createClass(_class, [{\n    key: 'setStateChange',\n    value: function setStateChange(state) {\n      this.audioRequestState = state;\n      this.ee.emit('audiorequeststatechange', this.audioRequestState, this.src);\n    }\n  }, {\n    key: 'fileProgress',\n    value: function fileProgress(e) {\n      var percentComplete = 0;\n\n      if (this.audioRequestState === STATE_UNINITIALIZED) {\n        this.setStateChange(STATE_LOADING);\n      }\n\n      if (e.lengthComputable) {\n        percentComplete = e.loaded / e.total * 100;\n      }\n\n      this.ee.emit('loadprogress', percentComplete, this.src);\n    }\n  }, {\n    key: 'fileLoad',\n    value: function fileLoad(e) {\n      var _this = this;\n\n      var audioData = e.target.response || e.target.result;\n\n      this.setStateChange(STATE_DECODING);\n\n      return new Promise(function (resolve, reject) {\n        _this.ac.decodeAudioData(audioData, function (audioBuffer) {\n          _this.audioBuffer = audioBuffer;\n          _this.setStateChange(STATE_FINISHED);\n\n          resolve(audioBuffer);\n        }, function (err) {\n          if (err === null) {\n            // Safari issues with null error\n            reject(Error('MediaDecodeAudioDataUnknownContentType'));\n          } else {\n            reject(err);\n          }\n        });\n      });\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _Loader2 = require('./Loader');\n\nvar _Loader3 = _interopRequireDefault(_Loader2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Loader) {\n  _inherits(_class, _Loader);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'load',\n\n\n    /*\n    * Loads an audio file via a FileReader\n    */\n    value: function load() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        if (_this2.src.type.match(/audio.*/) ||\n        // added for problems with Firefox mime types + ogg.\n        _this2.src.type.match(/video\\/ogg/)) {\n          var fr = new FileReader();\n\n          fr.readAsArrayBuffer(_this2.src);\n\n          fr.addEventListener('progress', function (e) {\n            _get(_class.prototype.__proto__ || Object.getPrototypeOf(_class.prototype), 'fileProgress', _this2).call(_this2, e);\n          });\n\n          fr.addEventListener('load', function (e) {\n            var decoderPromise = _get(_class.prototype.__proto__ || Object.getPrototypeOf(_class.prototype), 'fileLoad', _this2).call(_this2, e);\n\n            decoderPromise.then(function (audioBuffer) {\n              resolve(audioBuffer);\n            }).catch(reject);\n          });\n\n          fr.addEventListener('error', reject);\n        } else {\n          reject(Error('Unsupported file type ' + _this2.src.type));\n        }\n      });\n    }\n  }]);\n\n  return _class;\n}(_Loader3.default);\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _Loader2 = require('./Loader');\n\nvar _Loader3 = _interopRequireDefault(_Loader2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Loader) {\n  _inherits(_class, _Loader);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'load',\n\n\n    /**\n     * Loads an audio file via XHR.\n     */\n    value: function load() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n\n        xhr.open('GET', _this2.src, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.send();\n\n        xhr.addEventListener('progress', function (e) {\n          _get(_class.prototype.__proto__ || Object.getPrototypeOf(_class.prototype), 'fileProgress', _this2).call(_this2, e);\n        });\n\n        xhr.addEventListener('load', function (e) {\n          var decoderPromise = _get(_class.prototype.__proto__ || Object.getPrototypeOf(_class.prototype), 'fileLoad', _this2).call(_this2, e);\n\n          decoderPromise.then(function (audioBuffer) {\n            resolve(audioBuffer);\n          }).catch(reject);\n        });\n\n        xhr.addEventListener('error', function () {\n          reject(Error('Track ' + _this2.src + ' failed to load'));\n        });\n      });\n    }\n  }]);\n\n  return _class;\n}(_Loader3.default);\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BlobLoader = require('./BlobLoader');\n\nvar _BlobLoader2 = _interopRequireDefault(_BlobLoader);\n\nvar _XHRLoader = require('./XHRLoader');\n\nvar _XHRLoader2 = _interopRequireDefault(_XHRLoader);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class() {\n    _classCallCheck(this, _class);\n  }\n\n  _createClass(_class, null, [{\n    key: 'createLoader',\n    value: function createLoader(src, audioContext, ee) {\n      if (src instanceof Blob) {\n        return new _BlobLoader2.default(src, audioContext, ee);\n      } else if (typeof src === 'string') {\n        return new _XHRLoader2.default(src, audioContext, ee);\n      }\n\n      throw new Error('Unsupported src type');\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n * virtual-dom hook for scrolling the track container.\n */\nvar _class = function () {\n  function _class(playlist) {\n    _classCallCheck(this, _class);\n\n    this.playlist = playlist;\n  }\n\n  _createClass(_class, [{\n    key: 'hook',\n    value: function hook(node) {\n      var playlist = this.playlist;\n      if (!playlist.isScrolling) {\n        var el = node;\n\n        if (playlist.isAutomaticScroll && node.querySelector('.cursor')) {\n          var rect = node.getBoundingClientRect();\n          var cursorRect = node.querySelector('.cursor').getBoundingClientRect();\n\n          if (cursorRect.right > rect.right || cursorRect.right < 0) {\n            var controlWidth = playlist.controls.show ? playlist.controls.width : 0;\n            var width = (0, _conversions.pixelsToSeconds)(rect.right - rect.left, playlist.samplesPerPixel, playlist.sampleRate);\n            playlist.scrollLeft = Math.min(playlist.playbackSeconds, playlist.duration - (width - controlWidth));\n          }\n        }\n\n        var left = (0, _conversions.secondsToPixels)(playlist.scrollLeft, playlist.samplesPerPixel, playlist.sampleRate);\n\n        el.scrollLeft = left;\n      }\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n* virtual-dom hook for rendering the time scale canvas.\n*/\nvar _class = function () {\n  function _class(tickInfo, offset, samplesPerPixel, duration, colors) {\n    _classCallCheck(this, _class);\n\n    this.tickInfo = tickInfo;\n    this.offset = offset;\n    this.samplesPerPixel = samplesPerPixel;\n    this.duration = duration;\n    this.colors = colors;\n  }\n\n  _createClass(_class, [{\n    key: 'hook',\n    value: function hook(canvas, prop, prev) {\n      var _this = this;\n\n      // canvas is up to date\n      if (prev !== undefined && prev.offset === this.offset && prev.duration === this.duration && prev.samplesPerPixel === this.samplesPerPixel) {\n        return;\n      }\n\n      var width = canvas.width;\n      var height = canvas.height;\n      var ctx = canvas.getContext('2d');\n\n      ctx.clearRect(0, 0, width, height);\n      ctx.fillStyle = this.colors.timeColor;\n\n      Object.keys(this.tickInfo).forEach(function (x) {\n        var scaleHeight = _this.tickInfo[x];\n        var scaleY = height - scaleHeight;\n        ctx.fillRect(x, scaleY, 1, scaleHeight);\n      });\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _conversions = require('./utils/conversions');\n\nvar _TimeScaleHook = require('./render/TimeScaleHook');\n\nvar _TimeScaleHook2 = _interopRequireDefault(_TimeScaleHook);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TimeScale = function () {\n  function TimeScale(duration, offset, samplesPerPixel, sampleRate) {\n    var marginLeft = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var colors = arguments[5];\n\n    _classCallCheck(this, TimeScale);\n\n    this.duration = duration;\n    this.offset = offset;\n    this.samplesPerPixel = samplesPerPixel;\n    this.sampleRate = sampleRate;\n    this.marginLeft = marginLeft;\n    this.colors = colors;\n\n    this.timeinfo = {\n      20000: {\n        marker: 30000,\n        bigStep: 10000,\n        smallStep: 5000,\n        secondStep: 5\n      },\n      12000: {\n        marker: 15000,\n        bigStep: 5000,\n        smallStep: 1000,\n        secondStep: 1\n      },\n      10000: {\n        marker: 10000,\n        bigStep: 5000,\n        smallStep: 1000,\n        secondStep: 1\n      },\n      5000: {\n        marker: 5000,\n        bigStep: 1000,\n        smallStep: 500,\n        secondStep: 1 / 2\n      },\n      2500: {\n        marker: 2000,\n        bigStep: 1000,\n        smallStep: 500,\n        secondStep: 1 / 2\n      },\n      1500: {\n        marker: 2000,\n        bigStep: 1000,\n        smallStep: 200,\n        secondStep: 1 / 5\n      },\n      700: {\n        marker: 1000,\n        bigStep: 500,\n        smallStep: 100,\n        secondStep: 1 / 10\n      }\n    };\n  }\n\n  _createClass(TimeScale, [{\n    key: 'getScaleInfo',\n    value: function getScaleInfo(resolution) {\n      var keys = Object.keys(this.timeinfo).map(function (item) {\n        return parseInt(item, 10);\n      });\n\n      // make sure keys are numerically sorted.\n      keys = keys.sort(function (a, b) {\n        return a - b;\n      });\n\n      for (var i = 0; i < keys.length; i += 1) {\n        if (resolution <= keys[i]) {\n          return this.timeinfo[keys[i]];\n        }\n      }\n\n      return this.timeinfo[keys[0]];\n    }\n\n    /*\n      Return time in format mm:ss\n    */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var widthX = (0, _conversions.secondsToPixels)(this.duration, this.samplesPerPixel, this.sampleRate);\n      var pixPerSec = this.sampleRate / this.samplesPerPixel;\n      var pixOffset = (0, _conversions.secondsToPixels)(this.offset, this.samplesPerPixel, this.sampleRate);\n      var scaleInfo = this.getScaleInfo(this.samplesPerPixel);\n      var canvasInfo = {};\n      var timeMarkers = [];\n      var end = widthX + pixOffset;\n      var counter = 0;\n\n      for (var i = 0; i < end; i += pixPerSec * scaleInfo.secondStep) {\n        var pixIndex = Math.floor(i);\n        var pix = pixIndex - pixOffset;\n\n        if (pixIndex >= pixOffset) {\n          // put a timestamp every 30 seconds.\n          if (scaleInfo.marker && counter % scaleInfo.marker === 0) {\n            timeMarkers.push((0, _h2.default)('div.time', {\n              attributes: {\n                style: 'position: absolute; left: ' + pix + 'px;'\n              }\n            }, [TimeScale.formatTime(counter)]));\n\n            canvasInfo[pix] = 10;\n          } else if (scaleInfo.bigStep && counter % scaleInfo.bigStep === 0) {\n            canvasInfo[pix] = 5;\n          } else if (scaleInfo.smallStep && counter % scaleInfo.smallStep === 0) {\n            canvasInfo[pix] = 2;\n          }\n        }\n\n        counter += 1000 * scaleInfo.secondStep;\n      }\n\n      return (0, _h2.default)('div.playlist-time-scale', {\n        attributes: {\n          style: 'position: relative; left: 0; right: 0; margin-left: ' + this.marginLeft + 'px;'\n        }\n      }, [timeMarkers, (0, _h2.default)('canvas', {\n        attributes: {\n          width: widthX,\n          height: 30,\n          style: 'position: absolute; left: 0; right: 0; top: 0; bottom: 0;'\n        },\n        hook: new _TimeScaleHook2.default(canvasInfo, this.offset, this.samplesPerPixel, this.duration, this.colors)\n      })]);\n    }\n  }], [{\n    key: 'formatTime',\n    value: function formatTime(milliseconds) {\n      var seconds = milliseconds / 1000;\n      var s = seconds % 60;\n      var m = (seconds - s) / 60;\n\n      if (s < 10) {\n        s = '0' + s;\n      }\n\n      return m + ':' + s;\n    }\n  }]);\n\n  return TimeScale;\n}();\n\nexports.default = TimeScale;","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Iterates over own enumerable string keyed properties of an object and\n * invokes `iteratee` for each property. The iteratee is invoked with three\n * arguments: (value, key, object). Iteratee functions may exit iteration\n * early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwnRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forOwn(object, iteratee) {\n  return object && baseForOwn(object, typeof iteratee == 'function' ? iteratee : identity);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = forOwn;\n","\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n","'use strict';\n\n//http://jsperf.com/typed-array-min-max/2\n//plain for loop for finding min/max is way faster than anything else.\n/**\n* @param {TypedArray} array - Subarray of audio to calculate peaks from.\n*/\nfunction findMinMax(array) {\n    var min = Infinity;\n    var max = -Infinity;\n    var i = 0;\n    var len = array.length;\n    var curr;\n\n    for(; i < len; i++) {\n        curr = array[i];\n        if (min > curr) {\n            min = curr;\n        }\n        if (max < curr) {\n            max = curr;\n        }\n    }\n\n    return {\n        min: min,\n        max: max\n    };\n}\n\n/**\n* @param {Number} n - peak to convert from float to Int8, Int16 etc.\n* @param {Number} bits - convert to #bits two's complement signed integer\n*/\nfunction convert(n, bits) {\n    var max = Math.pow(2, bits-1);\n    var v = n < 0 ? n * max : n * max - 1;\n    return Math.max(-max, Math.min(max-1, v));\n}\n\n/**\n* @param {TypedArray} channel - Audio track frames to calculate peaks from.\n* @param {Number} samplesPerPixel - Audio frames per peak\n*/\nfunction extractPeaks(channel, samplesPerPixel, bits) {\n    var i;\n    var chanLength = channel.length;\n    var numPeaks = Math.ceil(chanLength / samplesPerPixel);\n    var start;\n    var end;\n    var segment;\n    var max; \n    var min;\n    var extrema;\n\n    //create interleaved array of min,max\n    var peaks = new (eval(\"Int\"+bits+\"Array\"))(numPeaks*2);\n\n    for (i = 0; i < numPeaks; i++) {\n\n        start = i * samplesPerPixel;\n        end = (i + 1) * samplesPerPixel > chanLength ? chanLength : (i + 1) * samplesPerPixel;\n\n        segment = channel.subarray(start, end);\n        extrema = findMinMax(segment);\n        min = convert(extrema.min, bits);\n        max = convert(extrema.max, bits);\n\n        peaks[i*2] = min;\n        peaks[i*2+1] = max;\n    }\n\n    return peaks;\n}\n\nfunction makeMono(channelPeaks, bits) {\n    var numChan = channelPeaks.length;\n    var weight = 1 / numChan;\n    var numPeaks = channelPeaks[0].length / 2;\n    var c = 0;\n    var i = 0;\n    var min;\n    var max;\n    var peaks = new (eval(\"Int\"+bits+\"Array\"))(numPeaks*2);\n\n    for (i = 0; i < numPeaks; i++) {\n        min = 0;\n        max = 0;\n\n        for (c = 0; c < numChan; c++) {\n            min += weight * channelPeaks[c][i*2];\n            max += weight * channelPeaks[c][i*2+1];\n        }\n\n        peaks[i*2] = min;\n        peaks[i*2+1] = max;\n    }\n\n    //return in array so channel number counts still work.\n    return [peaks];\n}\n\n/**\n* @param {AudioBuffer,TypedArray} source - Source of audio samples for peak calculations.\n* @param {Number} samplesPerPixel - Number of audio samples per peak.\n* @param {Number} cueIn - index in channel to start peak calculations from.\n* @param {Number} cueOut - index in channel to end peak calculations from (non-inclusive).\n*/\nmodule.exports = function(source, samplesPerPixel, isMono, cueIn, cueOut, bits) {\n    samplesPerPixel = samplesPerPixel || 10000;\n    bits = bits || 8;\n    \n    if (isMono === null || isMono === undefined) {\n        isMono = true;\n    }\n\n    if ([8, 16, 32].indexOf(bits) < 0) {\n        throw new Error(\"Invalid number of bits specified for peaks.\");\n    }\n\n    var numChan = source.numberOfChannels;\n    var peaks = [];\n    var c;\n    var numPeaks;\n    var channel;\n    var slice;\n\n    if (typeof source.subarray === \"undefined\") {\n        for (c = 0; c < numChan; c++) {\n            channel = source.getChannelData(c);\n            cueIn = cueIn || 0;\n            cueOut = cueOut || channel.length;\n            slice = channel.subarray(cueIn, cueOut);\n            peaks.push(extractPeaks(slice, samplesPerPixel, bits));\n        }\n    }\n    else {\n        cueIn = cueIn || 0;\n        cueOut = cueOut || source.length;\n        peaks.push(extractPeaks(source.subarray(cueIn, cueOut), samplesPerPixel, bits));\n    }\n\n    if (isMono && peaks.length > 1) {\n        peaks = makeMono(peaks, bits);\n    }\n\n    numPeaks = peaks[0].length / 2;\n\n    return {\n        length: numPeaks,\n        data: peaks,\n        bits: bits\n    };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.linear = linear;\nexports.exponential = exponential;\nexports.sCurve = sCurve;\nexports.logarithmic = logarithmic;\nfunction linear(length, rotation) {\n    var curve = new Float32Array(length),\n        i,\n        x,\n        scale = length - 1;\n\n    for (i = 0; i < length; i++) {\n        x = i / scale;\n\n        if (rotation > 0) {\n            curve[i] = x;\n        } else {\n            curve[i] = 1 - x;\n        }\n    }\n\n    return curve;\n}\n\nfunction exponential(length, rotation) {\n    var curve = new Float32Array(length),\n        i,\n        x,\n        scale = length - 1,\n        index;\n\n    for (i = 0; i < length; i++) {\n        x = i / scale;\n        index = rotation > 0 ? i : length - 1 - i;\n\n        curve[index] = Math.exp(2 * x - 1) / Math.exp(1);\n    }\n\n    return curve;\n}\n\n//creating a curve to simulate an S-curve with setValueCurveAtTime.\nfunction sCurve(length, rotation) {\n    var curve = new Float32Array(length),\n        i,\n        phase = rotation > 0 ? Math.PI / 2 : -(Math.PI / 2);\n\n    for (i = 0; i < length; ++i) {\n        curve[i] = Math.sin(Math.PI * i / length - phase) / 2 + 0.5;\n    }\n    return curve;\n}\n\n//creating a curve to simulate a logarithmic curve with setValueCurveAtTime.\nfunction logarithmic(length, base, rotation) {\n    var curve = new Float32Array(length),\n        index,\n        x = 0,\n        i;\n\n    for (i = 0; i < length; i++) {\n        //index for the curve array.\n        index = rotation > 0 ? i : length - 1 - i;\n\n        x = i / length;\n        curve[index] = Math.log(1 + base * x) / Math.log(1 + base);\n    }\n\n    return curve;\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.FADEOUT = exports.FADEIN = exports.LOGARITHMIC = exports.EXPONENTIAL = exports.LINEAR = exports.SCURVE = undefined;\nexports.createFadeIn = createFadeIn;\nexports.createFadeOut = createFadeOut;\n\nvar _fadeCurves = require('fade-curves');\n\nvar SCURVE = exports.SCURVE = \"sCurve\";\nvar LINEAR = exports.LINEAR = \"linear\";\nvar EXPONENTIAL = exports.EXPONENTIAL = \"exponential\";\nvar LOGARITHMIC = exports.LOGARITHMIC = \"logarithmic\";\n\nvar FADEIN = exports.FADEIN = \"FadeIn\";\nvar FADEOUT = exports.FADEOUT = \"FadeOut\";\n\nfunction sCurveFadeIn(start, duration) {\n    var curve = (0, _fadeCurves.sCurve)(10000, 1);\n    this.setValueCurveAtTime(curve, start, duration);\n}\n\nfunction sCurveFadeOut(start, duration) {\n    var curve = (0, _fadeCurves.sCurve)(10000, -1);\n    this.setValueCurveAtTime(curve, start, duration);\n}\n\nfunction linearFadeIn(start, duration) {\n    this.linearRampToValueAtTime(0, start);\n    this.linearRampToValueAtTime(1, start + duration);\n}\n\nfunction linearFadeOut(start, duration) {\n    this.linearRampToValueAtTime(1, start);\n    this.linearRampToValueAtTime(0, start + duration);\n}\n\nfunction exponentialFadeIn(start, duration) {\n    this.exponentialRampToValueAtTime(0.01, start);\n    this.exponentialRampToValueAtTime(1, start + duration);\n}\n\nfunction exponentialFadeOut(start, duration) {\n    this.exponentialRampToValueAtTime(1, start);\n    this.exponentialRampToValueAtTime(0.01, start + duration);\n}\n\nfunction logarithmicFadeIn(start, duration) {\n    var curve = (0, _fadeCurves.logarithmic)(10000, 10, 1);\n    this.setValueCurveAtTime(curve, start, duration);\n}\n\nfunction logarithmicFadeOut(start, duration) {\n    var curve = (0, _fadeCurves.logarithmic)(10000, 10, -1);\n    this.setValueCurveAtTime(curve, start, duration);\n}\n\nfunction createFadeIn(gain, shape, start, duration) {\n    switch (shape) {\n        case SCURVE:\n            sCurveFadeIn.call(gain, start, duration);\n            break;\n        case LINEAR:\n            linearFadeIn.call(gain, start, duration);\n            break;\n        case EXPONENTIAL:\n            exponentialFadeIn.call(gain, start, duration);\n            break;\n        case LOGARITHMIC:\n            logarithmicFadeIn.call(gain, start, duration);\n            break;\n        default:\n            throw new Error(\"Unsupported Fade type\");\n    }\n}\n\nfunction createFadeOut(gain, shape, start, duration) {\n    switch (shape) {\n        case SCURVE:\n            sCurveFadeOut.call(gain, start, duration);\n            break;\n        case LINEAR:\n            linearFadeOut.call(gain, start, duration);\n            break;\n        case EXPONENTIAL:\n            exponentialFadeOut.call(gain, start, duration);\n            break;\n        case LOGARITHMIC:\n            logarithmicFadeOut.call(gain, start, duration);\n            break;\n        default:\n            throw new Error(\"Unsupported Fade type\");\n    }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(track) {\n    _classCallCheck(this, _class);\n\n    this.track = track;\n  }\n\n  _createClass(_class, [{\n    key: 'setup',\n    value: function setup(samplesPerPixel, sampleRate) {\n      this.samplesPerPixel = samplesPerPixel;\n      this.sampleRate = sampleRate;\n    }\n  }, {\n    key: 'click',\n    value: function click(e) {\n      e.preventDefault();\n\n      var startX = e.offsetX;\n      var startTime = (0, _conversions.pixelsToSeconds)(startX, this.samplesPerPixel, this.sampleRate);\n\n      this.track.ee.emit('select', startTime, startTime, this.track);\n    }\n  }], [{\n    key: 'getClass',\n    value: function getClass() {\n      return '.state-cursor';\n    }\n  }, {\n    key: 'getEvents',\n    value: function getEvents() {\n      return ['click'];\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(track) {\n    _classCallCheck(this, _class);\n\n    this.track = track;\n    this.active = false;\n  }\n\n  _createClass(_class, [{\n    key: 'setup',\n    value: function setup(samplesPerPixel, sampleRate) {\n      this.samplesPerPixel = samplesPerPixel;\n      this.sampleRate = sampleRate;\n    }\n  }, {\n    key: 'emitSelection',\n    value: function emitSelection(x) {\n      var minX = Math.min(x, this.startX);\n      var maxX = Math.max(x, this.startX);\n      var startTime = (0, _conversions.pixelsToSeconds)(minX, this.samplesPerPixel, this.sampleRate);\n      var endTime = (0, _conversions.pixelsToSeconds)(maxX, this.samplesPerPixel, this.sampleRate);\n\n      this.track.ee.emit('select', startTime, endTime, this.track);\n    }\n  }, {\n    key: 'complete',\n    value: function complete(x) {\n      this.emitSelection(x);\n      this.active = false;\n    }\n  }, {\n    key: 'mousedown',\n    value: function mousedown(e) {\n      e.preventDefault();\n      this.active = true;\n\n      this.startX = e.offsetX;\n      var startTime = (0, _conversions.pixelsToSeconds)(this.startX, this.samplesPerPixel, this.sampleRate);\n\n      this.track.ee.emit('select', startTime, startTime, this.track);\n    }\n  }, {\n    key: 'mousemove',\n    value: function mousemove(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.emitSelection(e.offsetX);\n      }\n    }\n  }, {\n    key: 'mouseup',\n    value: function mouseup(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.complete(e.offsetX);\n      }\n    }\n  }, {\n    key: 'mouseleave',\n    value: function mouseleave(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.complete(e.offsetX);\n      }\n    }\n  }], [{\n    key: 'getClass',\n    value: function getClass() {\n      return '.state-select';\n    }\n  }, {\n    key: 'getEvents',\n    value: function getEvents() {\n      return ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(track) {\n    _classCallCheck(this, _class);\n\n    this.track = track;\n    this.active = false;\n  }\n\n  _createClass(_class, [{\n    key: 'setup',\n    value: function setup(samplesPerPixel, sampleRate) {\n      this.samplesPerPixel = samplesPerPixel;\n      this.sampleRate = sampleRate;\n    }\n  }, {\n    key: 'emitShift',\n    value: function emitShift(x) {\n      var deltaX = x - this.prevX;\n      var deltaTime = (0, _conversions.pixelsToSeconds)(deltaX, this.samplesPerPixel, this.sampleRate);\n      this.prevX = x;\n      this.track.ee.emit('shift', deltaTime, this.track);\n    }\n  }, {\n    key: 'complete',\n    value: function complete(x) {\n      this.emitShift(x);\n      this.active = false;\n    }\n  }, {\n    key: 'mousedown',\n    value: function mousedown(e) {\n      e.preventDefault();\n\n      this.active = true;\n      this.el = e.target;\n      this.prevX = e.offsetX;\n    }\n  }, {\n    key: 'mousemove',\n    value: function mousemove(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.emitShift(e.offsetX);\n      }\n    }\n  }, {\n    key: 'mouseup',\n    value: function mouseup(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.complete(e.offsetX);\n      }\n    }\n  }, {\n    key: 'mouseleave',\n    value: function mouseleave(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.complete(e.offsetX);\n      }\n    }\n  }], [{\n    key: 'getClass',\n    value: function getClass() {\n      return '.state-shift';\n    }\n  }, {\n    key: 'getEvents',\n    value: function getEvents() {\n      return ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(track) {\n    _classCallCheck(this, _class);\n\n    this.track = track;\n  }\n\n  _createClass(_class, [{\n    key: 'setup',\n    value: function setup(samplesPerPixel, sampleRate) {\n      this.samplesPerPixel = samplesPerPixel;\n      this.sampleRate = sampleRate;\n    }\n  }, {\n    key: 'click',\n    value: function click(e) {\n      var startX = e.offsetX;\n      var time = (0, _conversions.pixelsToSeconds)(startX, this.samplesPerPixel, this.sampleRate);\n\n      if (time > this.track.getStartTime() && time < this.track.getEndTime()) {\n        this.track.ee.emit('fadein', time - this.track.getStartTime(), this.track);\n      }\n    }\n  }], [{\n    key: 'getClass',\n    value: function getClass() {\n      return '.state-fadein';\n    }\n  }, {\n    key: 'getEvents',\n    value: function getEvents() {\n      return ['click'];\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(track) {\n    _classCallCheck(this, _class);\n\n    this.track = track;\n  }\n\n  _createClass(_class, [{\n    key: 'setup',\n    value: function setup(samplesPerPixel, sampleRate) {\n      this.samplesPerPixel = samplesPerPixel;\n      this.sampleRate = sampleRate;\n    }\n  }, {\n    key: 'click',\n    value: function click(e) {\n      var startX = e.offsetX;\n      var time = (0, _conversions.pixelsToSeconds)(startX, this.samplesPerPixel, this.sampleRate);\n\n      if (time > this.track.getStartTime() && time < this.track.getEndTime()) {\n        this.track.ee.emit('fadeout', this.track.getEndTime() - time, this.track);\n      }\n    }\n  }], [{\n    key: 'getClass',\n    value: function getClass() {\n      return '.state-fadeout';\n    }\n  }, {\n    key: 'getEvents',\n    value: function getEvents() {\n      return ['click'];\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CursorState = require('./states/CursorState');\n\nvar _CursorState2 = _interopRequireDefault(_CursorState);\n\nvar _SelectState = require('./states/SelectState');\n\nvar _SelectState2 = _interopRequireDefault(_SelectState);\n\nvar _ShiftState = require('./states/ShiftState');\n\nvar _ShiftState2 = _interopRequireDefault(_ShiftState);\n\nvar _FadeInState = require('./states/FadeInState');\n\nvar _FadeInState2 = _interopRequireDefault(_FadeInState);\n\nvar _FadeOutState = require('./states/FadeOutState');\n\nvar _FadeOutState2 = _interopRequireDefault(_FadeOutState);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  cursor: _CursorState2.default,\n  select: _SelectState2.default,\n  shift: _ShiftState2.default,\n  fadein: _FadeInState2.default,\n  fadeout: _FadeOutState2.default\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n* virtual-dom hook for drawing to the canvas element.\n*/\nvar CanvasHook = function () {\n  function CanvasHook(peaks, offset, bits, color, scale) {\n    _classCallCheck(this, CanvasHook);\n\n    this.peaks = peaks;\n    // http://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element\n    this.offset = offset;\n    this.color = color;\n    this.bits = bits;\n    this.scale = scale;\n  }\n\n  _createClass(CanvasHook, [{\n    key: 'hook',\n    value: function hook(canvas, prop, prev) {\n      // canvas is up to date\n      if (prev !== undefined && prev.peaks === this.peaks) {\n        return;\n      }\n\n      var scale = this.scale;\n      var len = canvas.width / scale;\n      var cc = canvas.getContext('2d');\n      var h2 = canvas.height / scale / 2;\n      var maxValue = Math.pow(2, this.bits - 1);\n\n      cc.clearRect(0, 0, canvas.width, canvas.height);\n      cc.fillStyle = this.color;\n      cc.scale(scale, scale);\n\n      for (var i = 0; i < len; i += 1) {\n        var minPeak = this.peaks[(i + this.offset) * 2] / maxValue;\n        var maxPeak = this.peaks[(i + this.offset) * 2 + 1] / maxValue;\n        CanvasHook.drawFrame(cc, h2, i, minPeak, maxPeak);\n      }\n    }\n  }], [{\n    key: 'drawFrame',\n    value: function drawFrame(cc, h2, x, minPeak, maxPeak) {\n      var min = Math.abs(minPeak * h2);\n      var max = Math.abs(maxPeak * h2);\n\n      // draw max\n      cc.fillRect(x, 0, 1, h2 - max);\n      // draw min\n      cc.fillRect(x, h2 + min, 1, h2 - min);\n    }\n  }]);\n\n  return CanvasHook;\n}();\n\nexports.default = CanvasHook;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fadeMaker = require('fade-maker');\n\nvar _fadeCurves = require('fade-curves');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n* virtual-dom hook for drawing the fade curve to the canvas element.\n*/\nvar FadeCanvasHook = function () {\n  function FadeCanvasHook(type, shape, duration, samplesPerPixel) {\n    _classCallCheck(this, FadeCanvasHook);\n\n    this.type = type;\n    this.shape = shape;\n    this.duration = duration;\n    this.samplesPerPixel = samplesPerPixel;\n  }\n\n  _createClass(FadeCanvasHook, [{\n    key: 'hook',\n    value: function hook(canvas, prop, prev) {\n      // node is up to date.\n      if (prev !== undefined && prev.shape === this.shape && prev.type === this.type && prev.duration === this.duration && prev.samplesPerPixel === this.samplesPerPixel) {\n        return;\n      }\n\n      var ctx = canvas.getContext('2d');\n      var width = canvas.width;\n      var height = canvas.height;\n      var curve = FadeCanvasHook.createCurve(this.shape, this.type, width);\n      var len = curve.length;\n      var y = height - curve[0] * height;\n\n      ctx.strokeStyle = 'black';\n      ctx.beginPath();\n      ctx.moveTo(0, y);\n\n      for (var i = 1; i < len; i += 1) {\n        y = height - curve[i] * height;\n        ctx.lineTo(i, y);\n      }\n      ctx.stroke();\n    }\n  }], [{\n    key: 'createCurve',\n    value: function createCurve(shape, type, width) {\n      var reflection = void 0;\n      var curve = void 0;\n\n      switch (type) {\n        case _fadeMaker.FADEIN:\n          {\n            reflection = 1;\n            break;\n          }\n        case _fadeMaker.FADEOUT:\n          {\n            reflection = -1;\n            break;\n          }\n        default:\n          {\n            throw new Error('Unsupported fade type.');\n          }\n      }\n\n      switch (shape) {\n        case _fadeMaker.SCURVE:\n          {\n            curve = (0, _fadeCurves.sCurve)(width, reflection);\n            break;\n          }\n        case _fadeMaker.LINEAR:\n          {\n            curve = (0, _fadeCurves.linear)(width, reflection);\n            break;\n          }\n        case _fadeMaker.EXPONENTIAL:\n          {\n            curve = (0, _fadeCurves.exponential)(width, reflection);\n            break;\n          }\n        case _fadeMaker.LOGARITHMIC:\n          {\n            curve = (0, _fadeCurves.logarithmic)(width, 10, reflection);\n            break;\n          }\n        default:\n          {\n            throw new Error('Unsupported fade shape');\n          }\n      }\n\n      return curve;\n    }\n  }]);\n\n  return FadeCanvasHook;\n}();\n\nexports.default = FadeCanvasHook;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n* virtual-dom hook for setting the volume input programmatically.\n*/\nvar _class = function () {\n  function _class(gain) {\n    _classCallCheck(this, _class);\n\n    this.gain = gain;\n  }\n\n  _createClass(_class, [{\n    key: 'hook',\n    value: function hook(volumeInput) {\n      volumeInput.setAttribute('value', this.gain * 100);\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash.assign');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.forown');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _webaudioPeaks = require('webaudio-peaks');\n\nvar _webaudioPeaks2 = _interopRequireDefault(_webaudioPeaks);\n\nvar _fadeMaker = require('fade-maker');\n\nvar _conversions = require('./utils/conversions');\n\nvar _states = require('./track/states');\n\nvar _states2 = _interopRequireDefault(_states);\n\nvar _CanvasHook = require('./render/CanvasHook');\n\nvar _CanvasHook2 = _interopRequireDefault(_CanvasHook);\n\nvar _FadeCanvasHook = require('./render/FadeCanvasHook');\n\nvar _FadeCanvasHook2 = _interopRequireDefault(_FadeCanvasHook);\n\nvar _VolumeSliderHook = require('./render/VolumeSliderHook');\n\nvar _VolumeSliderHook2 = _interopRequireDefault(_VolumeSliderHook);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MAX_CANVAS_WIDTH = 1000;\n\nvar _class = function () {\n  function _class() {\n    _classCallCheck(this, _class);\n\n    this.name = 'Untitled';\n    this.customClass = undefined;\n    this.waveOutlineColor = undefined;\n    this.gain = 1;\n    this.fades = {};\n    this.peakData = {\n      type: 'WebAudio',\n      mono: false\n    };\n\n    this.cueIn = 0;\n    this.cueOut = 0;\n    this.duration = 0;\n    this.startTime = 0;\n    this.endTime = 0;\n    this.stereoPan = 0;\n  }\n\n  _createClass(_class, [{\n    key: 'setEventEmitter',\n    value: function setEventEmitter(ee) {\n      this.ee = ee;\n    }\n  }, {\n    key: 'setName',\n    value: function setName(name) {\n      this.name = name;\n    }\n  }, {\n    key: 'setCustomClass',\n    value: function setCustomClass(className) {\n      this.customClass = className;\n    }\n  }, {\n    key: 'setWaveOutlineColor',\n    value: function setWaveOutlineColor(color) {\n      this.waveOutlineColor = color;\n    }\n  }, {\n    key: 'setCues',\n    value: function setCues(cueIn, cueOut) {\n      if (cueOut < cueIn) {\n        throw new Error('cue out cannot be less than cue in');\n      }\n\n      this.cueIn = cueIn;\n      this.cueOut = cueOut;\n      this.duration = this.cueOut - this.cueIn;\n      this.endTime = this.startTime + this.duration;\n    }\n\n    /*\n    *   start, end in seconds relative to the entire playlist.\n    */\n\n  }, {\n    key: 'trim',\n    value: function trim(start, end) {\n      var trackStart = this.getStartTime();\n      var trackEnd = this.getEndTime();\n      var offset = this.cueIn - trackStart;\n\n      if (trackStart <= start && trackEnd >= start || trackStart <= end && trackEnd >= end) {\n        var cueIn = start < trackStart ? trackStart : start;\n        var cueOut = end > trackEnd ? trackEnd : end;\n\n        this.setCues(cueIn + offset, cueOut + offset);\n        if (start > trackStart) {\n          this.setStartTime(start);\n        }\n      }\n    }\n  }, {\n    key: 'setStartTime',\n    value: function setStartTime(start) {\n      this.startTime = start;\n      this.endTime = start + this.duration;\n    }\n  }, {\n    key: 'setPlayout',\n    value: function setPlayout(playout) {\n      this.playout = playout;\n    }\n  }, {\n    key: 'setOfflinePlayout',\n    value: function setOfflinePlayout(playout) {\n      this.offlinePlayout = playout;\n    }\n  }, {\n    key: 'setEnabledStates',\n    value: function setEnabledStates() {\n      var enabledStates = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var defaultStatesEnabled = {\n        cursor: true,\n        fadein: true,\n        fadeout: true,\n        select: true,\n        shift: true\n      };\n\n      this.enabledStates = (0, _lodash2.default)({}, defaultStatesEnabled, enabledStates);\n    }\n  }, {\n    key: 'setFadeIn',\n    value: function setFadeIn(duration) {\n      var shape = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'logarithmic';\n\n      if (duration > this.duration) {\n        throw new Error('Invalid Fade In');\n      }\n\n      var fade = {\n        shape: shape,\n        start: 0,\n        end: duration\n      };\n\n      if (this.fadeIn) {\n        this.removeFade(this.fadeIn);\n        this.fadeIn = undefined;\n      }\n\n      this.fadeIn = this.saveFade(_fadeMaker.FADEIN, fade.shape, fade.start, fade.end);\n    }\n  }, {\n    key: 'setFadeOut',\n    value: function setFadeOut(duration) {\n      var shape = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'logarithmic';\n\n      if (duration > this.duration) {\n        throw new Error('Invalid Fade Out');\n      }\n\n      var fade = {\n        shape: shape,\n        start: this.duration - duration,\n        end: this.duration\n      };\n\n      if (this.fadeOut) {\n        this.removeFade(this.fadeOut);\n        this.fadeOut = undefined;\n      }\n\n      this.fadeOut = this.saveFade(_fadeMaker.FADEOUT, fade.shape, fade.start, fade.end);\n    }\n  }, {\n    key: 'saveFade',\n    value: function saveFade(type, shape, start, end) {\n      var id = _uuid2.default.v4();\n\n      this.fades[id] = {\n        type: type,\n        shape: shape,\n        start: start,\n        end: end\n      };\n\n      return id;\n    }\n  }, {\n    key: 'removeFade',\n    value: function removeFade(id) {\n      delete this.fades[id];\n    }\n  }, {\n    key: 'setBuffer',\n    value: function setBuffer(buffer) {\n      this.buffer = buffer;\n    }\n  }, {\n    key: 'setPeakData',\n    value: function setPeakData(data) {\n      this.peakData = data;\n    }\n  }, {\n    key: 'calculatePeaks',\n    value: function calculatePeaks(samplesPerPixel, sampleRate) {\n      var cueIn = (0, _conversions.secondsToSamples)(this.cueIn, sampleRate);\n      var cueOut = (0, _conversions.secondsToSamples)(this.cueOut, sampleRate);\n\n      this.setPeaks((0, _webaudioPeaks2.default)(this.buffer, samplesPerPixel, this.peakData.mono, cueIn, cueOut));\n    }\n  }, {\n    key: 'setPeaks',\n    value: function setPeaks(peaks) {\n      this.peaks = peaks;\n    }\n  }, {\n    key: 'setState',\n    value: function setState(state) {\n      this.state = state;\n\n      if (this.state && this.enabledStates[this.state]) {\n        var StateClass = _states2.default[this.state];\n        this.stateObj = new StateClass(this);\n      } else {\n        this.stateObj = undefined;\n      }\n    }\n  }, {\n    key: 'getStartTime',\n    value: function getStartTime() {\n      return this.startTime;\n    }\n  }, {\n    key: 'getEndTime',\n    value: function getEndTime() {\n      return this.endTime;\n    }\n  }, {\n    key: 'getDuration',\n    value: function getDuration() {\n      return this.duration;\n    }\n  }, {\n    key: 'isPlaying',\n    value: function isPlaying() {\n      return this.playout.isPlaying();\n    }\n  }, {\n    key: 'setShouldPlay',\n    value: function setShouldPlay(bool) {\n      this.playout.setShouldPlay(bool);\n    }\n  }, {\n    key: 'setGainLevel',\n    value: function setGainLevel(level) {\n      this.gain = level;\n      this.playout.setVolumeGainLevel(level);\n    }\n  }, {\n    key: 'setMasterGainLevel',\n    value: function setMasterGainLevel(level) {\n      this.playout.setMasterGainLevel(level);\n    }\n  }, {\n    key: 'setStereoPanValue',\n    value: function setStereoPanValue(value) {\n      this.stereoPan = value;\n      this.playout.setStereoPanValue(value);\n    }\n\n    /*\n      startTime, endTime in seconds (float).\n      segment is for a highlighted section in the UI.\n       returns a Promise that will resolve when the AudioBufferSource\n      is either stopped or plays out naturally.\n    */\n\n  }, {\n    key: 'schedulePlay',\n    value: function schedulePlay(now, startTime, endTime, config) {\n      var start = void 0;\n      var duration = void 0;\n      var when = now;\n      var segment = endTime ? endTime - startTime : undefined;\n\n      var defaultOptions = {\n        shouldPlay: true,\n        masterGain: 1,\n        isOffline: false\n      };\n\n      var options = (0, _lodash2.default)({}, defaultOptions, config);\n      var playoutSystem = options.isOffline ? this.offlinePlayout : this.playout;\n\n      // 1) track has no content to play.\n      // 2) track does not play in this selection.\n      if (this.endTime <= startTime || segment && startTime + segment < this.startTime) {\n        // return a resolved promise since this track is technically \"stopped\".\n        return Promise.resolve();\n      }\n\n      // track should have something to play if it gets here.\n\n      // the track starts in the future or on the cursor position\n      if (this.startTime >= startTime) {\n        start = 0;\n        // schedule additional delay for this audio node.\n        when += this.startTime - startTime;\n\n        if (endTime) {\n          segment -= this.startTime - startTime;\n          duration = Math.min(segment, this.duration);\n        } else {\n          duration = this.duration;\n        }\n      } else {\n        start = startTime - this.startTime;\n\n        if (endTime) {\n          duration = Math.min(segment, this.duration - start);\n        } else {\n          duration = this.duration - start;\n        }\n      }\n\n      start += this.cueIn;\n      var relPos = startTime - this.startTime;\n      var sourcePromise = playoutSystem.setUpSource();\n\n      // param relPos: cursor position in seconds relative to this track.\n      // can be negative if the cursor is placed before the start of this track etc.\n      (0, _lodash4.default)(this.fades, function (fade) {\n        var fadeStart = void 0;\n        var fadeDuration = void 0;\n\n        // only apply fade if it's ahead of the cursor.\n        if (relPos < fade.end) {\n          if (relPos <= fade.start) {\n            fadeStart = now + (fade.start - relPos);\n            fadeDuration = fade.end - fade.start;\n          } else if (relPos > fade.start && relPos < fade.end) {\n            fadeStart = now - (relPos - fade.start);\n            fadeDuration = fade.end - fade.start;\n          }\n\n          switch (fade.type) {\n            case _fadeMaker.FADEIN:\n              {\n                playoutSystem.applyFadeIn(fadeStart, fadeDuration, fade.shape);\n                break;\n              }\n            case _fadeMaker.FADEOUT:\n              {\n                playoutSystem.applyFadeOut(fadeStart, fadeDuration, fade.shape);\n                break;\n              }\n            default:\n              {\n                throw new Error('Invalid fade type saved on track.');\n              }\n          }\n        }\n      });\n\n      playoutSystem.setVolumeGainLevel(this.gain);\n      playoutSystem.setShouldPlay(options.shouldPlay);\n      playoutSystem.setMasterGainLevel(options.masterGain);\n      playoutSystem.setStereoPanValue(this.stereoPan);\n      playoutSystem.play(when, start, duration);\n\n      return sourcePromise;\n    }\n  }, {\n    key: 'scheduleStop',\n    value: function scheduleStop() {\n      var when = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.playout.stop(when);\n    }\n  }, {\n    key: 'renderOverlay',\n    value: function renderOverlay(data) {\n      var _this = this;\n\n      var channelPixels = (0, _conversions.secondsToPixels)(data.playlistLength, data.resolution, data.sampleRate);\n\n      var config = {\n        attributes: {\n          style: 'position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ' + channelPixels + 'px; z-index: 9;'\n        }\n      };\n\n      var overlayClass = '';\n\n      if (this.stateObj) {\n        this.stateObj.setup(data.resolution, data.sampleRate);\n        var StateClass = _states2.default[this.state];\n        var events = StateClass.getEvents();\n\n        events.forEach(function (event) {\n          config['on' + event] = _this.stateObj[event].bind(_this.stateObj);\n        });\n\n        overlayClass = StateClass.getClass();\n      }\n      // use this overlay for track event cursor position calculations.\n      return (0, _h2.default)('div.playlist-overlay' + overlayClass, config);\n    }\n  }, {\n    key: 'renderControls',\n    value: function renderControls(data) {\n      var _this2 = this;\n\n      var muteClass = data.muted ? '.active' : '';\n      var soloClass = data.soloed ? '.active' : '';\n      var numChan = this.peaks.data.length;\n\n      return (0, _h2.default)('div.controls', {\n        attributes: {\n          style: 'height: ' + numChan * data.height + 'px; width: ' + data.controls.width + 'px; position: absolute; left: 0; z-index: 10;'\n        }\n      }, [(0, _h2.default)('header', [this.name]), (0, _h2.default)('div.btn-group', [(0, _h2.default)('span.btn.btn-default.btn-xs.btn-mute' + muteClass, {\n        onclick: function onclick() {\n          _this2.ee.emit('mute', _this2);\n        }\n      }, ['Mute']), (0, _h2.default)('span.btn.btn-default.btn-xs.btn-solo' + soloClass, {\n        onclick: function onclick() {\n          _this2.ee.emit('solo', _this2);\n        }\n      }, ['Solo'])]), (0, _h2.default)('label', [(0, _h2.default)('input.volume-slider', {\n        attributes: {\n          type: 'range',\n          min: 0,\n          max: 100,\n          value: 100\n        },\n        hook: new _VolumeSliderHook2.default(this.gain),\n        oninput: function oninput(e) {\n          _this2.ee.emit('volumechange', e.target.value, _this2);\n        }\n      })])]);\n    }\n  }, {\n    key: 'render',\n    value: function render(data) {\n      var _this3 = this;\n\n      var width = this.peaks.length;\n      var playbackX = (0, _conversions.secondsToPixels)(data.playbackSeconds, data.resolution, data.sampleRate);\n      var startX = (0, _conversions.secondsToPixels)(this.startTime, data.resolution, data.sampleRate);\n      var endX = (0, _conversions.secondsToPixels)(this.endTime, data.resolution, data.sampleRate);\n      var progressWidth = 0;\n      var numChan = this.peaks.data.length;\n      var scale = window.devicePixelRatio;\n\n      if (playbackX > 0 && playbackX > startX) {\n        if (playbackX < endX) {\n          progressWidth = playbackX - startX;\n        } else {\n          progressWidth = width;\n        }\n      }\n\n      var waveformChildren = [(0, _h2.default)('div.cursor', {\n        attributes: {\n          style: 'position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ' + playbackX + 'px; bottom: 0; z-index: 5;'\n        }\n      })];\n\n      var channels = Object.keys(this.peaks.data).map(function (channelNum) {\n        var channelChildren = [(0, _h2.default)('div.channel-progress', {\n          attributes: {\n            style: 'position: absolute; width: ' + progressWidth + 'px; height: ' + data.height + 'px; z-index: 2;'\n          }\n        })];\n        var offset = 0;\n        var totalWidth = width;\n        var peaks = _this3.peaks.data[channelNum];\n\n        while (totalWidth > 0) {\n          var currentWidth = Math.min(totalWidth, MAX_CANVAS_WIDTH);\n          var canvasColor = _this3.waveOutlineColor ? _this3.waveOutlineColor : data.colors.waveOutlineColor;\n\n          channelChildren.push((0, _h2.default)('canvas', {\n            attributes: {\n              width: currentWidth * scale,\n              height: data.height * scale,\n              style: 'float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ' + currentWidth + 'px; height: ' + data.height + 'px;'\n            },\n            hook: new _CanvasHook2.default(peaks, offset, _this3.peaks.bits, canvasColor, scale)\n          }));\n\n          totalWidth -= currentWidth;\n          offset += MAX_CANVAS_WIDTH;\n        }\n\n        // if there are fades, display them.\n        if (_this3.fadeIn) {\n          var fadeIn = _this3.fades[_this3.fadeIn];\n          var fadeWidth = (0, _conversions.secondsToPixels)(fadeIn.end - fadeIn.start, data.resolution, data.sampleRate);\n\n          channelChildren.push((0, _h2.default)('div.wp-fade.wp-fadein', {\n            attributes: {\n              style: 'position: absolute; height: ' + data.height + 'px; width: ' + fadeWidth + 'px; top: 0; left: 0; z-index: 4;'\n            }\n          }, [(0, _h2.default)('canvas', {\n            attributes: {\n              width: fadeWidth,\n              height: data.height\n            },\n            hook: new _FadeCanvasHook2.default(fadeIn.type, fadeIn.shape, fadeIn.end - fadeIn.start, data.resolution)\n          })]));\n        }\n\n        if (_this3.fadeOut) {\n          var fadeOut = _this3.fades[_this3.fadeOut];\n          var _fadeWidth = (0, _conversions.secondsToPixels)(fadeOut.end - fadeOut.start, data.resolution, data.sampleRate);\n\n          channelChildren.push((0, _h2.default)('div.wp-fade.wp-fadeout', {\n            attributes: {\n              style: 'position: absolute; height: ' + data.height + 'px; width: ' + _fadeWidth + 'px; top: 0; right: 0; z-index: 4;'\n            }\n          }, [(0, _h2.default)('canvas', {\n            attributes: {\n              width: _fadeWidth,\n              height: data.height\n            },\n            hook: new _FadeCanvasHook2.default(fadeOut.type, fadeOut.shape, fadeOut.end - fadeOut.start, data.resolution)\n          })]));\n        }\n\n        return (0, _h2.default)('div.channel.channel-' + channelNum, {\n          attributes: {\n            style: 'height: ' + data.height + 'px; width: ' + width + 'px; top: ' + channelNum * data.height + 'px; left: ' + startX + 'px; position: absolute; margin: 0; padding: 0; z-index: 1;'\n          }\n        }, channelChildren);\n      });\n\n      waveformChildren.push(channels);\n      waveformChildren.push(this.renderOverlay(data));\n\n      // draw cursor selection on active track.\n      if (data.isActive === true) {\n        var cStartX = (0, _conversions.secondsToPixels)(data.timeSelection.start, data.resolution, data.sampleRate);\n        var cEndX = (0, _conversions.secondsToPixels)(data.timeSelection.end, data.resolution, data.sampleRate);\n        var cWidth = cEndX - cStartX + 1;\n        var cClassName = cWidth > 1 ? '.segment' : '.point';\n\n        waveformChildren.push((0, _h2.default)('div.selection' + cClassName, {\n          attributes: {\n            style: 'position: absolute; width: ' + cWidth + 'px; bottom: 0; top: 0; left: ' + cStartX + 'px; z-index: 4;'\n          }\n        }));\n      }\n\n      var waveform = (0, _h2.default)('div.waveform', {\n        attributes: {\n          style: 'height: ' + numChan * data.height + 'px; position: relative;'\n        }\n      }, waveformChildren);\n\n      var channelChildren = [];\n      var channelMargin = 0;\n\n      if (data.controls.show) {\n        channelChildren.push(this.renderControls(data));\n        channelMargin = data.controls.width;\n      }\n\n      channelChildren.push(waveform);\n\n      var audibleClass = data.shouldPlay ? '' : '.silent';\n      var customClass = this.customClass === undefined ? '' : '.' + this.customClass;\n\n      return (0, _h2.default)('div.channel-wrapper' + audibleClass + customClass, {\n        attributes: {\n          style: 'margin-left: ' + channelMargin + 'px; height: ' + data.height * numChan + 'px;'\n        }\n      }, channelChildren);\n    }\n  }, {\n    key: 'getTrackDetails',\n    value: function getTrackDetails() {\n      var info = {\n        src: this.src,\n        start: this.startTime,\n        end: this.endTime,\n        name: this.name,\n        customClass: this.customClass,\n        cuein: this.cueIn,\n        cueout: this.cueOut\n      };\n\n      if (this.fadeIn) {\n        var fadeIn = this.fades[this.fadeIn];\n\n        info.fadeIn = {\n          shape: fadeIn.shape,\n          duration: fadeIn.end - fadeIn.start\n        };\n      }\n\n      if (this.fadeOut) {\n        var fadeOut = this.fades[this.fadeOut];\n\n        info.fadeOut = {\n          shape: fadeOut.shape,\n          duration: fadeOut.end - fadeOut.start\n        };\n      }\n\n      return info;\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fadeMaker = require('fade-maker');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(ac, buffer) {\n    _classCallCheck(this, _class);\n\n    this.ac = ac;\n    this.gain = 1;\n    this.buffer = buffer;\n    this.destination = this.ac.destination;\n    this.ac.createStereoPanner = ac.createStereoPanner || ac.createPanner;\n  }\n\n  _createClass(_class, [{\n    key: 'applyFade',\n    value: function applyFade(type, start, duration) {\n      var shape = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'logarithmic';\n\n      if (type === _fadeMaker.FADEIN) {\n        (0, _fadeMaker.createFadeIn)(this.fadeGain.gain, shape, start, duration);\n      } else if (type === _fadeMaker.FADEOUT) {\n        (0, _fadeMaker.createFadeOut)(this.fadeGain.gain, shape, start, duration);\n      } else {\n        throw new Error('Unsupported fade type');\n      }\n    }\n  }, {\n    key: 'applyFadeIn',\n    value: function applyFadeIn(start, duration) {\n      var shape = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'logarithmic';\n\n      this.applyFade(_fadeMaker.FADEIN, start, duration, shape);\n    }\n  }, {\n    key: 'applyFadeOut',\n    value: function applyFadeOut(start, duration) {\n      var shape = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'logarithmic';\n\n      this.applyFade(_fadeMaker.FADEOUT, start, duration, shape);\n    }\n  }, {\n    key: 'isPlaying',\n    value: function isPlaying() {\n      return this.source !== undefined;\n    }\n  }, {\n    key: 'getDuration',\n    value: function getDuration() {\n      return this.buffer.duration;\n    }\n  }, {\n    key: 'setAudioContext',\n    value: function setAudioContext(ac) {\n      this.ac = ac;\n      this.ac.createStereoPanner = ac.createStereoPanner || ac.createPanner;\n      this.destination = this.ac.destination;\n    }\n  }, {\n    key: 'setUpSource',\n    value: function setUpSource() {\n      var _this = this;\n\n      this.source = this.ac.createBufferSource();\n      this.source.buffer = this.buffer;\n\n      var sourcePromise = new Promise(function (resolve) {\n        // keep track of the buffer state.\n        _this.source.onended = function () {\n          _this.source.disconnect();\n          _this.fadeGain.disconnect();\n          _this.volumeGain.disconnect();\n          _this.shouldPlayGain.disconnect();\n          _this.panner.disconnect();\n          _this.masterGain.disconnect();\n\n          _this.source = undefined;\n          _this.fadeGain = undefined;\n          _this.volumeGain = undefined;\n          _this.shouldPlayGain = undefined;\n          _this.panner = undefined;\n          _this.masterGain = undefined;\n\n          resolve();\n        };\n      });\n\n      this.fadeGain = this.ac.createGain();\n      // used for track volume slider\n      this.volumeGain = this.ac.createGain();\n      // used for solo/mute\n      this.shouldPlayGain = this.ac.createGain();\n      this.masterGain = this.ac.createGain();\n\n      this.panner = this.ac.createStereoPanner();\n\n      this.source.connect(this.fadeGain);\n      this.fadeGain.connect(this.volumeGain);\n      this.volumeGain.connect(this.shouldPlayGain);\n      this.shouldPlayGain.connect(this.masterGain);\n      this.masterGain.connect(this.panner);\n      this.panner.connect(this.destination);\n\n      return sourcePromise;\n    }\n  }, {\n    key: 'setVolumeGainLevel',\n    value: function setVolumeGainLevel(level) {\n      if (this.volumeGain) {\n        this.volumeGain.gain.value = level;\n      }\n    }\n  }, {\n    key: 'setShouldPlay',\n    value: function setShouldPlay(bool) {\n      if (this.shouldPlayGain) {\n        this.shouldPlayGain.gain.value = bool ? 1 : 0;\n      }\n    }\n  }, {\n    key: 'setMasterGainLevel',\n    value: function setMasterGainLevel(level) {\n      if (this.masterGain) {\n        this.masterGain.gain.value = level;\n      }\n    }\n  }, {\n    key: 'setStereoPanValue',\n    value: function setStereoPanValue(value) {\n      var pan = value === undefined ? 0 : value;\n\n      if (this.panner) {\n        if (this.panner.pan !== undefined) {\n          this.panner.pan.value = pan;\n        } else {\n          this.panner.panningModel = 'equalpower';\n          this.panner.setPosition(pan, 0, 1 - Math.abs(pan));\n        }\n      }\n    }\n\n    /*\n      source.start is picky when passing the end time.\n      If rounding error causes a number to make the source think\n      it is playing slightly more samples than it has it won't play at all.\n      Unfortunately it doesn't seem to work if you just give it a start time.\n    */\n\n  }, {\n    key: 'play',\n    value: function play(when, start, duration) {\n      this.source.start(when, start, duration);\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var when = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (this.source) {\n        this.source.stop(when);\n      }\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (aeneas) {\n  var annotation = {\n    id: aeneas.id || _uuid2.default.v4(),\n    start: Number(aeneas.begin) || 0,\n    end: Number(aeneas.end) || 0,\n    lines: aeneas.lines || [''],\n    lang: aeneas.language || 'en'\n  };\n\n  return annotation;\n};\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (annotation) {\n  return {\n    begin: String(annotation.start.toFixed(3)),\n    end: String(annotation.end.toFixed(3)),\n    id: String(annotation.id),\n    language: annotation.lang,\n    lines: annotation.lines\n  };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _conversions = require('../utils/conversions');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class(playlist) {\n    var _this = this;\n\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, _class);\n\n    this.playlist = playlist;\n    this.data = data;\n    this.active = false;\n\n    this.ondragover = function (e) {\n      if (_this.active) {\n        e.preventDefault();\n        _this.emitDrag(e.clientX);\n      }\n    };\n  }\n\n  _createClass(_class, [{\n    key: 'emitDrag',\n    value: function emitDrag(x) {\n      var deltaX = x - this.prevX;\n\n      // emit shift event if not 0\n      if (deltaX) {\n        var deltaTime = (0, _conversions.pixelsToSeconds)(deltaX, this.playlist.samplesPerPixel, this.playlist.sampleRate);\n        this.prevX = x;\n        this.playlist.ee.emit('dragged', deltaTime, this.data);\n      }\n    }\n  }, {\n    key: 'complete',\n    value: function complete() {\n      this.active = false;\n      document.removeEventListener('dragover', this.ondragover);\n    }\n  }, {\n    key: 'dragstart',\n    value: function dragstart(e) {\n      var ev = e;\n      this.active = true;\n      this.prevX = e.clientX;\n\n      ev.dataTransfer.dropEffect = 'move';\n      ev.dataTransfer.effectAllowed = 'move';\n      ev.dataTransfer.setData('text/plain', '');\n      document.addEventListener('dragover', this.ondragover);\n    }\n  }, {\n    key: 'dragend',\n    value: function dragend(e) {\n      if (this.active) {\n        e.preventDefault();\n        this.complete();\n      }\n    }\n  }], [{\n    key: 'getClass',\n    value: function getClass() {\n      return '.shift';\n    }\n  }, {\n    key: 'getEvents',\n    value: function getEvents() {\n      return ['dragstart', 'dragend'];\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*\n* virtual-dom hook for scrolling to the text annotation.\n*/\nvar Hook = function ScrollTopHook() {};\nHook.prototype.hook = function hook(node) {\n  var el = node.querySelector('.current');\n  if (el) {\n    var box = node.getBoundingClientRect();\n    var row = el.getBoundingClientRect();\n    var diff = row.top - box.top;\n    var list = node;\n    list.scrollTop += diff;\n  }\n};\n\nexports.default = Hook;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (format) {\n  function clockFormat(seconds, decimals) {\n    var hours = parseInt(seconds / 3600, 10) % 24;\n    var minutes = parseInt(seconds / 60, 10) % 60;\n    var secs = (seconds % 60).toFixed(decimals);\n\n    var sHours = hours < 10 ? '0' + hours : hours;\n    var sMinutes = minutes < 10 ? '0' + minutes : minutes;\n    var sSeconds = secs < 10 ? '0' + secs : secs;\n\n    return sHours + ':' + sMinutes + ':' + sSeconds;\n  }\n\n  var formats = {\n    seconds: function seconds(_seconds) {\n      return _seconds.toFixed(0);\n    },\n    thousandths: function thousandths(seconds) {\n      return seconds.toFixed(3);\n    },\n\n    'hh:mm:ss': function hhmmss(seconds) {\n      return clockFormat(seconds, 0);\n    },\n    'hh:mm:ss.u': function hhmmssu(seconds) {\n      return clockFormat(seconds, 1);\n    },\n    'hh:mm:ss.uu': function hhmmssuu(seconds) {\n      return clockFormat(seconds, 2);\n    },\n    'hh:mm:ss.uuu': function hhmmssuuu(seconds) {\n      return clockFormat(seconds, 3);\n    }\n  };\n\n  return formats[format];\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _aeneas = require('./input/aeneas');\n\nvar _aeneas2 = _interopRequireDefault(_aeneas);\n\nvar _aeneas3 = require('./output/aeneas');\n\nvar _aeneas4 = _interopRequireDefault(_aeneas3);\n\nvar _conversions = require('../utils/conversions');\n\nvar _DragInteraction = require('../interaction/DragInteraction');\n\nvar _DragInteraction2 = _interopRequireDefault(_DragInteraction);\n\nvar _ScrollTopHook = require('./render/ScrollTopHook');\n\nvar _ScrollTopHook2 = _interopRequireDefault(_ScrollTopHook);\n\nvar _timeformat = require('../utils/timeformat');\n\nvar _timeformat2 = _interopRequireDefault(_timeformat);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AnnotationList = function () {\n  function AnnotationList(playlist, annotations) {\n    var controls = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var editable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    var linkEndpoints = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    var isContinuousPlay = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n\n    _classCallCheck(this, AnnotationList);\n\n    this.playlist = playlist;\n    this.resizeHandlers = [];\n    this.editable = editable;\n    this.annotations = annotations.map(function (a) {\n      return (\n        // TODO support different formats later on.\n        (0, _aeneas2.default)(a)\n      );\n    });\n    this.setupInteractions();\n\n    this.controls = controls;\n    this.setupEE(playlist.ee);\n\n    // TODO actually make a real plugin system that's not terrible.\n    this.playlist.isContinuousPlay = isContinuousPlay;\n    this.playlist.linkEndpoints = linkEndpoints;\n    this.length = this.annotations.length;\n  }\n\n  _createClass(AnnotationList, [{\n    key: 'setupInteractions',\n    value: function setupInteractions() {\n      var _this = this;\n\n      this.annotations.forEach(function (a, i) {\n        var leftShift = new _DragInteraction2.default(_this.playlist, {\n          direction: 'left',\n          index: i\n        });\n        var rightShift = new _DragInteraction2.default(_this.playlist, {\n          direction: 'right',\n          index: i\n        });\n\n        _this.resizeHandlers.push(leftShift);\n        _this.resizeHandlers.push(rightShift);\n      });\n    }\n  }, {\n    key: 'setupEE',\n    value: function setupEE(ee) {\n      var _this2 = this;\n\n      ee.on('dragged', function (deltaTime, data) {\n        var annotationIndex = data.index;\n        var annotations = _this2.annotations;\n        var note = annotations[annotationIndex];\n\n        // resizing to the left\n        if (data.direction === 'left') {\n          var originalVal = note.start;\n          note.start += deltaTime;\n\n          if (note.start < 0) {\n            note.start = 0;\n          }\n\n          if (annotationIndex && annotations[annotationIndex - 1].end > note.start) {\n            annotations[annotationIndex - 1].end = note.start;\n          }\n\n          if (_this2.playlist.linkEndpoints && annotationIndex && annotations[annotationIndex - 1].end === originalVal) {\n            annotations[annotationIndex - 1].end = note.start;\n          }\n        } else {\n          // resizing to the right\n          var _originalVal = note.end;\n          note.end += deltaTime;\n\n          if (note.end > _this2.playlist.duration) {\n            note.end = _this2.playlist.duration;\n          }\n\n          if (annotationIndex < annotations.length - 1 && annotations[annotationIndex + 1].start < note.end) {\n            annotations[annotationIndex + 1].start = note.end;\n          }\n\n          if (_this2.playlist.linkEndpoints && annotationIndex < annotations.length - 1 && annotations[annotationIndex + 1].start === _originalVal) {\n            annotations[annotationIndex + 1].start = note.end;\n          }\n        }\n\n        _this2.playlist.drawRequest();\n      });\n\n      ee.on('continuousplay', function (val) {\n        _this2.playlist.isContinuousPlay = val;\n      });\n\n      ee.on('linkendpoints', function (val) {\n        _this2.playlist.linkEndpoints = val;\n      });\n\n      ee.on('annotationsrequest', function () {\n        _this2.export();\n      });\n\n      return ee;\n    }\n  }, {\n    key: 'export',\n    value: function _export() {\n      var output = this.annotations.map(function (a) {\n        return (0, _aeneas4.default)(a);\n      });\n      var dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(output));\n      var a = document.createElement('a');\n\n      document.body.appendChild(a);\n      a.href = dataStr;\n      a.download = 'annotations.json';\n      a.click();\n      document.body.removeChild(a);\n    }\n  }, {\n    key: 'renderResizeLeft',\n    value: function renderResizeLeft(i) {\n      var events = _DragInteraction2.default.getEvents();\n      var config = { attributes: {\n          style: 'position: absolute; height: 30px; width: 10px; top: 0; left: -2px',\n          draggable: true\n        } };\n      var handler = this.resizeHandlers[i * 2];\n\n      events.forEach(function (event) {\n        config['on' + event] = handler[event].bind(handler);\n      });\n\n      return (0, _h2.default)('div.resize-handle.resize-w', config);\n    }\n  }, {\n    key: 'renderResizeRight',\n    value: function renderResizeRight(i) {\n      var events = _DragInteraction2.default.getEvents();\n      var config = { attributes: {\n          style: 'position: absolute; height: 30px; width: 10px; top: 0; right: -2px',\n          draggable: true\n        } };\n      var handler = this.resizeHandlers[i * 2 + 1];\n\n      events.forEach(function (event) {\n        config['on' + event] = handler[event].bind(handler);\n      });\n\n      return (0, _h2.default)('div.resize-handle.resize-e', config);\n    }\n  }, {\n    key: 'renderControls',\n    value: function renderControls(note, i) {\n      var _this3 = this;\n\n      // seems to be a bug with references, or I'm missing something.\n      var that = this;\n      return this.controls.map(function (ctrl) {\n        return (0, _h2.default)('i.' + ctrl.class, {\n          attributes: {\n            title: ctrl.title\n          },\n          onclick: function onclick() {\n            ctrl.action(note, i, that.annotations, {\n              linkEndpoints: that.playlist.linkEndpoints\n            });\n            _this3.setupInteractions();\n            that.playlist.drawRequest();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var boxes = (0, _h2.default)('div.annotations-boxes', {\n        attributes: {\n          style: 'height: 30px;'\n        }\n      }, this.annotations.map(function (note, i) {\n        var samplesPerPixel = _this4.playlist.samplesPerPixel;\n        var sampleRate = _this4.playlist.sampleRate;\n        var pixPerSec = sampleRate / samplesPerPixel;\n        var pixOffset = (0, _conversions.secondsToPixels)(_this4.playlist.scrollLeft, samplesPerPixel, sampleRate);\n        var left = Math.floor(note.start * pixPerSec - pixOffset);\n        var width = Math.ceil(note.end * pixPerSec - note.start * pixPerSec);\n\n        return (0, _h2.default)('div.annotation-box', {\n          attributes: {\n            style: 'position: absolute; height: 30px; width: ' + width + 'px; left: ' + left + 'px',\n            'data-id': note.id\n          }\n        }, [_this4.renderResizeLeft(i), (0, _h2.default)('span.id', {\n          onclick: function onclick() {\n            if (_this4.playlist.isContinuousPlay) {\n              _this4.playlist.ee.emit('play', _this4.annotations[i].start);\n            } else {\n              _this4.playlist.ee.emit('play', _this4.annotations[i].start, _this4.annotations[i].end);\n            }\n          }\n        }, [note.id]), _this4.renderResizeRight(i)]);\n      }));\n\n      var boxesWrapper = (0, _h2.default)('div.annotations-boxes-wrapper', {\n        attributes: {\n          style: 'overflow: hidden;'\n        }\n      }, [boxes]);\n\n      var text = (0, _h2.default)('div.annotations-text', {\n        hook: new _ScrollTopHook2.default()\n      }, this.annotations.map(function (note, i) {\n        var format = (0, _timeformat2.default)(_this4.playlist.durationFormat);\n        var start = format(note.start);\n        var end = format(note.end);\n\n        var segmentClass = '';\n        if (_this4.playlist.isPlaying() && _this4.playlist.playbackSeconds >= note.start && _this4.playlist.playbackSeconds <= note.end) {\n          segmentClass = '.current';\n        }\n\n        var editableConfig = {\n          attributes: {\n            contenteditable: true\n          },\n          oninput: function oninput(e) {\n            // needed currently for references\n            // eslint-disable-next-line no-param-reassign\n            note.lines = [e.target.innerText];\n          },\n          onkeypress: function onkeypress(e) {\n            if (e.which === 13 || e.keyCode === 13) {\n              e.target.blur();\n              e.preventDefault();\n            }\n          }\n        };\n\n        var linesConfig = _this4.editable ? editableConfig : {};\n\n        return (0, _h2.default)('div.annotation' + segmentClass, [(0, _h2.default)('span.annotation-id', [note.id]), (0, _h2.default)('span.annotation-start', [start]), (0, _h2.default)('span.annotation-end', [end]), (0, _h2.default)('span.annotation-lines', linesConfig, [note.lines]), (0, _h2.default)('span.annotation-actions', _this4.renderControls(note, i))]);\n      }));\n\n      return (0, _h2.default)('div.annotations', [boxesWrapper, text]);\n    }\n  }]);\n\n  return AnnotationList;\n}();\n\nexports.default = AnnotationList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  // http://jsperf.com/typed-array-min-max/2\n  // plain for loop for finding min/max is way faster than anything else.\n  /**\n  * @param {TypedArray} array - Subarray of audio to calculate peaks from.\n  */\n  function findMinMax(array) {\n    var min = Infinity;\n    var max = -Infinity;\n    var curr = void 0;\n\n    for (var i = 0; i < array.length; i += 1) {\n      curr = array[i];\n      if (min > curr) {\n        min = curr;\n      }\n      if (max < curr) {\n        max = curr;\n      }\n    }\n\n    return {\n      min: min,\n      max: max\n    };\n  }\n\n  /**\n  * @param {Number} n - peak to convert from float to Int8, Int16 etc.\n  * @param {Number} bits - convert to #bits two's complement signed integer\n  */\n  function convert(n, bits) {\n    var max = Math.pow(2, bits - 1);\n    var v = n < 0 ? n * max : n * max - 1;\n    return Math.max(-max, Math.min(max - 1, v));\n  }\n\n  /**\n  * @param {TypedArray} channel - Audio track frames to calculate peaks from.\n  * @param {Number} samplesPerPixel - Audio frames per peak\n  */\n  function extractPeaks(channel, samplesPerPixel, bits) {\n    var chanLength = channel.length;\n    var numPeaks = Math.ceil(chanLength / samplesPerPixel);\n    var start = void 0;\n    var end = void 0;\n    var segment = void 0;\n    var max = void 0;\n    var min = void 0;\n    var extrema = void 0;\n\n    // create interleaved array of min,max\n    var peaks = new self['Int' + bits + 'Array'](numPeaks * 2);\n\n    for (var i = 0; i < numPeaks; i += 1) {\n      start = i * samplesPerPixel;\n      end = (i + 1) * samplesPerPixel > chanLength ? chanLength : (i + 1) * samplesPerPixel;\n\n      segment = channel.subarray(start, end);\n      extrema = findMinMax(segment);\n      min = convert(extrema.min, bits);\n      max = convert(extrema.max, bits);\n\n      peaks[i * 2] = min;\n      peaks[i * 2 + 1] = max;\n    }\n\n    return peaks;\n  }\n\n  /**\n  * @param {TypedArray} source - Source of audio samples for peak calculations.\n  * @param {Number} samplesPerPixel - Number of audio samples per peak.\n  * @param {Number} cueIn - index in channel to start peak calculations from.\n  * @param {Number} cueOut - index in channel to end peak calculations from (non-inclusive).\n  */\n  function audioPeaks(source) {\n    var samplesPerPixel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10000;\n    var bits = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 8;\n\n    if ([8, 16, 32].indexOf(bits) < 0) {\n      throw new Error('Invalid number of bits specified for peaks.');\n    }\n\n    var peaks = [];\n    var start = 0;\n    var end = source.length;\n    peaks.push(extractPeaks(source.subarray(start, end), samplesPerPixel, bits));\n\n    var length = peaks[0].length / 2;\n\n    return {\n      bits: bits,\n      length: length,\n      data: peaks\n    };\n  }\n\n  onmessage = function onmessage(e) {\n    var peaks = audioPeaks(e.data.samples, e.data.samplesPerPixel);\n\n    postMessage(peaks);\n  };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  var recLength = 0;\n  var recBuffersL = [];\n  var recBuffersR = [];\n  var sampleRate = void 0;\n\n  function init(config) {\n    sampleRate = config.sampleRate;\n  }\n\n  function record(inputBuffer) {\n    recBuffersL.push(inputBuffer[0]);\n    recBuffersR.push(inputBuffer[1]);\n    recLength += inputBuffer[0].length;\n  }\n\n  function writeString(view, offset, string) {\n    for (var i = 0; i < string.length; i += 1) {\n      view.setUint8(offset + i, string.charCodeAt(i));\n    }\n  }\n\n  function floatTo16BitPCM(output, offset, input) {\n    var writeOffset = offset;\n    for (var i = 0; i < input.length; i += 1, writeOffset += 2) {\n      var s = Math.max(-1, Math.min(1, input[i]));\n      output.setInt16(writeOffset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n    }\n  }\n\n  function encodeWAV(samples) {\n    var mono = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    var buffer = new ArrayBuffer(44 + samples.length * 2);\n    var view = new DataView(buffer);\n\n    /* RIFF identifier */\n    writeString(view, 0, 'RIFF');\n    /* file length */\n    view.setUint32(4, 32 + samples.length * 2, true);\n    /* RIFF type */\n    writeString(view, 8, 'WAVE');\n    /* format chunk identifier */\n    writeString(view, 12, 'fmt ');\n    /* format chunk length */\n    view.setUint32(16, 16, true);\n    /* sample format (raw) */\n    view.setUint16(20, 1, true);\n    /* channel count */\n    view.setUint16(22, mono ? 1 : 2, true);\n    /* sample rate */\n    view.setUint32(24, sampleRate, true);\n    /* byte rate (sample rate * block align) */\n    view.setUint32(28, sampleRate * 4, true);\n    /* block align (channel count * bytes per sample) */\n    view.setUint16(32, 4, true);\n    /* bits per sample */\n    view.setUint16(34, 16, true);\n    /* data chunk identifier */\n    writeString(view, 36, 'data');\n    /* data chunk length */\n    view.setUint32(40, samples.length * 2, true);\n\n    floatTo16BitPCM(view, 44, samples);\n\n    return view;\n  }\n\n  function mergeBuffers(recBuffers, length) {\n    var result = new Float32Array(length);\n    var offset = 0;\n\n    for (var i = 0; i < recBuffers.length; i += 1) {\n      result.set(recBuffers[i], offset);\n      offset += recBuffers[i].length;\n    }\n    return result;\n  }\n\n  function interleave(inputL, inputR) {\n    var length = inputL.length + inputR.length;\n    var result = new Float32Array(length);\n\n    var index = 0;\n    var inputIndex = 0;\n\n    while (index < length) {\n      result[index += 1] = inputL[inputIndex];\n      result[index += 1] = inputR[inputIndex];\n      inputIndex += 1;\n    }\n\n    return result;\n  }\n\n  function exportWAV(type) {\n    var bufferL = mergeBuffers(recBuffersL, recLength);\n    var bufferR = mergeBuffers(recBuffersR, recLength);\n    var interleaved = interleave(bufferL, bufferR);\n    var dataview = encodeWAV(interleaved);\n    var audioBlob = new Blob([dataview], { type: type });\n\n    postMessage(audioBlob);\n  }\n\n  function clear() {\n    recLength = 0;\n    recBuffersL = [];\n    recBuffersR = [];\n  }\n\n  onmessage = function onmessage(e) {\n    switch (e.data.command) {\n      case 'init':\n        {\n          init(e.data.config);\n          break;\n        }\n      case 'record':\n        {\n          record(e.data.buffer);\n          break;\n        }\n      case 'exportWAV':\n        {\n          exportWAV(e.data.type);\n          break;\n        }\n      case 'clear':\n        {\n          clear();\n          break;\n        }\n      default:\n        {\n          throw new Error('Unknown export worker command');\n        }\n    }\n  };\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash.defaults');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _diff = require('virtual-dom/diff');\n\nvar _diff2 = _interopRequireDefault(_diff);\n\nvar _patch = require('virtual-dom/patch');\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nvar _inlineWorker = require('inline-worker');\n\nvar _inlineWorker2 = _interopRequireDefault(_inlineWorker);\n\nvar _conversions = require('./utils/conversions');\n\nvar _LoaderFactory = require('./track/loader/LoaderFactory');\n\nvar _LoaderFactory2 = _interopRequireDefault(_LoaderFactory);\n\nvar _ScrollHook = require('./render/ScrollHook');\n\nvar _ScrollHook2 = _interopRequireDefault(_ScrollHook);\n\nvar _TimeScale = require('./TimeScale');\n\nvar _TimeScale2 = _interopRequireDefault(_TimeScale);\n\nvar _Track = require('./Track');\n\nvar _Track2 = _interopRequireDefault(_Track);\n\nvar _Playout = require('./Playout');\n\nvar _Playout2 = _interopRequireDefault(_Playout);\n\nvar _AnnotationList = require('./annotation/AnnotationList');\n\nvar _AnnotationList2 = _interopRequireDefault(_AnnotationList);\n\nvar _recorderWorker = require('./utils/recorderWorker');\n\nvar _recorderWorker2 = _interopRequireDefault(_recorderWorker);\n\nvar _exportWavWorker = require('./utils/exportWavWorker');\n\nvar _exportWavWorker2 = _interopRequireDefault(_exportWavWorker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _class = function () {\n  function _class() {\n    _classCallCheck(this, _class);\n\n    this.tracks = [];\n    this.soloedTracks = [];\n    this.mutedTracks = [];\n    this.playoutPromises = [];\n\n    this.cursor = 0;\n    this.playbackSeconds = 0;\n    this.duration = 0;\n    this.scrollLeft = 0;\n    this.scrollTimer = undefined;\n    this.showTimescale = false;\n    // whether a user is scrolling the waveform\n    this.isScrolling = false;\n\n    this.fadeType = 'logarithmic';\n    this.masterGain = 1;\n    this.annotations = [];\n    this.durationFormat = 'hh:mm:ss.uuu';\n    this.isAutomaticScroll = false;\n    this.resetDrawTimer = undefined;\n  }\n\n  // TODO extract into a plugin\n\n\n  _createClass(_class, [{\n    key: 'initExporter',\n    value: function initExporter() {\n      this.exportWorker = new _inlineWorker2.default(_exportWavWorker2.default);\n    }\n\n    // TODO extract into a plugin\n\n  }, {\n    key: 'initRecorder',\n    value: function initRecorder(stream) {\n      var _this = this;\n\n      this.mediaRecorder = new window.MediaRecorder(stream);\n\n      this.mediaRecorder.onstart = function () {\n        var track = new _Track2.default();\n        track.setName('Recording');\n        track.setEnabledStates();\n        track.setEventEmitter(_this.ee);\n\n        _this.recordingTrack = track;\n        _this.tracks.push(track);\n\n        _this.chunks = [];\n        _this.working = false;\n      };\n\n      this.mediaRecorder.ondataavailable = function (e) {\n        _this.chunks.push(e.data);\n\n        // throttle peaks calculation\n        if (!_this.working) {\n          var recording = new Blob(_this.chunks, { type: 'audio/ogg; codecs=opus' });\n          var loader = _LoaderFactory2.default.createLoader(recording, _this.ac);\n          loader.load().then(function (audioBuffer) {\n            // ask web worker for peaks.\n            _this.recorderWorker.postMessage({\n              samples: audioBuffer.getChannelData(0),\n              samplesPerPixel: _this.samplesPerPixel\n            });\n            _this.recordingTrack.setCues(0, audioBuffer.duration);\n            _this.recordingTrack.setBuffer(audioBuffer);\n            _this.recordingTrack.setPlayout(new _Playout2.default(_this.ac, audioBuffer));\n            _this.adjustDuration();\n          }).catch(function () {\n            _this.working = false;\n          });\n          _this.working = true;\n        }\n      };\n\n      this.mediaRecorder.onstop = function () {\n        _this.chunks = [];\n        _this.working = false;\n      };\n\n      this.recorderWorker = new _inlineWorker2.default(_recorderWorker2.default);\n      // use a worker for calculating recording peaks.\n      this.recorderWorker.onmessage = function (e) {\n        _this.recordingTrack.setPeaks(e.data);\n        _this.working = false;\n        _this.drawRequest();\n      };\n    }\n  }, {\n    key: 'setShowTimeScale',\n    value: function setShowTimeScale(show) {\n      this.showTimescale = show;\n    }\n  }, {\n    key: 'setMono',\n    value: function setMono(mono) {\n      this.mono = mono;\n    }\n  }, {\n    key: 'setExclSolo',\n    value: function setExclSolo(exclSolo) {\n      this.exclSolo = exclSolo;\n    }\n  }, {\n    key: 'setSeekStyle',\n    value: function setSeekStyle(style) {\n      this.seekStyle = style;\n    }\n  }, {\n    key: 'getSeekStyle',\n    value: function getSeekStyle() {\n      return this.seekStyle;\n    }\n  }, {\n    key: 'setSampleRate',\n    value: function setSampleRate(sampleRate) {\n      this.sampleRate = sampleRate;\n    }\n  }, {\n    key: 'setSamplesPerPixel',\n    value: function setSamplesPerPixel(samplesPerPixel) {\n      this.samplesPerPixel = samplesPerPixel;\n    }\n  }, {\n    key: 'setAudioContext',\n    value: function setAudioContext(ac) {\n      this.ac = ac;\n    }\n  }, {\n    key: 'setControlOptions',\n    value: function setControlOptions(controlOptions) {\n      this.controls = controlOptions;\n    }\n  }, {\n    key: 'setWaveHeight',\n    value: function setWaveHeight(height) {\n      this.waveHeight = height;\n    }\n  }, {\n    key: 'setColors',\n    value: function setColors(colors) {\n      this.colors = colors;\n    }\n  }, {\n    key: 'setAnnotations',\n    value: function setAnnotations(config) {\n      this.annotationList = new _AnnotationList2.default(this, config.annotations, config.controls, config.editable, config.linkEndpoints, config.isContinuousPlay);\n    }\n  }, {\n    key: 'setEventEmitter',\n    value: function setEventEmitter(ee) {\n      this.ee = ee;\n    }\n  }, {\n    key: 'getEventEmitter',\n    value: function getEventEmitter() {\n      return this.ee;\n    }\n  }, {\n    key: 'setUpEventEmitter',\n    value: function setUpEventEmitter() {\n      var _this2 = this;\n\n      var ee = this.ee;\n\n      ee.on('automaticscroll', function (val) {\n        _this2.isAutomaticScroll = val;\n      });\n\n      ee.on('durationformat', function (format) {\n        _this2.durationFormat = format;\n        _this2.drawRequest();\n      });\n\n      ee.on('select', function (start, end, track) {\n        if (_this2.isPlaying()) {\n          _this2.lastSeeked = start;\n          _this2.pausedAt = undefined;\n          _this2.restartPlayFrom(start);\n        } else {\n          // reset if it was paused.\n          _this2.seek(start, end, track);\n          _this2.ee.emit('timeupdate', start);\n          _this2.drawRequest();\n        }\n      });\n\n      ee.on('startaudiorendering', function (type) {\n        _this2.startOfflineRender(type);\n      });\n\n      ee.on('statechange', function (state) {\n        _this2.setState(state);\n        _this2.drawRequest();\n      });\n\n      ee.on('shift', function (deltaTime, track) {\n        track.setStartTime(track.getStartTime() + deltaTime);\n        _this2.adjustDuration();\n        _this2.drawRequest();\n      });\n\n      ee.on('record', function () {\n        _this2.record();\n      });\n\n      ee.on('play', function (start, end) {\n        _this2.play(start, end);\n      });\n\n      ee.on('pause', function () {\n        _this2.pause();\n      });\n\n      ee.on('stop', function () {\n        _this2.stop();\n      });\n\n      ee.on('rewind', function () {\n        _this2.rewind();\n      });\n\n      ee.on('fastforward', function () {\n        _this2.fastForward();\n      });\n\n      ee.on('clear', function () {\n        _this2.clear().then(function () {\n          _this2.drawRequest();\n        });\n      });\n\n      ee.on('solo', function (track) {\n        _this2.soloTrack(track);\n        _this2.adjustTrackPlayout();\n        _this2.drawRequest();\n      });\n\n      ee.on('mute', function (track) {\n        _this2.muteTrack(track);\n        _this2.adjustTrackPlayout();\n        _this2.drawRequest();\n      });\n\n      ee.on('volumechange', function (volume, track) {\n        track.setGainLevel(volume / 100);\n      });\n\n      ee.on('mastervolumechange', function (volume) {\n        _this2.masterGain = volume / 100;\n        _this2.tracks.forEach(function (track) {\n          track.setMasterGainLevel(_this2.masterGain);\n        });\n      });\n\n      ee.on('fadein', function (duration, track) {\n        track.setFadeIn(duration, _this2.fadeType);\n        _this2.drawRequest();\n      });\n\n      ee.on('fadeout', function (duration, track) {\n        track.setFadeOut(duration, _this2.fadeType);\n        _this2.drawRequest();\n      });\n\n      ee.on('stereopan', function (panvalue, track) {\n        track.setStereoPanValue(panvalue);\n      });\n\n      ee.on('fadetype', function (type) {\n        _this2.fadeType = type;\n      });\n\n      ee.on('newtrack', function (file) {\n        _this2.load([{\n          src: file,\n          name: file.name\n        }]);\n      });\n\n      ee.on('trim', function () {\n        var track = _this2.getActiveTrack();\n        var timeSelection = _this2.getTimeSelection();\n\n        track.trim(timeSelection.start, timeSelection.end);\n        track.calculatePeaks(_this2.samplesPerPixel, _this2.sampleRate);\n\n        _this2.setTimeSelection(0, 0);\n        _this2.drawRequest();\n      });\n\n      ee.on('zoomin', function () {\n        var zoomIndex = Math.max(0, _this2.zoomIndex - 1);\n        var zoom = _this2.zoomLevels[zoomIndex];\n\n        if (zoom !== _this2.samplesPerPixel) {\n          _this2.setZoom(zoom);\n          _this2.drawRequest();\n        }\n      });\n\n      ee.on('zoomout', function () {\n        var zoomIndex = Math.min(_this2.zoomLevels.length - 1, _this2.zoomIndex + 1);\n        var zoom = _this2.zoomLevels[zoomIndex];\n\n        if (zoom !== _this2.samplesPerPixel) {\n          _this2.setZoom(zoom);\n          _this2.drawRequest();\n        }\n      });\n\n      ee.on('scroll', function () {\n        _this2.isScrolling = true;\n        _this2.drawRequest();\n        clearTimeout(_this2.scrollTimer);\n        _this2.scrollTimer = setTimeout(function () {\n          _this2.isScrolling = false;\n        }, 200);\n      });\n    }\n  }, {\n    key: 'load',\n    value: function load(trackList) {\n      var _this3 = this;\n\n      var loadPromises = trackList.map(function (trackInfo) {\n        var loader = _LoaderFactory2.default.createLoader(trackInfo.src, _this3.ac, _this3.ee);\n        return loader.load();\n      });\n\n      return Promise.all(loadPromises).then(function (audioBuffers) {\n        _this3.ee.emit('audiosourcesloaded');\n\n        var tracks = audioBuffers.map(function (audioBuffer, index) {\n          var info = trackList[index];\n          var name = info.name || 'Untitled';\n          var start = info.start || 0;\n          var states = info.states || {};\n          var fadeIn = info.fadeIn;\n          var fadeOut = info.fadeOut;\n          var cueIn = info.cuein || 0;\n          var cueOut = info.cueout || audioBuffer.duration;\n          var gain = info.gain || 1;\n          var muted = info.muted || false;\n          var soloed = info.soloed || false;\n          var selection = info.selected;\n          var peaks = info.peaks || { type: 'WebAudio', mono: _this3.mono };\n          var customClass = info.customClass || undefined;\n          var waveOutlineColor = info.waveOutlineColor || undefined;\n          var stereoPan = info.stereoPan || 0;\n\n          // webaudio specific playout for now.\n          var playout = new _Playout2.default(_this3.ac, audioBuffer);\n\n          var track = new _Track2.default();\n          track.src = info.src;\n          track.setBuffer(audioBuffer);\n          track.setName(name);\n          track.setEventEmitter(_this3.ee);\n          track.setEnabledStates(states);\n          track.setCues(cueIn, cueOut);\n          track.setCustomClass(customClass);\n          track.setWaveOutlineColor(waveOutlineColor);\n\n          if (fadeIn !== undefined) {\n            track.setFadeIn(fadeIn.duration, fadeIn.shape);\n          }\n\n          if (fadeOut !== undefined) {\n            track.setFadeOut(fadeOut.duration, fadeOut.shape);\n          }\n\n          if (selection !== undefined) {\n            _this3.setActiveTrack(track);\n            _this3.setTimeSelection(selection.start, selection.end);\n          }\n\n          if (peaks !== undefined) {\n            track.setPeakData(peaks);\n          }\n\n          track.setState(_this3.getState());\n          track.setStartTime(start);\n          track.setPlayout(playout);\n\n          track.setGainLevel(gain);\n          track.setStereoPanValue(stereoPan);\n\n          if (muted) {\n            _this3.muteTrack(track);\n          }\n\n          if (soloed) {\n            _this3.soloTrack(track);\n          }\n\n          // extract peaks with AudioContext for now.\n          track.calculatePeaks(_this3.samplesPerPixel, _this3.sampleRate);\n\n          return track;\n        });\n\n        _this3.tracks = _this3.tracks.concat(tracks);\n        _this3.adjustDuration();\n        _this3.draw(_this3.render());\n\n        _this3.ee.emit('audiosourcesrendered');\n      }).catch(function (e) {\n        _this3.ee.emit('audiosourceserror', e);\n      });\n    }\n\n    /*\n      track instance of Track.\n    */\n\n  }, {\n    key: 'setActiveTrack',\n    value: function setActiveTrack(track) {\n      this.activeTrack = track;\n    }\n  }, {\n    key: 'getActiveTrack',\n    value: function getActiveTrack() {\n      return this.activeTrack;\n    }\n  }, {\n    key: 'isSegmentSelection',\n    value: function isSegmentSelection() {\n      return this.timeSelection.start !== this.timeSelection.end;\n    }\n\n    /*\n      start, end in seconds.\n    */\n\n  }, {\n    key: 'setTimeSelection',\n    value: function setTimeSelection() {\n      var start = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var end = arguments[1];\n\n      this.timeSelection = {\n        start: start,\n        end: end === undefined ? start : end\n      };\n\n      this.cursor = start;\n    }\n  }, {\n    key: 'startOfflineRender',\n    value: function startOfflineRender(type) {\n      var _this4 = this;\n\n      if (this.isRendering) {\n        return;\n      }\n\n      this.isRendering = true;\n      this.offlineAudioContext = new OfflineAudioContext(2, 44100 * this.duration, 44100);\n\n      var currentTime = this.offlineAudioContext.currentTime;\n\n      this.tracks.forEach(function (track) {\n        track.setOfflinePlayout(new _Playout2.default(_this4.offlineAudioContext, track.buffer));\n        track.schedulePlay(currentTime, 0, 0, {\n          shouldPlay: _this4.shouldTrackPlay(track),\n          masterGain: 1,\n          isOffline: true\n        });\n      });\n\n      /*\n        TODO cleanup of different audio playouts handling.\n      */\n      this.offlineAudioContext.startRendering().then(function (audioBuffer) {\n        if (type === 'buffer') {\n          _this4.ee.emit('audiorenderingfinished', type, audioBuffer);\n          _this4.isRendering = false;\n          return;\n        }\n\n        if (type === 'wav') {\n          _this4.exportWorker.postMessage({\n            command: 'init',\n            config: {\n              sampleRate: 44100\n            }\n          });\n\n          // callback for `exportWAV`\n          _this4.exportWorker.onmessage = function (e) {\n            _this4.ee.emit('audiorenderingfinished', type, e.data);\n            _this4.isRendering = false;\n\n            // clear out the buffer for next renderings.\n            _this4.exportWorker.postMessage({\n              command: 'clear'\n            });\n          };\n\n          // send the channel data from our buffer to the worker\n          _this4.exportWorker.postMessage({\n            command: 'record',\n            buffer: [audioBuffer.getChannelData(0), audioBuffer.getChannelData(1)]\n          });\n\n          // ask the worker for a WAV\n          _this4.exportWorker.postMessage({\n            command: 'exportWAV',\n            type: 'audio/wav'\n          });\n        }\n      }).catch(function (e) {\n        throw e;\n      });\n    }\n  }, {\n    key: 'getTimeSelection',\n    value: function getTimeSelection() {\n      return this.timeSelection;\n    }\n  }, {\n    key: 'setState',\n    value: function setState(state) {\n      this.state = state;\n\n      this.tracks.forEach(function (track) {\n        track.setState(state);\n      });\n    }\n  }, {\n    key: 'getState',\n    value: function getState() {\n      return this.state;\n    }\n  }, {\n    key: 'setZoomIndex',\n    value: function setZoomIndex(index) {\n      this.zoomIndex = index;\n    }\n  }, {\n    key: 'setZoomLevels',\n    value: function setZoomLevels(levels) {\n      this.zoomLevels = levels;\n    }\n  }, {\n    key: 'setZoom',\n    value: function setZoom(zoom) {\n      var _this5 = this;\n\n      this.samplesPerPixel = zoom;\n      this.zoomIndex = this.zoomLevels.indexOf(zoom);\n      this.tracks.forEach(function (track) {\n        track.calculatePeaks(zoom, _this5.sampleRate);\n      });\n    }\n  }, {\n    key: 'muteTrack',\n    value: function muteTrack(track) {\n      var index = this.mutedTracks.indexOf(track);\n\n      if (index > -1) {\n        this.mutedTracks.splice(index, 1);\n      } else {\n        this.mutedTracks.push(track);\n      }\n    }\n  }, {\n    key: 'soloTrack',\n    value: function soloTrack(track) {\n      var index = this.soloedTracks.indexOf(track);\n\n      if (index > -1) {\n        this.soloedTracks.splice(index, 1);\n      } else if (this.exclSolo) {\n        this.soloedTracks = [track];\n      } else {\n        this.soloedTracks.push(track);\n      }\n    }\n  }, {\n    key: 'adjustTrackPlayout',\n    value: function adjustTrackPlayout() {\n      var _this6 = this;\n\n      this.tracks.forEach(function (track) {\n        track.setShouldPlay(_this6.shouldTrackPlay(track));\n      });\n    }\n  }, {\n    key: 'adjustDuration',\n    value: function adjustDuration() {\n      this.duration = this.tracks.reduce(function (duration, track) {\n        return Math.max(duration, track.getEndTime());\n      }, 0);\n    }\n  }, {\n    key: 'shouldTrackPlay',\n    value: function shouldTrackPlay(track) {\n      var shouldPlay = void 0;\n      // if there are solo tracks, only they should play.\n      if (this.soloedTracks.length > 0) {\n        shouldPlay = false;\n        if (this.soloedTracks.indexOf(track) > -1) {\n          shouldPlay = true;\n        }\n      } else {\n        // play all tracks except any muted tracks.\n        shouldPlay = true;\n        if (this.mutedTracks.indexOf(track) > -1) {\n          shouldPlay = false;\n        }\n      }\n\n      return shouldPlay;\n    }\n  }, {\n    key: 'isPlaying',\n    value: function isPlaying() {\n      return this.tracks.reduce(function (isPlaying, track) {\n        return isPlaying || track.isPlaying();\n      }, false);\n    }\n\n    /*\n    *   returns the current point of time in the playlist in seconds.\n    */\n\n  }, {\n    key: 'getCurrentTime',\n    value: function getCurrentTime() {\n      var cursorPos = this.lastSeeked || this.pausedAt || this.cursor;\n\n      return cursorPos + this.getElapsedTime();\n    }\n  }, {\n    key: 'getElapsedTime',\n    value: function getElapsedTime() {\n      return this.ac.currentTime - this.lastPlay;\n    }\n  }, {\n    key: 'setMasterGain',\n    value: function setMasterGain(gain) {\n      this.ee.emit('mastervolumechange', gain);\n    }\n  }, {\n    key: 'restartPlayFrom',\n    value: function restartPlayFrom(start, end) {\n      this.stopAnimation();\n\n      this.tracks.forEach(function (editor) {\n        editor.scheduleStop();\n      });\n\n      return Promise.all(this.playoutPromises).then(this.play.bind(this, start, end));\n    }\n  }, {\n    key: 'play',\n    value: function play(startTime, endTime) {\n      var _this7 = this;\n\n      clearTimeout(this.resetDrawTimer);\n\n      var currentTime = this.ac.currentTime;\n      var selected = this.getTimeSelection();\n      var playoutPromises = [];\n\n      var start = startTime || this.pausedAt || this.cursor;\n      var end = endTime;\n\n      if (!end && selected.end !== selected.start && selected.end > start) {\n        end = selected.end;\n      }\n\n      if (this.isPlaying()) {\n        return this.restartPlayFrom(start, end);\n      }\n\n      this.tracks.forEach(function (track) {\n        track.setState('cursor');\n        playoutPromises.push(track.schedulePlay(currentTime, start, end, {\n          shouldPlay: _this7.shouldTrackPlay(track),\n          masterGain: _this7.masterGain\n        }));\n      });\n\n      this.lastPlay = currentTime;\n      // use these to track when the playlist has fully stopped.\n      this.playoutPromises = playoutPromises;\n      this.startAnimation(start);\n\n      return Promise.all(this.playoutPromises);\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      if (!this.isPlaying()) {\n        return Promise.all(this.playoutPromises);\n      }\n\n      this.pausedAt = this.getCurrentTime();\n      return this.playbackReset();\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      if (this.mediaRecorder && this.mediaRecorder.state === 'recording') {\n        this.mediaRecorder.stop();\n      }\n\n      this.pausedAt = undefined;\n      this.playbackSeconds = 0;\n      return this.playbackReset();\n    }\n  }, {\n    key: 'playbackReset',\n    value: function playbackReset() {\n      var _this8 = this;\n\n      this.lastSeeked = undefined;\n      this.stopAnimation();\n\n      this.tracks.forEach(function (track) {\n        track.scheduleStop();\n        track.setState(_this8.getState());\n      });\n\n      this.drawRequest();\n      return Promise.all(this.playoutPromises);\n    }\n  }, {\n    key: 'rewind',\n    value: function rewind() {\n      var _this9 = this;\n\n      return this.stop().then(function () {\n        _this9.scrollLeft = 0;\n        _this9.ee.emit('select', 0, 0);\n      });\n    }\n  }, {\n    key: 'fastForward',\n    value: function fastForward() {\n      var _this10 = this;\n\n      return this.stop().then(function () {\n        if (_this10.viewDuration < _this10.duration) {\n          _this10.scrollLeft = _this10.duration - _this10.viewDuration;\n        } else {\n          _this10.scrollLeft = 0;\n        }\n\n        _this10.ee.emit('select', _this10.duration, _this10.duration);\n      });\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      var _this11 = this;\n\n      return this.stop().then(function () {\n        _this11.tracks = [];\n        _this11.soloedTracks = [];\n        _this11.mutedTracks = [];\n        _this11.playoutPromises = [];\n\n        _this11.cursor = 0;\n        _this11.playbackSeconds = 0;\n        _this11.duration = 0;\n        _this11.scrollLeft = 0;\n\n        _this11.seek(0, 0, undefined);\n      });\n    }\n  }, {\n    key: 'record',\n    value: function record() {\n      var _this12 = this;\n\n      var playoutPromises = [];\n      this.mediaRecorder.start(300);\n\n      this.tracks.forEach(function (track) {\n        track.setState('none');\n        playoutPromises.push(track.schedulePlay(_this12.ac.currentTime, 0, undefined, {\n          shouldPlay: _this12.shouldTrackPlay(track)\n        }));\n      });\n\n      this.playoutPromises = playoutPromises;\n    }\n  }, {\n    key: 'startAnimation',\n    value: function startAnimation(startTime) {\n      var _this13 = this;\n\n      this.lastDraw = this.ac.currentTime;\n      this.animationRequest = window.requestAnimationFrame(function () {\n        _this13.updateEditor(startTime);\n      });\n    }\n  }, {\n    key: 'stopAnimation',\n    value: function stopAnimation() {\n      window.cancelAnimationFrame(this.animationRequest);\n      this.lastDraw = undefined;\n    }\n  }, {\n    key: 'seek',\n    value: function seek(start, end, track) {\n      if (this.isPlaying()) {\n        this.lastSeeked = start;\n        this.pausedAt = undefined;\n        this.restartPlayFrom(start);\n      } else {\n        // reset if it was paused.\n        this.setActiveTrack(track || this.tracks[0]);\n        this.pausedAt = start;\n        this.setTimeSelection(start, end);\n        if (this.getSeekStyle() === 'fill') {\n          this.playbackSeconds = start;\n        }\n      }\n    }\n\n    /*\n    * Animation function for the playlist.\n    * Keep under 16.7 milliseconds based on a typical screen refresh rate of 60fps.\n    */\n\n  }, {\n    key: 'updateEditor',\n    value: function updateEditor(cursor) {\n      var _this14 = this;\n\n      var currentTime = this.ac.currentTime;\n      var selection = this.getTimeSelection();\n      var cursorPos = cursor || this.cursor;\n      var elapsed = currentTime - this.lastDraw;\n\n      if (this.isPlaying()) {\n        var playbackSeconds = cursorPos + elapsed;\n        this.ee.emit('timeupdate', playbackSeconds);\n        this.animationRequest = window.requestAnimationFrame(function () {\n          _this14.updateEditor(playbackSeconds);\n        });\n\n        this.playbackSeconds = playbackSeconds;\n        this.draw(this.render());\n        this.lastDraw = currentTime;\n      } else {\n        if (cursorPos + elapsed >= (this.isSegmentSelection() ? selection.end : this.duration)) {\n          this.ee.emit('finished');\n        }\n\n        this.stopAnimation();\n\n        this.resetDrawTimer = setTimeout(function () {\n          _this14.pausedAt = undefined;\n          _this14.lastSeeked = undefined;\n          _this14.setState(_this14.getState());\n\n          _this14.playbackSeconds = 0;\n          _this14.draw(_this14.render());\n        }, 0);\n      }\n    }\n  }, {\n    key: 'drawRequest',\n    value: function drawRequest() {\n      var _this15 = this;\n\n      window.requestAnimationFrame(function () {\n        _this15.draw(_this15.render());\n      });\n    }\n  }, {\n    key: 'draw',\n    value: function draw(newTree) {\n      var patches = (0, _diff2.default)(this.tree, newTree);\n      this.rootNode = (0, _patch2.default)(this.rootNode, patches);\n      this.tree = newTree;\n\n      // use for fast forwarding.\n      this.viewDuration = (0, _conversions.pixelsToSeconds)(this.rootNode.clientWidth - this.controls.width, this.samplesPerPixel, this.sampleRate);\n    }\n  }, {\n    key: 'getTrackRenderData',\n    value: function getTrackRenderData() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var defaults = {\n        height: this.waveHeight,\n        resolution: this.samplesPerPixel,\n        sampleRate: this.sampleRate,\n        controls: this.controls,\n        isActive: false,\n        timeSelection: this.getTimeSelection(),\n        playlistLength: this.duration,\n        playbackSeconds: this.playbackSeconds,\n        colors: this.colors\n      };\n\n      return (0, _lodash2.default)(data, defaults);\n    }\n  }, {\n    key: 'isActiveTrack',\n    value: function isActiveTrack(track) {\n      var activeTrack = this.getActiveTrack();\n\n      if (this.isSegmentSelection()) {\n        return activeTrack === track;\n      }\n\n      return true;\n    }\n  }, {\n    key: 'renderAnnotations',\n    value: function renderAnnotations() {\n      return this.annotationList.render();\n    }\n  }, {\n    key: 'renderTimeScale',\n    value: function renderTimeScale() {\n      var controlWidth = this.controls.show ? this.controls.width : 0;\n      var timeScale = new _TimeScale2.default(this.duration, this.scrollLeft, this.samplesPerPixel, this.sampleRate, controlWidth, this.colors);\n\n      return timeScale.render();\n    }\n  }, {\n    key: 'renderTrackSection',\n    value: function renderTrackSection() {\n      var _this16 = this;\n\n      var trackElements = this.tracks.map(function (track) {\n        return track.render(_this16.getTrackRenderData({\n          isActive: _this16.isActiveTrack(track),\n          shouldPlay: _this16.shouldTrackPlay(track),\n          soloed: _this16.soloedTracks.indexOf(track) > -1,\n          muted: _this16.mutedTracks.indexOf(track) > -1\n        }));\n      });\n\n      return (0, _h2.default)('div.playlist-tracks', {\n        attributes: {\n          style: 'overflow: auto;'\n        },\n        onscroll: function onscroll(e) {\n          _this16.scrollLeft = (0, _conversions.pixelsToSeconds)(e.target.scrollLeft, _this16.samplesPerPixel, _this16.sampleRate);\n\n          _this16.ee.emit('scroll', _this16.scrollLeft);\n        },\n        hook: new _ScrollHook2.default(this)\n      }, trackElements);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var containerChildren = [];\n\n      if (this.showTimescale) {\n        containerChildren.push(this.renderTimeScale());\n      }\n\n      containerChildren.push(this.renderTrackSection());\n\n      if (this.annotationList.length) {\n        containerChildren.push(this.renderAnnotations());\n      }\n\n      return (0, _h2.default)('div.playlist', {\n        attributes: {\n          style: 'overflow: hidden; position: relative;'\n        }\n      }, containerChildren);\n    }\n  }, {\n    key: 'getInfo',\n    value: function getInfo() {\n      var info = [];\n\n      this.tracks.forEach(function (track) {\n        info.push(track.getTrackDetails());\n      });\n\n      return info;\n    }\n  }]);\n\n  return _class;\n}();\n\nexports.default = _class;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.init = init;\n\nexports.default = function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var ee = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0, _eventEmitter2.default)();\n\n  return init(options, ee);\n};\n\nvar _lodash = require('lodash.assign');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _createElement = require('virtual-dom/create-element');\n\nvar _createElement2 = _interopRequireDefault(_createElement);\n\nvar _eventEmitter = require('event-emitter');\n\nvar _eventEmitter2 = _interopRequireDefault(_eventEmitter);\n\nvar _Playlist = require('./Playlist');\n\nvar _Playlist2 = _interopRequireDefault(_Playlist);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction init() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var ee = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0, _eventEmitter2.default)();\n\n  if (options.container === undefined) {\n    throw new Error('DOM element container must be given.');\n  }\n\n  window.OfflineAudioContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;\n  window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n  var audioContext = new window.AudioContext();\n\n  var defaults = {\n    ac: audioContext,\n    sampleRate: audioContext.sampleRate,\n    samplesPerPixel: 4096,\n    mono: true,\n    fadeType: 'logarithmic',\n    exclSolo: false,\n    timescale: false,\n    controls: {\n      show: false,\n      width: 150\n    },\n    colors: {\n      waveOutlineColor: 'white',\n      timeColor: 'grey',\n      fadeColor: 'black'\n    },\n    seekStyle: 'line',\n    waveHeight: 128,\n    state: 'cursor',\n    zoomLevels: [512, 1024, 2048, 4096],\n    annotationList: {\n      annotations: [],\n      controls: [],\n      editable: false,\n      linkEndpoints: false,\n      isContinuousPlay: false\n    },\n    isAutomaticScroll: false\n  };\n\n  var config = (0, _lodash2.default)(defaults, options);\n  var zoomIndex = config.zoomLevels.indexOf(config.samplesPerPixel);\n\n  if (zoomIndex === -1) {\n    throw new Error('initial samplesPerPixel must be included in array zoomLevels');\n  }\n\n  var playlist = new _Playlist2.default();\n  playlist.setSampleRate(config.sampleRate);\n  playlist.setSamplesPerPixel(config.samplesPerPixel);\n  playlist.setAudioContext(config.ac);\n  playlist.setEventEmitter(ee);\n  playlist.setUpEventEmitter();\n  playlist.setTimeSelection(0, 0);\n  playlist.setState(config.state);\n  playlist.setControlOptions(config.controls);\n  playlist.setWaveHeight(config.waveHeight);\n  playlist.setColors(config.colors);\n  playlist.setZoomLevels(config.zoomLevels);\n  playlist.setZoomIndex(zoomIndex);\n  playlist.setMono(config.mono);\n  playlist.setExclSolo(config.exclSolo);\n  playlist.setShowTimeScale(config.timescale);\n  playlist.setSeekStyle(config.seekStyle);\n  playlist.setAnnotations(config.annotationList);\n  playlist.isAutomaticScroll = config.isAutomaticScroll;\n  playlist.isContinuousPlay = config.isContinuousPlay;\n  playlist.linkedEndpoints = config.linkedEndpoints;\n\n  // take care of initial virtual dom rendering.\n  var tree = playlist.render();\n  var rootNode = (0, _createElement2.default)(tree);\n\n  config.container.appendChild(rootNode);\n  playlist.tree = tree;\n  playlist.rootNode = rootNode;\n\n  return playlist;\n}","import { diffWords } from 'diff';\n\nimport { sentencetableTemplate } from './templates/sentencetable';\n\nimport WaveformPlaylist from 'waveform-playlist';\n\nclass View {\n  constructor(baseElement) {\n    this.root = baseElement;\n    this.elements = {};\n    this.elementGroups = {};\n    this.listeners = {};\n  }\n\n  hideElement(name) {\n    this.elements[name].style.display = 'none';\n  }\n\n  showElement(name) {\n    this.elements[name].style.display = '';\n  }\n\n  defineElementGroup(groupName, elementNameArray) {\n    this.elementGroups[groupName] = elementNameArray;\n  }\n  showGroup(groupName) {\n    this.elementGroups[groupName].forEach((elementName) =>\n      this.showElement(elementName)\n    );\n  }\n  hideGroup(groupName) {\n    this.elementGroups[groupName].forEach((elementName) =>\n      this.hideElement(elementName)\n    );\n  }\n\n  get exists() {\n    return !!this.root;\n  }\n\n  on(event, callback) {\n    if (!this.listeners[event]) {\n      this.listeners[event] = [];\n    }\n\n    this.listeners[event].push(callback);\n  }\n\n  trigger(event, data) {\n    const listeners = this.listeners[event];\n    if (listeners) {\n      listeners.forEach((callback) => callback(data));\n    }\n  }\n\n  eventOnRoot(event, callback) {\n    this.root.addEventListener(event, (e) => {\n      callback();\n    });\n  }\n}\n\n// FORMS\n\nclass FormView extends View {\n  onFormData(callback) {\n    this.root.addEventListener('submit', (e) => {\n      e.preventDefault();\n\n      callback(this.getFormData());\n    });\n  }\n\n  getFormData() {\n    const inputs = Array.from(this.root.querySelectorAll('input'));\n    const data = {};\n\n    inputs.forEach((el) => {\n      // TODO suggestion from Heather: switch this to always use `name`. I'll have to check with Tom first, though (because it breaks existing code)\n      const name = el.name ? el.name : el.id;\n\n      // TODO design question: should we handle situations where there's multiple inputs with the same name? (turn it into an array? ignore them?)\n      data[name] = el.value;\n    });\n\n    return data;\n  }\n\n  clearFormData() {\n    const inputs = Array.from(this.root.querySelectorAll('input'));\n    inputs.forEach((el) => {\n      el.value = '';\n    });\n  }\n}\n\n// GENERIC DOM MANIP\n\nexport class LogoutView extends View {}\n\nexport class AlertView extends View {\n  static hide() {\n    const el = document.querySelector('.alert');\n    if (el) el.parentElement.removeChild(el);\n  }\n\n  // type is 'success' or 'error'\n  // returns a promise (that resolves when the alert is hidden by timeout)\n  static show(type, msg) {\n    this.hide();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n    return new Promise((resolve, reject) => {\n      window.setTimeout(() => {\n        this.hide();\n        resolve();\n      }, 3000);\n    })\n  }\n}\n\nwindow.onerror = (err) => AlertView.show('error', err);\n\nexport class DataParserView extends View {\n  static get(input_name) {\n    return JSON.parse(\n      document.querySelector(`.js-value[name=\"${input_name}\"]`).value\n    );\n  }\n}\n\n// AUTH VIEWS -----------\n\nexport class LoginFormView extends FormView {}\n\nexport class SignupFormView extends FormView {}\n\n// CREATE SENTENCE VIEWS --------\n\nexport class CreateSentenceFormView extends FormView {}\n\nexport class AudioEditorView extends View {\n  constructor(element) {\n    super(element);\n\n    // gnarly, awkward workaround for the fact that WaveformPlaylist uses eval for something that could have been a member access on window\n    // but, we can technically replace `eval` with a function that invokes member access on window, so... that kind of works?\n    window.eval = (str) => window[str];\n\n    this.elements.save = this.root.querySelector('.save-button')\n    this.elements.record = this.root.querySelector('.record-button')\n\n    this.elements.save.addEventListener('click', () => {\n      this.ee.emit('startaudiorendering', 'buffer');\n    })\n\n    this.elements.record.addEventListener('click', () => {\n      try {\n        this.ee.emit('record');\n      } catch(err) {\n        AlertView.show('success', err.stack);\n      }\n    })\n\n    this.setupEditor();\n  }\n\n  setupEditor() {\n    this.playlist = WaveformPlaylist({\n      container: this.root.querySelector('.TEST-audio-editor'),\n      state: 'select',\n    })\n    this.ee = this.playlist.getEventEmitter();\n\n    //navigator.mediaDevices.getUserMedia({audio:true}).then(stream => this.playlist.initRecorder(stream))\n\n    this.playlist.load([\n      {src: \"/heather-test-audio.mp3\"},\n    ]).then(() => {\n      this.ee.emit('zoomin')\n      this.ee.emit('zoomin')\n    })\n    document.addEventListener('keydown', (evt) => {\n      if (evt.key == '\\\\') {\n        evt.preventDefault();\n        this.ee.emit('play');\n      }\n      if (evt.key == '/') {\n        evt.preventDefault();\n        this.ee.emit('select', 0.5, 2.5);\n        //ee.emit('statechange', 'select');\n      }\n    })\n    this.ee.on('select', (start, end, track) => {\n      this.start = start;\n      this.end = end;\n    })\n\n    this.ee.on('audiorenderingfinished', (type, data) => {\n      //AlertView.show('success', `${type}: ${data.__proto__.constructor.name}[${data.length/data.sampleRate}]`)\n      try {\n        const start = Math.floor(this.start * data.sampleRate) || 0;\n        const length = (this.end ? Math.floor(this.end * data.sampleRate) : data.length) - start;\n        const chan = data.getChannelData(0).slice(start);\n        const sampleRate = data.sampleRate;\n        const seconds = this.end - this.start;\n        const buf = new AudioBuffer({length, sampleRate});\n        //AlertView.show('success', `${type}: ${data.__proto__.constructor.name}[${buf.length/buf.sampleRate}]\\n${data.length}\\n${chan.length}\\n${buf.length}`)\n\n        buf.copyToChannel(chan, 0);\n        return\n        this.playlist.load([\n          {src:buf}\n        ])\n      } catch (err) {\n        AlertView.show('error', err);\n      }\n    })\n  }\n}\n\n// CREATE TASK VIEWS --------\n\nclass CreateTaskView extends View {\n  getValues(selector) {\n    const nonToggleInputs = Array.from(\n      this.root.querySelectorAll(`${selector}`)\n    );\n    const data = {};\n\n    nonToggleInputs.forEach((el) => {\n      const name = el.name;\n      if (el.value) {\n        data[name] = el.value;\n      }\n    });\n\n    return data;\n  }\n}\n\nexport class CreateTaskRandomView extends CreateTaskView {\n  constructor(element) {\n    super(element);\n\n    //Get inputs (.elements name must match their corresponding switch's name)\n    this.elements.vivaRefLow = this.root.querySelector('.vivaref-low');\n    this.elements.vivaRefHigh = this.root.querySelector('.vivaref-high');\n    this.elements.levelLow = this.root.querySelector('.level-low');\n    this.elements.levelHigh = this.root.querySelector('.level-high');\n\n    this.elements.switches = {};\n    this.elements.switches.vivaRefLow = this.root\n      .querySelector('.check-vivaref-low')\n      .getElementsByTagName('input');\n    this.elements.switches.vivaRefHigh = this.root\n      .querySelector('.check-vivaref-high')\n      .getElementsByTagName('input');\n    this.elements.switches.levelLow = this.root\n      .querySelector('.check-level-low')\n      .getElementsByTagName('input');\n    this.elements.switches.levelHigh = this.root\n      .querySelector('.check-level-high')\n      .getElementsByTagName('input');\n\n    const switches = Array.from(\n      this.root.querySelectorAll('input[type=checkbox]')\n    );\n\n    //Prep DOM\n    switches.forEach((e) => this.showHide(e));\n\n    //Add event listener for change\n    switches.forEach((e) => {\n      e.addEventListener('change', (e) => this.showHide(e.srcElement));\n    });\n  }\n\n  //Function to return form data on submit\n\n  onCreateTaskRandomValues = (callback) => {\n    this.root.addEventListener('submit', (e) => {\n      e.preventDefault();\n      const vivaRefRes = this.getUpperLower(\n        this.elements.switches.vivaRefLow[0],\n        this.elements.switches.vivaRefHigh[0],\n        'vivaRef'\n      );\n      const levelRes = this.getUpperLower(\n        this.elements.switches.levelLow[0],\n        this.elements.switches.levelHigh[0],\n        'level'\n      );\n      const nonToggleValues = this.getValues('.sentence-details');\n      const paramsObject = { ...vivaRefRes, ...levelRes, ...nonToggleValues };\n      const params = new URLSearchParams(paramsObject);\n\n      const searchParams = decodeURIComponent(params.toString());\n      const taskDetails = this.getValues('.task-details');\n\n      callback(searchParams, taskDetails);\n    });\n  };\n\n  getUpperLower(checkOne, checkTwo, searchParam) {\n    const lowerValue = this.elements[checkOne.name].value;\n    const higherValue = this.elements[checkTwo.name].value;\n\n    if (checkTwo.checked) {\n      const res = `{\"${searchParam}[gte]\": ${lowerValue},\n\t\t  \"${searchParam}[lte]\": ${higherValue}}`;\n      return JSON.parse(res);\n    } else if (checkOne.checked) {\n      const res = JSON.parse(`{\"${searchParam}\" : ${lowerValue}}`);\n      return res;\n    } else {\n      return null;\n    }\n  }\n\n  showHide = (el) => {\n    if (el.checked) {\n      this.showElement(el.name);\n    } else {\n      this.hideElement(el.name);\n    }\n  };\n}\n\nexport class CreateTaskChooseSentenceView extends CreateTaskView {\n  constructor(element) {\n    super(element);\n\n    this.elements.tableParent = this.root.querySelector(\n      '.sentence-table-holder'\n    );\n    this.elements.saveButton = this.root.querySelector(\n      'button.set-tasks-button-choose-sentences'\n    );\n\n    this.getFilterElements().forEach((el) => {\n      el.addEventListener('change', this.updateFilters.bind(this));\n    });\n\n    this.elements.saveButton.addEventListener('click', () =>\n      this.trigger('save', {})\n    );\n\n    this.elements.tableParent.addEventListener('change', (evt) => {\n      if (evt.target.tagName == 'INPUT' && evt.target.type == 'checkbox') {\n        const sentenceId = evt.target.dataset.sentence_id;\n        if (sentenceId) {\n          const triggerType = evt.target.checked\n            ? 'add_sentence'\n            : 'remove_sentence';\n          this.trigger(triggerType, { sentenceId });\n        }\n      }\n    });\n  }\n\n  getFilterElements() {\n    return Array.from(this.root.querySelectorAll('.filter-selector'));\n  }\n\n  updateFilters() {\n    const filterState = {};\n    this.getFilterElements().filter((el) => el.value != '').forEach((el) => (filterState[el.name] = el.value));\n\n    this.trigger('filter_update', filterState);\n  }\n\n  updateDisplay(sentences, toSave) {\n    const fields = [\n      'grammar',\n      'vivaRef',\n      'tense',\n      'level',\n      'sentence',\n      'translation',\n    ];\n    const fieldClasses = {\n      grammar: 'narrow',\n      vivaRef: 'narrow',\n      tense: 'narrow',\n      level: 'narrow',\n    };\n\n    this.elements.tableParent.innerHTML = sentencetableTemplate({\n      fields,\n      sentences,\n      fieldClasses,\n    });\n  }\n}\n\n// TRAINING VIEW\n\nexport class TrainingView extends FormView {\n  constructor(element) {\n    super(element);\n\n    // get our sub-elements\n    this.elements.prompt = this.root.querySelector('.card-title');\n    this.elements.input = this.root.querySelector('[name=student_answer]');\n    this.elements.answer_feedback = this.root.querySelector('.answer-feedback');\n    this.elements.answer_feedback_inner = this.root.querySelector(\n      '.answer-feedback-inner'\n    );\n    this.elements.correct_answer = this.root.querySelector('.correct-answer');\n    this.elements.correct_answer_inner = this.root.querySelector(\n      '.correct-answer-inner'\n    );\n    this.elements.right_count = this.root.querySelector('.right-count');\n    this.elements.total_count = this.root.querySelector('.total-count');\n    this.elements.submit_button = this.root.querySelector(\n      'button[type=submit]'\n    );\n    this.elements.next_button = this.root.querySelector(\n      'button[type=button].btn-next'\n    );\n\n    this.elements.audio = this.root.querySelector('audio.sentence-audio')\n\n    // define some groups of elements\n    this.defineElementGroup('feedback', ['answer_feedback', 'next_button']);\n    this.defineElementGroup('dataEntry', ['input', 'submit_button']);\n\n    // prep DOM\n    this.hideGroup('feedback');\n    this.clearAnswerText();\n\n    // set up event listeners\n    this.onFormData((data) => this.handleStudentAnswer(data));\n    this.elements.next_button.addEventListener('click', () => {\n      this.hideGroup('feedback');\n      this.showGroup('dataEntry');\n\n      this.clearAnswerText();\n\n      this.elements.input.focus();\n\n      this.trigger('next');\n    });\n\n    // global hotkeys (should be fine, though?)\n    document.addEventListener('keydown', (evt) => {\n      if (evt.key == '[') {\n        evt.preventDefault();\n        this.elements.audio.play();\n      }\n    })\n  }\n\n  updateCounts(right, total) {\n    this.elements.right_count.innerText = right;\n    this.elements.total_count.innerText = total;\n  }\n\n  clearAnswerText() {\n    this.elements.input.value = '';\n    this.elements.correct_answer_inner.innerText = '';\n  }\n\n  handleStudentAnswer({ student_answer }) {\n    // CALCULATE VARIOUS DATA (maybe could live outside of the View layer?)\n\n    function normalize(str) {\n      // normalize to ONLY letters and numbers (cross-language), lowercase\n      // this'll require fairly modern JS, incidentally \n      return str.replace(/[^\\p{Letter}\\p{Number}]/ugi, '').toLowerCase()\n    }\n\n    // TODO DESIGN QUESTION: where should isCorrect be calculated? what code owns that logic?\n    const isCorrect = normalize(student_answer) == normalize(this.answer);\n\n    const diffs = diffWords(this.answer, student_answer, { ignoreCase: true });\n\n    // DISPLAY CALCULATED DATA\n    {\n      // NOTE from Heather to Tom:\n      //   this method call looks a little over-fancy. feel free to refactor into something easier to read. hopefully I've added enough comments to make it understandable?\n      this.setAsHighlightedSpan(\n        // element name\n        'answer_feedback_inner',\n        // pass only the diff entries that we want to display\n        diffs.filter((diff) => !diff.removed),\n        // CSS class name callback\n        (diff) => (diff.added ? 'highlight-wrong' : 'highlight-right')\n      );\n\n      this.setAsHighlightedSpan(\n        'correct_answer_inner',\n        diffs.filter((diff) => !diff.added),\n        (diff) => (diff.removed ? 'highlight-wrong' : 'highlight-right')\n      );\n    }\n\n    // SET UP DOM STATE\n    {\n      this.hideGroup('dataEntry');\n      this.showGroup('feedback');\n\n      this.elements.next_button.focus();\n\n      this.trigger('answer', { student_answer, isCorrect });\n    }\n  }\n\n  // this method replaces the content of an element with a set of highlighted/styled spans, such as you might want if you're presenting diff output.\n  // also, this could live in one of the parent classes, if it ends up being useful elsewhere.\n  //\n  // `elementName` is the string name of some element that this view tracks\n  // `array` is expected to be an array of items with at least a `value` property\n  // `classNameCallback` is a callback that spits out the CSS classes, space-separated, that go with each entry of the array\n  setAsHighlightedSpan(elementName, array, classNameCallback) {\n    const baseEl = this.elements[elementName];\n\n    // keep track of the index so that we can do a .innerText later (thus bypassing issues with HTML injection / XSS)\n    const spans = array.map((entry, index) => {\n      const elClass = classNameCallback(entry);\n      // using some index-juggling in order to avoid having to worry about HTML injection\n      return `<span class=\"${elClass}\">${index}</span>`;\n    });\n\n    baseEl.innerHTML = spans.join('');\n\n    // now we can safely assign user-defined text, via `.innerText` (which doesn't get parsed as HTML)\n    Array.from(baseEl.querySelectorAll('span')).forEach((span) => {\n      span.innerText = array[span.innerText].value;\n    });\n  }\n\n  finish() {\n    this.prompt = 'done';\n    this.hideGroup('dataEntry');\n    this.hideGroup('feedback');\n  }\n\n  get prompt() {\n    return this.elements.prompt.innerText;\n  }\n\n  set prompt(value) {\n    return (this.elements.prompt.innerText = value);\n  }\n\n  get audioUrl() {\n    return this.elements.audio.src;\n  }\n\n  set audioUrl(value) {\n    return (this.elements.audio.src = value);\n  }\n}\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress',\n    'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath'\n  ];\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys);\n\n  var otherKeys = Object\n    .keys(config2)\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","module.exports = require('./lib/axios');","import { AlertView, DataParserView } from './views.js';\nimport axios from 'axios';\n\nclass ModelApiError extends Error {}\n\n// parent class for models. includes some utility methods, and such\n//\n// if we wanted to get fancy, we might consider picking up the mongoose model definitions, and making use of that somehow.\n// but, that seems like it might take more effort than it's worth, at least until we start needing client-side validation\nclass Model {\n  constructor(data) {\n    this.data = data;\n  }\n\n  // can throw, catch in the Controller layer\n  static async sendApiRequest(url, method, data) {\n    try {\n      const res = await axios({\n        method,\n        url,\n        data,\n      });\n      if (res.data.status == 'success') {\n        return res;\n      }\n\n      // TODO question for Tom: what should we pass as the error message here?\n      throw new ModelApiError('API failure');\n    } catch (err) {\n      throw new ModelApiError(err.response.data.message);\n    }\n  }\n\n  // returns an array of instantiated objects, based on JSON embedded in a specific DOM element\n  static getLocal(name) {\n    // this is *maybe* not as theoretically clean to have a Model call into a View, but since we're storing global data in certain DOM elements, it works well in practice\n\n    var data = DataParserView.get(name);\n    if (!(data instanceof Array)) {\n      data = [data];\n    }\n    return data.map((single) => new this(single));\n  }\n}\n\nexport class AuthModel extends Model {\n  static async login(email, password) {\n    return this.sendApiRequest('api/v1/users/login', 'POST', {\n      email,\n      password,\n    });\n  }\n\n  static async logout() {\n    return this.sendApiRequest('/api/v1/users/logout', 'GET');\n  }\n\n  static async signup(name, email, password, passwordConfirm, classCode) {\n    return this.sendApiRequest('/api/v1/users/signup', 'POST', {\n      name,\n      email,\n      password,\n      passwordConfirm,\n      classCode,\n    });\n  }\n}\n\nexport class CreateTaskModel extends Model {}\n\nexport class CreateSentenceModel extends Model {\n  // can throw, catch in the Controller layer\n  static async create(sentence, translation, level, vivaRef, tense, grammar) {\n    const data = {\n      sentence,\n      translation,\n      level,\n      vivaRef,\n      grammar,\n      tense,\n    };\n\n    return this.sendApiRequest('/api/v1/sentences', 'POST', data);\n  }\n}\n\n// TODO maybe move some of the data from the controller into this?\nexport class StudentResultsModel extends Model {\n  static async send(correctCount, wrongCount, studentSentences) {\n    const payload = {\n      correctCount: this.correctCount,\n      wrongCount: this.wrongCount,\n      studentSentences: this.finishedSentences,\n    };\n\n    return this.sendApiRequest('TODO-PLACEHOLDER', 'POST', payload);\n  }\n}\n\nexport class SentenceModel extends Model {\n  // type is 'gapped' or 'translation'\n  subclassAs(type) {\n    switch (type) {\n      case 'gapped':\n        return new GappedSentenceModel(this.data);\n      case 'translation':\n        return new TranslationSentenceModel(this.data);\n    }\n  }\n  get prompt() {\n    return this.data.sentence;\n  }\n\n  get answer() {\n    return this.data.translation;\n  }\n\n  get audioUrl() {\n    return this.data.audio;\n  }\n\n  static async fetchAll() {\n    const res = await this.sendApiRequest('api/v1/sentences', 'GET', {});\n    const sentences = res.data.data.data;\n    return sentences.map((sentenceData) => new this(sentenceData));\n  }\n}\n\nclass GappedSentenceModel extends SentenceModel {\n  constructor(data) {\n    super(data);\n\n    const words = this.data.sentence.trim().split(/\\s+/g);\n    const gapIndex = Math.floor(Math.random() * words.length);\n\n    // TODO handle punctuation\n    const gapWord = words[gapIndex];\n    words[gapIndex] = '___';\n\n    this.gapWord = gapWord;\n    this.gappedPrompt = words.join(' ');\n  }\n\n  get prompt() {\n    return this.gappedPrompt;\n  }\n\n  get answer() {\n    return this.gapWord;\n  }\n}\n\nclass TranslationSentenceModel extends SentenceModel {}\n","import {\n  LoginFormView,\n  TrainingView,\n  CreateSentenceFormView,\n  AudioEditorView,\n  DataParserView,\n  AlertView,\n  LogoutView,\n  SignupFormView,\n  CreateTaskRandomView,\n  CreateTaskChooseSentenceView,\n} from './views.js';\nimport {\n  AuthModel,\n  SentenceModel,\n  CreateSentenceModel,\n  StudentResultsModel,\n  CreateTaskModel,\n} from './models.js';\n\n// parent class for controllers. Not much needs to be in here, I don't think, so leave it empty.\nclass Controller {\n  constructor(viewBaseElement) {\n    const viewClass = this.getViewClass();\n    this.view = new viewClass(viewBaseElement);\n  }\n}\n\nexport class LoginController extends Controller {\n  getViewClass() {\n    return LoginFormView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onFormData(async ({ email, password }) => {\n      try {\n        await AuthModel.login(email, password);\n\n        AlertView.show('success', 'Logged in successfully!');\n        window.setTimeout(() => {\n          location.assign('/');\n        }, 1500);\n      } catch (err) {\n        AlertView.show('error', err.message);\n      }\n    });\n  }\n}\n\nexport class LogoutController extends Controller {\n  getViewClass() {\n    return LogoutView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.eventOnRoot('click', async () => {\n      try {\n        await AuthModel.logout();\n\n        AlertView.show('success', 'Logged out!');\n        window.setTimeout(() => {\n          location.assign('/login');\n        }, 1500);\n      } catch (err) {\n        AlertView.show('error', err.message);\n      }\n    });\n  }\n}\n\nexport class SignupController extends Controller {\n  getViewClass() {\n    return SignupFormView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onFormData(\n      async ({ name, email, password, passwordConfirm, classCode }) => {\n        try {\n          await AuthModel.signup(\n            name,\n            email,\n            password,\n            passwordConfirm,\n            classCode\n          );\n\n          AlertView.show('success', 'Signed up successfully!');\n          window.setTimeout(() => {\n            location.assign('/');\n          }, 1500);\n        } catch (err) {\n          AlertView.show('error', err.message);\n        }\n      }\n    );\n  }\n}\n\nexport class CreateSentenceController extends Controller {\n  getViewClass() {\n    return CreateSentenceFormView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onFormData(\n      async ({ sentence, translation, level, vivaRef, tense, grammar }) => {\n        try {\n          const res = await CreateSentenceModel.create(\n            sentence,\n            translation,\n            level,\n            vivaRef,\n            tense,\n            grammar\n          );\n          this.view.clearFormData();\n          if (res) {\n            AlertView.show('success', 'Sentence created');\n          }\n        } catch (err) {\n          AlertView.show('error', err.message);\n        }\n      }\n    );\n  }\n}\n\nexport class AudioEditorController extends Controller {\n  getViewClass() {\n    return AudioEditorView;\n  }\n}\n\nexport class CreateTaskRandomController extends Controller {\n  getViewClass() {\n    return CreateTaskRandomView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    this.view.onCreateTaskRandomValues(async (searchParams, taskDetails) => {\n      try {\n        //Get sentences from API\n        const sentencesRes = await CreateTaskModel.sendApiRequest(\n          `/api/v1/sentences?${searchParams}`,\n          'GET'\n        );\n        // Add sentence ID array and teacher to req.body for task creation\n        taskDetails.sentences = sentencesRes.data.data.data.map((e) => e._id);\n        taskDetails.teacher = DataParserView.get('user');\n\n        //Create task\n        const createTask = await CreateTaskModel.sendApiRequest(\n          '/api/v1/tasks',\n          'POST',\n          taskDetails\n        );\n        if (createTask) {\n          AlertView.show('success', 'Task created');\n        }\n      } catch (err) {\n        AlertView.show('error', err.message);\n      }\n    });\n  }\n}\n\nexport class TrainController extends Controller {\n  getViewClass() {\n    return TrainingView;\n  }\n\n  constructor(...args) {\n    super(...args);\n\n    const exerciseType = DataParserView.get('exercise');\n\n    this.sentences = SentenceModel.getLocal('sentences').map((sent) =>\n      sent.subclassAs(exerciseType)\n    );\n    this.finishedSentences = [];\n\n    this.initialCount = this.sentences.length;\n\n    this.rightCount = 0;\n    this.wrongCount = 0;\n\n    this.view.updateCounts(this.rightCount, this.initialCount);\n\n    this.view.on('answer', this.doAnswer.bind(this));\n    this.view.on('next', this.doNextSentence.bind(this));\n\n    this.doNextSentence();\n  }\n\n  doAnswer({ student_answer, isCorrect }) {\n    const desiredReaskLength = 3;\n\n    const sentenceObject = this.sentences.shift();\n    this.finishedSentences.push({\n      sentence: sentenceObject.data,\n      student_answer,\n      isCorrect,\n    });\n\n    if (isCorrect) {\n      AlertView.show('success', 'Correct Answer');\n      this.rightCount++;\n    } else {\n      AlertView.show('error', 'Incorrect Answer');\n      this.wrongCount++;\n\n      const insertionIndex = Math.min(\n        this.sentences.length,\n        desiredReaskLength\n      );\n      this.sentences.splice(insertionIndex, 0, sentenceObject);\n    }\n\n    this.view.updateCounts(this.rightCount, this.initialCount);\n  }\n\n  doNextSentence() {\n    if (!this.sentences[0]) {\n      this.view.finish();\n      // wait to show the AlertView until *after* the data has hit the server successfully\n      this.sendResultsToServer()\n        .then(() => {\n          return AlertView.show('success', 'Task Completed');\n        })\n        .then(() => {\n          window.location = '/';\n        });\n      return;\n    }\n\n    const sentence = this.sentences[0];\n\n    this.view.prompt = sentence.prompt;\n    this.view.answer = sentence.answer;\n    this.view.audioUrl = sentence.audioUrl;\n  }\n\n  async sendResultsToServer() {\n    try {\n      await StudentResultsModel.send(\n        this.correctCount,\n        this.wrongCount,\n        this.finishedSentences\n      );\n      // do we need to show feedback or anything?\n    } catch (err) {\n      AlertView.show('error', err.message);\n    }\n  }\n}\n\nexport class CreateTaskChooseSentenceController extends Controller {\n  getViewClass() {\n    return CreateTaskChooseSentenceView;\n  }\n\n  constructor(viewBaseElement) {\n    super(viewBaseElement);\n\n    this.view.on('filter_update', async (filterData) => {\n      /*\n      const tmp = this.sentences.filter((sent) => {\n        if (\n          this.sentencesToSave.some((other) => other.data._id == sent.data._id)\n        ) {\n          return true;\n        }\n        for (let key in filterData) {\n          if (filterData[key] == '') {\n            continue;\n          }\n          if (sent.data[key] instanceof Array) {\n            if (!sent.data[key].includes(filterData[key])) {\n              return false;\n            }\n          } else {\n            if (sent.data[key] != filterData[key]) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n      */\n\n      const searchParams = new URLSearchParams({\n        ...filterData,\n      })\n      const tmp = await SentenceModel.sendApiRequest(\n        `/api/v1/sentences?${searchParams.toString()}`,\n        'GET'\n      );\n\n      const sents = tmp.data.data.data.map((dbObj) => new SentenceModel(dbObj))\n\n      const saveIds = this.sentencesToSave.map((sent) => sent.data._id);\n\n      this.view.updateDisplay(sents.filter((sent) => !saveIds.includes(sent.data._id)), this.sentencesToSave);\n    });\n\n    this.sentencesToSave = [];\n    this.view.on('add_sentence', ({ sentenceId }) => {\n      this.sentencesToSave.push(\n        this.sentences.find((sent) => sent.data._id == sentenceId)\n      );\n    });\n    this.view.on('remove_sentence', ({ sentenceId }) => {\n      this.sentencesToSave = this.sentencesToSave.filter(\n        (sent) => sent.data._id != sentenceId\n      );\n    });\n\n    this.view.on('save', this.save.bind(this));\n\n    this.sentences = [];\n    SentenceModel.fetchAll()\n      .then((sent) => this.updateSentences(sent))\n      .catch((err) => AlertView.show('error', err));\n  }\n\n  updateSentences(sentences) {\n    this.sentences = sentences;\n\n    this.view.updateDisplay(sentences, this.sentencesToSave);\n  }\n\n  async save() {\n    try {\n      const sentences = this.sentencesToSave.map((e) => e.data._id);\n\n      const taskDetails = this.view.getValues('.task-details');\n      taskDetails.sentences = sentences;\n      taskDetails.teacher = DataParserView.get('user');\n\n      const createTask = await CreateTaskModel.sendApiRequest(\n        '/api/v1/tasks',\n        'POST',\n        taskDetails\n      );\n\n      if (createTask) {\n        AlertView.show('success', 'Task created!');\n      }\n    } catch (err) {\n      AlertView.show('error', err.message);\n    }\n  }\n}\n","import * as controllers from './controllers.js';\n\n(function() {\n\t// load controllers dynamically based on what the server-generated HTML requests\n\tArray.from(document.querySelectorAll('[data-controller]')).forEach(domElement => {\n\t\tconst controllerClass = controllers[domElement.dataset['controller']];\n\n\t\tnew controllerClass(domElement);\n\t})\n})()\n"]}